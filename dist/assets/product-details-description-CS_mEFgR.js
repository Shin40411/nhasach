import{j as e,B as t,A as te,cq as ne,dx as oe,I as p,T as d,a$ as L,O as ae,D as C,dt as ie,M as I,N as le,W as ce,g as B,cp as de,e2 as xe,V as g,bB as pe,L as W}from"./index-D6bpUwKX.js";import{b as S,c as z}from"./format-number-Cj8l_lI8.js";import{R as k}from"./Rating-BR8dol5T.js";import{P as ue,p as he}from"./Pagination-BdKAEoFn.js";import{f as me}from"./product-review-new-form-BzuNbX9e.js";import{s as ye}from"./sumBy-ofy1HSRF.js";import{S as h}from"./Stack-7h-e6yAT.js";import{u as je,C as fe}from"./styles-D8b8rnOK.js";import{F as ge}from"./fields-B53gUzDf.js";import"./preview-single-file-DAd3oWJu.js";import"./code-highlight-block-YQG8K_vY.js";import{F as be}from"./form-provider-BQ6XSOiV.js";import{N as ve}from"./number-input-DQ22OHLr.js";import{a as we}from"./color-preview-DQyBWqPc.js";import{I as Ce}from"./image-FIum-Rwa.js";import{u as Ie,L as Se}from"./use-light-box-CWKTePzW.js";import{e as ke,C as Pe,f as Re,g as De}from"./carousel-arrow-buttons-CT0W27Pw.js";import{u as Le}from"./use-carousel-CQB9aVgm.js";import{M as We}from"./markdown-D0BtPAT8.js";function ze({review:s}){const r=()=>e.jsxs(t,{sx:{gap:2,display:"flex",width:{md:240},alignItems:"center",textAlign:{md:"center"},flexDirection:{xs:"row",md:"column"}},children:[e.jsx(te,{src:s.avatarUrl,sx:{width:{xs:48,md:64},height:{xs:48,md:64}}}),e.jsx(ne,{primary:s.name,secondary:oe(s.postedAt),slotProps:{primary:{noWrap:!0},secondary:{noWrap:!0,sx:{mt:.5,typography:"caption"}}}})]}),a=()=>{var i;return e.jsxs(t,{sx:{gap:1,display:"flex",flex:"1 1 auto",flexDirection:"column"},children:[e.jsx(k,{size:"small",value:s.rating,precision:.1,readOnly:!0}),s.isPurchased&&e.jsxs(t,{sx:{display:"flex",alignItems:"center",color:"success.main",typography:"caption"},children:[e.jsx(p,{icon:"solar:verified-check-bold",width:16,sx:{mr:.5}}),"Verified purchase"]}),e.jsx(d,{variant:"body2",children:s.comment}),!!((i=s.attachments)!=null&&i.length)&&e.jsx(t,{sx:{pt:1,gap:1,display:"flex",flexWrap:"wrap"},children:s.attachments.map(l=>e.jsx(t,{component:"img",alt:l,src:l,sx:{width:64,height:64,borderRadius:1.5}},l))}),e.jsxs(t,{sx:{gap:2,pt:1.5,display:"flex"},children:[e.jsxs(L,{disableRipple:!0,sx:{gap:.5,typography:"caption"},children:[e.jsx(p,{icon:"solar:like-outline",width:16}),"123"]}),e.jsxs(L,{disableRipple:!0,sx:{gap:.5,typography:"caption"},children:[e.jsx(p,{icon:"solar:dislike-outline",width:16}),"34"]})]})]})};return e.jsxs(t,{sx:{mt:5,gap:2,display:"flex",px:{xs:2.5,md:0},flexDirection:{xs:"column",md:"row"}},children:[r(),a()]})}function Be({reviews:s}){return e.jsxs(e.Fragment,{children:[s.map(r=>e.jsx(ze,{review:r},r.id)),e.jsx(ue,{count:10,sx:{mx:"auto",[`& .${he.ul}`]:{my:5,mx:"auto",justifyContent:"center"}}})]})}function _e({totalRatings:s,totalReviews:r,ratings:a=[],reviews:i=[]}){const l=ae(),n=ye(a,c=>c.starCount),x=()=>e.jsxs(h,{spacing:1,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(d,{variant:"subtitle2",children:"Average rating"}),e.jsxs(d,{variant:"h2",children:[s,"/5"]}),e.jsx(k,{readOnly:!0,value:s,precision:.1}),e.jsxs(d,{variant:"caption",sx:{color:"text.secondary"},children:["(",S(r)," reviews)"]})]}),j=()=>e.jsx(h,{spacing:1.5,sx:[c=>({py:5,px:{xs:3,md:5},borderLeft:{md:`dashed 1px ${c.vars.palette.divider}`},borderRight:{md:`dashed 1px ${c.vars.palette.divider}`}})],children:a.slice(0).reverse().map(c=>e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{variant:"subtitle2",component:"span",sx:{width:42},children:c.name}),e.jsx(ie,{color:"inherit",variant:"determinate",value:c.starCount/n*100,sx:{mx:2,flexGrow:1}}),e.jsx(d,{variant:"body2",component:"span",sx:{minWidth:48,color:"text.secondary"},children:S(c.reviewCount)})]},c.name))}),f=()=>e.jsx(h,{sx:{alignItems:"center",justifyContent:"center"},children:e.jsx(I,{size:"large",variant:"soft",color:"inherit",onClick:l.onTrue,startIcon:e.jsx(p,{icon:"solar:pen-bold"}),children:"Write your review"})});return e.jsxs(e.Fragment,{children:[e.jsxs(t,{sx:{display:"grid",py:{xs:5,md:0},gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(3, 1fr)"}},children:[x(),j(),f()]}),e.jsx(C,{sx:{borderStyle:"dashed"}}),e.jsx(Be,{reviews:i}),e.jsx(me,{open:l.value,onClose:l.onFalse})]})}function es({items:s,product:r,onAddToCart:a,disableActions:i,...l}){const n=le(),{id:x,name:j,sizes:f,price:c,colors:P,coverUrl:F,newLabel:b,available:m,priceSale:R,saleLabel:v,totalRatings:O,totalReviews:A,inventoryType:w,subDescription:N}=r,$=!!(s!=null&&s.length)&&s.map(o=>o.id).includes(x),q=!!(s!=null&&s.length)&&s.filter(o=>o.id===x).map(o=>o.quantity)[0]>=m,M={id:x,name:j,coverUrl:F,available:m,price:c,colors:P[0],size:f[4],quantity:m<1?0:1},D=je({defaultValues:M}),{watch:G,control:T,setValue:E,handleSubmit:V}=D,u=G(),Q=V(async o=>{console.info("DATA",JSON.stringify(o,null,2));try{$||a==null||a({...o,colors:[u.colors]}),n.push(ce.product.checkout)}catch(y){console.error(y)}}),U=B.useCallback(()=>{try{a==null||a({...u,colors:[u.colors],subtotal:u.price*u.quantity})}catch(o){console.error(o)}},[a,u]),H=()=>e.jsxs(t,{sx:{typography:"h5"},children:[R&&e.jsx(t,{component:"span",sx:{color:"text.disabled",textDecoration:"line-through",mr:.5},children:z(R)}),z(c)]}),J=()=>e.jsxs(t,{sx:{gap:3,display:"flex",justifyContent:"center",[`& .${pe.root}`]:{gap:1,alignItems:"center",display:"inline-flex",color:"text.secondary",typography:"subtitle2"}},children:[e.jsxs(g,{children:[e.jsx(p,{icon:"mingcute:add-line",width:16}),"Compare"]}),e.jsxs(g,{children:[e.jsx(p,{icon:"solar:heart-bold",width:16}),"Favorite"]}),e.jsxs(g,{children:[e.jsx(p,{icon:"solar:share-bold",width:16}),"Share"]})]}),K=()=>e.jsxs(t,{sx:{display:"flex"},children:[e.jsx(d,{variant:"subtitle2",sx:{flexGrow:1},children:"Color"}),e.jsx(fe,{name:"colors",control:T,render:({field:o})=>e.jsx(we,{options:P,value:o.value,onChange:y=>o.onChange(y),limit:4})})]}),X=()=>e.jsxs(t,{sx:{display:"flex"},children:[e.jsx(d,{variant:"subtitle2",sx:{flexGrow:1},children:"Size"}),e.jsx(ge.Select,{name:"size",size:"small",helperText:e.jsx(g,{underline:"always",color:"text.primary",children:"Size chart"}),sx:{maxWidth:88,[`& .${xe.root}`]:{mx:0,mt:1,textAlign:"right"}},children:f.map(o=>e.jsx(de,{value:o,children:o},o))})]}),Y=()=>e.jsxs(t,{sx:{display:"flex"},children:[e.jsx(d,{variant:"subtitle2",sx:{flexGrow:1},children:"Quantity"}),e.jsxs(h,{spacing:1,children:[e.jsx(ve,{hideDivider:!0,value:u.quantity,onChange:(o,y)=>E("quantity",y),max:m,sx:{maxWidth:112}}),e.jsxs(d,{variant:"caption",component:"div",sx:{textAlign:"right",color:"text.secondary"},children:["Available: ",m]})]})]}),Z=()=>e.jsxs(t,{sx:{gap:2,display:"flex"},children:[e.jsx(I,{fullWidth:!0,disabled:q||i,size:"large",color:"warning",variant:"contained",startIcon:e.jsx(p,{icon:"solar:cart-plus-bold",width:24}),onClick:U,sx:{whiteSpace:"nowrap"},children:"Add to cart"}),e.jsx(I,{fullWidth:!0,size:"large",type:"submit",variant:"contained",disabled:i,children:"Buy now"})]}),_=()=>e.jsx(d,{variant:"body2",sx:{color:"text.secondary"},children:N}),ee=()=>e.jsxs(t,{sx:{display:"flex",typography:"body2",alignItems:"center",color:"text.disabled"},children:[e.jsx(k,{size:"small",value:O,precision:.1,readOnly:!0,sx:{mr:1}}),`(${S(A)} reviews)`]}),se=()=>(b.enabled||v.enabled)&&e.jsxs(t,{sx:{gap:1,display:"flex",alignItems:"center"},children:[b.enabled&&e.jsx(W,{color:"info",children:b.content}),v.enabled&&e.jsx(W,{color:"error",children:v.content})]}),re=()=>e.jsx(t,{component:"span",sx:{typography:"overline",color:w==="out of stock"&&"error.main"||w==="low stock"&&"warning.main"||"success.main"},children:w});return e.jsx(be,{methods:D,onSubmit:Q,children:e.jsxs(h,{spacing:3,sx:{pt:3},...l,children:[e.jsxs(h,{spacing:2,alignItems:"flex-start",children:[se(),re(),e.jsx(d,{variant:"h5",children:j}),ee(),H(),_()]}),e.jsx(C,{sx:{borderStyle:"dashed"}}),K(),X(),Y(),e.jsx(C,{sx:{borderStyle:"dashed"}}),Z(),J()]})})}function ss({images:s}){var l;const r=Le({thumbs:{slidesToShow:"auto"}}),a=(s==null?void 0:s.map(n=>({src:n})))||[],i=Ie(a);return B.useEffect(()=>{var n;i.open&&((n=r.mainApi)==null||n.scrollTo(i.selected,!0))},[r.mainApi,i.open,i.selected]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs(t,{sx:{mb:2.5,position:"relative"},children:[e.jsx(ke,{...r.arrows,options:r.options,totalSlides:r.dots.dotCount,selectedIndex:r.dots.selectedIndex+1,sx:{right:16,bottom:16,position:"absolute"}}),e.jsx(Pe,{carousel:r,sx:{borderRadius:2},children:a.map(n=>e.jsx(Ce,{alt:n.src,src:n.src,ratio:"1/1",onClick:()=>i.onOpen(n.src),sx:{cursor:"zoom-in",minWidth:320}},n.src))})]}),e.jsx(Re,{ref:r.thumbs.thumbsRef,options:(l=r.options)==null?void 0:l.thumbs,slotProps:{disableMask:!0},sx:{width:360},children:a.map((n,x)=>e.jsx(De,{index:x,src:n.src,selected:x===r.thumbs.selectedIndex,onClick:()=>r.thumbs.onClickThumb(x)},n.src))})]}),e.jsx(Se,{index:i.selected,slides:a,open:i.open,close:i.onClose,onGetCurrentIndex:n=>i.setSelected(n)})]})}function rs({description:s,sx:r}){return e.jsx(We,{children:s,sx:[()=>({p:3,"& p, li, ol, table":{typography:"body2"},"& table":{mt:2,maxWidth:640,"& td":{px:2},"& td:first-of-type":{color:"text.secondary"},"tbody tr:nth-of-type(odd)":{bgcolor:"transparent"}}}),...Array.isArray(r)?r:[r]]})}export{ss as P,es as a,rs as b,_e as c};
