import{cq as $,g as d,j as e,B as n,A as B,cv as V,dP as ae,M as v,I as a,dQ as X,ct as Z,cu as F,D as O,dr as q,b5 as N,Y as re,dZ as H,O as C,b8 as te,cS as ie,T as G,Z as T,bD as le,cy as ce,ex as de,eV as xe,R as he,eR as pe,dX as me,aX as ue,x as je,eS as ge}from"./index-usks_mw-.js";import{a as Q}from"./format-number-1JRP8vfz.js";import{C as ve}from"./confirm-dialog-B1UOEBJl.js";import{D as Y}from"./DialogTitle-B2IaybZq.js";import{D as J}from"./DialogActions-tMlZhSgp.js";import{S as W}from"./Stack-CgODRvvD.js";import{C as L}from"./Checkbox-CXJQ1e9t.js";import{U as ye}from"./upload-D-BZQNpO.js";import"./preview-single-file-BDCIPO5I.js";import{D as Ce}from"./DialogContent-hfRIofTz.js";import{A as be}from"./AvatarGroup-DG664fc4.js";function K({person:s}){const o=$(),[r,l]=d.useState(s.permission),x=d.useCallback(c=>{l(c)},[]),m=()=>e.jsx(X,{open:o.open,anchorEl:o.anchorEl,onClose:o.onClose,children:e.jsxs(Z,{children:[e.jsxs(F,{selected:r==="view",onClick:()=>{o.onClose(),x("view")},children:[e.jsx(a,{icon:"solar:eye-bold"}),"Can view"]}),e.jsxs(F,{selected:r==="edit",onClick:()=>{o.onClose(),x("edit")},children:[e.jsx(a,{icon:"solar:pen-bold"}),"Can edit"]}),e.jsx(O,{sx:{borderStyle:"dashed"}}),e.jsxs(F,{onClick:()=>o.onClose(),sx:{color:"error.main"},children:[e.jsx(a,{icon:"solar:trash-bin-trash-bold"}),"Remove"]})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(n,{component:"li",sx:{display:"flex",alignItems:"center",py:1},children:[e.jsx(B,{alt:s.name,src:s.avatarUrl,sx:{mr:2}}),e.jsx(V,{primary:s.name,secondary:e.jsx(ae,{title:s.email,children:e.jsx("span",{children:s.email})}),sx:{flexGrow:1,pr:1},slotProps:{primary:{noWrap:!0},secondary:{noWrap:!0}}}),e.jsxs(v,{size:"small",color:"inherit",endIcon:e.jsx(a,{width:16,icon:o.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:-.5}}),onClick:o.onOpen,sx:[c=>({flexShrink:0,fontSize:c.typography.pxToRem(12),...o.open&&{bgcolor:"action.selected"}})],children:["Can ",r]})]}),m()]})}function _({open:s,shared:o,onClose:r,onCopyLink:l,inviteEmail:x,onChangeInvite:m,...c}){const u=o&&!!o.length;return e.jsxs(q,{fullWidth:!0,maxWidth:"xs",open:s,onClose:r,...c,children:[e.jsx(Y,{children:" Invite "}),e.jsx(n,{sx:{px:3},children:m&&e.jsx(N,{fullWidth:!0,value:x,placeholder:"Email",onChange:m,slotProps:{input:{endAdornment:e.jsx(re,{position:"end",children:e.jsx(v,{color:"inherit",variant:"contained",disabled:!x,sx:{mr:-.75},children:"Send Invite"})})}},sx:{mb:2}})}),u&&e.jsx(H,{sx:{height:60*5,px:3},children:e.jsx(n,{component:"ul",children:o.map(i=>e.jsx(K,{person:i},i.id))})}),e.jsxs(J,{sx:{justifyContent:"space-between"},children:[l&&e.jsx(v,{startIcon:e.jsx(a,{icon:"eva:link-2-fill"}),onClick:l,children:"Copy link"}),r&&e.jsx(v,{variant:"outlined",color:"inherit",onClick:r,children:"Close"})]})]})}function we({file:s,open:o,onClose:r,onDelete:l,favorited:x,onFavorite:m,onCopyLink:c,...u}){const i=C(),p=C(!0),g=C(!0),[b,h]=d.useState(""),[D,y]=d.useState(s==null?void 0:s.tags.slice(0,3)),I=(s==null?void 0:s.shared)&&!!(s!=null&&s.shared.length),k=d.useCallback(t=>{h(t.target.value)},[]),f=d.useCallback(t=>{y(t)},[]),E=()=>e.jsxs(n,{sx:{p:2.5,display:"flex",alignItems:"center"},children:[e.jsx(G,{variant:"h6",sx:{flexGrow:1},children:"Info"}),e.jsx(L,{color:"warning",icon:e.jsx(a,{icon:"eva:star-outline"}),checkedIcon:e.jsx(a,{icon:"eva:star-fill"}),checked:x,onChange:m,slotProps:{input:{id:`favorite-${s.id}-checkbox`,"aria-label":`Favorite ${s.id} checkbox`}}})]}),P=()=>e.jsxs(W,{spacing:1.5,children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",typography:"subtitle2",justifyContent:"space-between"},children:["Properties",e.jsx(T,{size:"small",onClick:g.onToggle,children:e.jsx(a,{icon:g.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),g.value&&e.jsxs(e.Fragment,{children:[e.jsxs(n,{sx:{display:"flex",typography:"caption",textTransform:"capitalize"},children:[e.jsx(n,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Size"}),Q(s==null?void 0:s.size)]}),e.jsxs(n,{sx:{display:"flex",typography:"caption",textTransform:"capitalize"},children:[e.jsx(n,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Modified"}),de(s==null?void 0:s.modifiedAt)]}),e.jsxs(n,{sx:{display:"flex",typography:"caption",textTransform:"capitalize"},children:[e.jsx(n,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Type"}),xe(s==null?void 0:s.type)]})]})]}),S=()=>e.jsxs(W,{spacing:1.5,children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",typography:"subtitle2",justifyContent:"space-between"},children:["Tags",e.jsx(T,{size:"small",onClick:p.onToggle,children:e.jsx(a,{icon:p.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),p.value&&e.jsx(le,{multiple:!0,freeSolo:!0,options:s==null?void 0:s.tags.map(t=>t),getOptionLabel:t=>t,defaultValue:s==null?void 0:s.tags.slice(0,3),value:D,onChange:(t,j)=>{f(j)},renderOption:(t,j)=>d.createElement("li",{...t,key:j},j),renderTags:(t,j)=>t.map((A,M)=>d.createElement(ce,{...j({index:M}),size:"small",variant:"soft",label:A,key:A})),renderInput:t=>e.jsx(N,{...t,placeholder:"#Add a tags"})})]}),z=()=>{var t;return e.jsxs(e.Fragment,{children:[e.jsxs(n,{sx:{p:2.5,display:"flex",alignItems:"center",typography:"subtitle2",justifyContent:"space-between"},children:["Share with",e.jsx(T,{size:"small",color:"primary",onClick:i.onTrue,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(a,{width:16,icon:"mingcute:add-line"})})]}),I&&e.jsx(n,{component:"ul",sx:{pl:2,pr:1},children:(t=s==null?void 0:s.shared)==null?void 0:t.map(j=>e.jsx(K,{person:j},j.id))})]})};return e.jsxs(e.Fragment,{children:[e.jsxs(te,{open:o,onClose:r,anchor:"right",slotProps:{backdrop:{invisible:!0},paper:{sx:{width:320}}},...u,children:[e.jsxs(H,{children:[E(),e.jsxs(W,{spacing:2.5,sx:{p:2.5,justifyContent:"center",bgcolor:"background.neutral"},children:[e.jsx(ie,{imageView:!0,file:(s==null?void 0:s.type)==="folder"?s==null?void 0:s.type:s==null?void 0:s.url,sx:{width:"auto",height:"auto",alignSelf:"flex-start"},slotProps:{img:{sx:{width:320,height:"auto",aspectRatio:"4/3",objectFit:"cover"}},icon:{sx:{width:64,height:64}}}}),e.jsx(G,{variant:"subtitle1",sx:{wordBreak:"break-all"},children:s==null?void 0:s.name}),e.jsx(O,{sx:{borderStyle:"dashed"}}),S(),P()]}),z()]}),e.jsx(n,{sx:{p:2.5},children:e.jsx(v,{fullWidth:!0,variant:"soft",color:"error",size:"large",startIcon:e.jsx(a,{icon:"solar:trash-bin-trash-bold"}),onClick:l,children:"Delete"})})]}),e.jsx(_,{open:i.value,shared:s==null?void 0:s.shared,inviteEmail:b,onChangeInvite:k,onCopyLink:c,onClose:()=>{i.onFalse(),h("")}})]})}function Re({sx:s,link:o,title:r,onOpen:l,subtitle:x,collapse:m,onCollapse:c,...u}){return e.jsxs(n,{sx:[{mb:3,display:"flex",alignItems:"center"},...Array.isArray(s)?s:[s]],...u,children:[e.jsxs(n,{sx:{flex:"1 1 auto"},children:[e.jsxs(n,{sx:{gap:1,display:"flex",typography:"h6",alignItems:"center"},children:[r,e.jsx(T,{size:"small",color:"primary",onClick:l,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(a,{width:16,icon:"mingcute:add-line"})})]}),x&&e.jsx(n,{sx:{typography:"body2",color:"text.disabled",mt:.5},children:x})]}),o&&e.jsx(v,{href:o,component:he,size:"small",color:"inherit",endIcon:e.jsx(a,{icon:"eva:arrow-ios-forward-fill",width:18,sx:{ml:-.5}}),children:"View all"}),c&&e.jsx(T,{onClick:c,children:e.jsx(a,{icon:m?"eva:arrow-ios-downward-fill":"eva:arrow-ios-upward-fill"})})]})}function ke({open:s,onClose:o,onCreate:r,onUpdate:l,folderName:x,onChangeFolderName:m,title:c="Upload files",...u}){const[i,p]=d.useState([]);d.useEffect(()=>{s||p([])},[s]);const g=d.useCallback(y=>{p([...i,...y])},[i]),b=()=>{o(),console.info("ON UPLOAD")},h=y=>{const I=i.filter(k=>k!==y);p(I)},D=()=>{p([])};return e.jsxs(q,{fullWidth:!0,maxWidth:"sm",open:s,onClose:o,...u,children:[e.jsx(Y,{sx:[y=>({p:y.spacing(3,3,2,3)})],children:c}),e.jsxs(Ce,{dividers:!0,sx:{pt:1,pb:0,border:"none"},children:[(r||l)&&e.jsx(N,{fullWidth:!0,label:"Folder name",value:x,onChange:m,sx:{mb:3}}),e.jsx(ye,{multiple:!0,value:i,onDrop:g,onRemove:h})]}),e.jsxs(J,{children:[e.jsx(v,{variant:"contained",startIcon:e.jsx(a,{icon:"eva:cloud-upload-fill"}),onClick:b,children:"Upload"}),!!i.length&&e.jsx(v,{variant:"outlined",color:"inherit",onClick:D,children:"Remove all"}),(r||l)&&e.jsx(n,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"},children:e.jsx(v,{variant:"soft",onClick:r||l,children:l?"Save":"Create"})})]})]})}function We({sx:s,folder:o,selected:r,onSelect:l,onDelete:x,...m}){var U;const c=C(),u=C(),i=C(),p=C(),g=C(),b=C(o.isFavorited),h=$(),{copy:D}=pe(),[y,I]=d.useState(""),[k,f]=d.useState(o.name),E=d.useCallback(w=>{I(w.target.value)},[]),P=d.useCallback(w=>{f(w.target.value)},[]),S=d.useCallback(()=>{me.success("Copied!"),D(o.url)},[D,o.url]),z=()=>e.jsxs(n,{sx:{top:8,right:8,display:"flex",position:"absolute",alignItems:"center"},children:[e.jsx(L,{color:"warning",icon:e.jsx(a,{icon:"eva:star-outline"}),checkedIcon:e.jsx(a,{icon:"eva:star-fill"}),checked:b.value,onChange:b.onToggle,slotProps:{input:{id:`favorite-${o.id}-checkbox`,"aria-label":`Favorite ${o.id} checkbox`}}}),e.jsx(T,{color:h.open?"inherit":"default",onClick:h.onOpen,children:e.jsx(a,{icon:"eva:more-vertical-fill"})})]}),t=()=>e.jsx(n,{onMouseEnter:g.onTrue,onMouseLeave:g.onFalse,sx:{width:36,height:36},children:(g.value||r)&&l?e.jsx(L,{checked:r,onClick:l,icon:e.jsx(a,{icon:"eva:radio-button-off-fill"}),checkedIcon:e.jsx(a,{icon:"solar:check-circle-bold"}),sx:{width:1,height:1}}):e.jsx(n,{component:"img",src:`${je.assetsDir}/assets/icons/files/ic-folder.svg`,sx:{width:1,height:1}})}),j=()=>e.jsx(V,{onClick:i.onTrue,primary:o.name,secondary:e.jsxs(e.Fragment,{children:[Q(o.size),e.jsx(n,{component:"span",sx:{mx:.75,width:2,height:2,borderRadius:"50%",bgcolor:"currentColor"}}),o.totalFiles," files"]}),slotProps:{primary:{noWrap:!0,sx:{typography:"subtitle1"}},secondary:{sx:{mt:.5,alignItems:"center",typography:"caption",color:"text.disabled",display:"inline-flex"}}}}),A=()=>{var w;return e.jsx(be,{max:3,sx:{[`& .${ge.avatar}`]:{width:24,height:24,"&:first-of-type":{fontSize:12}}},children:(w=o.shared)==null?void 0:w.map(R=>e.jsx(B,{alt:R.name,src:R.avatarUrl},R.id))})},M=()=>e.jsx(X,{open:h.open,anchorEl:h.anchorEl,onClose:h.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(Z,{children:[e.jsxs(F,{onClick:()=>{h.onClose(),S()},children:[e.jsx(a,{icon:"eva:link-2-fill"}),"Copy Link"]}),e.jsxs(F,{onClick:()=>{h.onClose(),c.onTrue()},children:[e.jsx(a,{icon:"solar:share-bold"}),"Share"]}),e.jsxs(F,{onClick:()=>{h.onClose(),p.onTrue()},children:[e.jsx(a,{icon:"solar:pen-bold"}),"Edit"]}),e.jsx(O,{sx:{borderStyle:"dashed"}}),e.jsxs(F,{onClick:()=>{u.onTrue(),h.onClose()},sx:{color:"error.main"},children:[e.jsx(a,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),ee=()=>e.jsx(we,{file:o,favorited:b.value,onFavorite:b.onToggle,onCopyLink:S,open:i.value,onClose:i.onFalse,onDelete:()=>{i.onFalse(),x()}}),se=()=>e.jsx(_,{open:c.value,shared:o.shared,inviteEmail:y,onChangeInvite:E,onCopyLink:S,onClose:()=>{c.onFalse(),I("")}}),oe=()=>e.jsx(ke,{open:p.value,onClose:p.onFalse,title:"Edit Folder",onUpdate:()=>{p.onFalse(),f(k),console.info("UPDATE FOLDER",k)},folderName:k,onChangeFolderName:P}),ne=()=>e.jsx(ve,{open:u.value,onClose:u.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(v,{variant:"contained",color:"error",onClick:x,children:"Delete"})});return e.jsxs(e.Fragment,{children:[e.jsxs(ue,{variant:"outlined",sx:[w=>({gap:1,p:2.5,display:"flex",borderRadius:2,cursor:"pointer",position:"relative",bgcolor:"transparent",flexDirection:"column",alignItems:"flex-start",...(g.value||r)&&{bgcolor:"background.paper",boxShadow:w.vars.customShadows.z20}}),...Array.isArray(s)?s:[s]],...m,children:[t(),z(),j(),!!((U=o==null?void 0:o.shared)!=null&&U.length)&&A()]}),se(),oe(),ee(),M(),ne()]})}export{we as F,_ as a,Re as b,We as c,ke as d};
