import{j as e,dp as y,B as t,M as n}from"./index-D6bpUwKX.js";import{s as b,z as s}from"./zod-B5GKHG6E.js";import{u as g}from"./styles-D8b8rnOK.js";import{F as i,i as f}from"./fields-B53gUzDf.js";import"./preview-single-file-DAd3oWJu.js";import"./code-highlight-block-YQG8K_vY.js";import{s as m}from"./schema-helper-CN5fZ2XK.js";import{F as j}from"./form-provider-BQ6XSOiV.js";import{D as C}from"./DialogTitle-6_KxcEEQ.js";import{D as T}from"./DialogContent-Byx-1axF.js";import{S as N}from"./Stack-7h-e6yAT.js";import{D as S}from"./DialogActions-CNc7tTfu.js";const D=s.object({city:s.string().min(1,{message:"City is required!"}),state:s.string().min(1,{message:"State is required!"}),name:s.string().min(1,{message:"Name is required!"}),address:s.string().min(1,{message:"Address is required!"}),zipCode:s.string().min(1,{message:"Zip code is required!"}),phoneNumber:m.phoneNumber({isValid:f}),country:m.nullableInput(s.string().min(1,{message:"Country is required!"}),{message:"Country is required!"}),primary:s.boolean(),addressType:s.string()});function V({open:l,onClose:a,onCreate:d}){const p={name:"",city:"",state:"",address:"",zipCode:"",country:"",primary:!0,phoneNumber:"",addressType:"Home"},o=g({mode:"all",resolver:b(D),defaultValues:p}),{handleSubmit:u,formState:{isSubmitting:c}}=o,x=u(async r=>{try{d({name:r.name,phoneNumber:r.phoneNumber,fullAddress:`${r.address}, ${r.city}, ${r.state}, ${r.country}, ${r.zipCode}`,addressType:r.addressType,primary:r.primary}),a()}catch(h){console.error(h)}});return e.jsx(y,{fullWidth:!0,maxWidth:"sm",open:l,onClose:a,children:e.jsxs(j,{methods:o,onSubmit:x,children:[e.jsx(C,{children:"New address"}),e.jsx(T,{dividers:!0,children:e.jsxs(N,{spacing:3,children:[e.jsx(i.RadioGroup,{row:!0,name:"addressType",options:[{label:"Home",value:"Home"},{label:"Office",value:"Office"}]}),e.jsxs(t,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[e.jsx(i.Text,{name:"name",label:"Full name"}),e.jsx(i.Phone,{name:"phoneNumber",label:"Phone number",country:"US"})]}),e.jsx(i.Text,{name:"address",label:"Address"}),e.jsxs(t,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"}},children:[e.jsx(i.Text,{name:"city",label:"Town/city"}),e.jsx(i.Text,{name:"state",label:"State"}),e.jsx(i.Text,{name:"zipCode",label:"Zip/code"})]}),e.jsx(i.CountrySelect,{name:"country",label:"Country",placeholder:"Choose a country"}),e.jsx(i.Checkbox,{name:"primary",label:"Use this address as default."})]})}),e.jsxs(S,{children:[e.jsx(n,{color:"inherit",variant:"outlined",onClick:a,children:"Cancel"}),e.jsx(n,{type:"submit",variant:"contained",loading:c,children:"Deliver to this address"})]})]})})}export{V as A};
