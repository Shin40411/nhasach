import{j as e,B as r,D as y,T as v,Z as h,I as i,V as L,dx as C,cq as k,fT as P,g as j,z as A,A as D,M as f,E as m,cl as O,R as g,dN as u,dO as R,co as S,cp as G,dG as B,eh as E,fU as F,W as T,cD as M,fV as N,cC as _,L as z,fW as U,x as W}from"./index-D6bpUwKX.js";import{u as H}from"./use-params-3mYV1zXJ.js";import"./empty-content-DB3Nbb7N.js";import"./filters-result-mlfDo3YB.js";import"./tour-new-edit-form-C4TpZyFT.js";import{I}from"./image-FIum-Rwa.js";import{M as V}from"./markdown-D0BtPAT8.js";import{u as $,L as q}from"./use-light-box-CWKTePzW.js";import{C as Z}from"./Checkbox-D-eTL2vR.js";import{P as J}from"./Pagination-BdKAEoFn.js";import"./zod-B5GKHG6E.js";import"./styles-D8b8rnOK.js";import"./fields-B53gUzDf.js";import"./Rating-BR8dol5T.js";import"./editor-DYEwp_Gv.js";import"./code-highlight-block-YQG8K_vY.js";import"./Stack-7h-e6yAT.js";import"./FormGroup-yYGkv0rT.js";import"./FormControlLabel-BXvztm9I.js";import"./index-DWKsHr_b.js";import"./index-Chjiymov.js";import"./upload-Ch5UFSCV.js";import"./index-DGt-RZrN.js";import"./preview-single-file-DAd3oWJu.js";import"./format-number-Cj8l_lI8.js";import"./DatePicker-BUn93AuB.js";import"./DialogActions-CNc7tTfu.js";import"./DialogContent-Byx-1axF.js";import"./dialogTitleClasses-Bbkpp0St.js";import"./schema-helper-CN5fZ2XK.js";import"./form-provider-BQ6XSOiV.js";import"./html-to-markdown-DfHH5kA-.js";import"./LastPage-Cv1LM9EA.js";function K({tour:s}){const n=(s==null?void 0:s.images.map(a=>({src:a})))||[],{selected:d,open:o,onOpen:l,onClose:p}=$(n),c=()=>e.jsxs(e.Fragment,{children:[e.jsxs(r,{sx:{gap:1,display:"grid",mb:{xs:3,md:5},gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"}},children:[e.jsx(I,{alt:n[0].src,src:n[0].src,ratio:"1/1",onClick:()=>l(n[0].src),sx:[a=>({borderRadius:2,cursor:"pointer",transition:a.transitions.create("opacity"),"&:hover":{opacity:.8}})]}),e.jsx(r,{sx:{gap:1,display:"grid",gridTemplateColumns:"repeat(2, 1fr)"},children:n.slice(1,5).map(a=>e.jsx(I,{alt:a.src,src:a.src,ratio:"1/1",onClick:()=>l(a.src),sx:[w=>({borderRadius:2,cursor:"pointer",transition:w.transitions.create("opacity"),"&:hover":{opacity:.8}})]},a.src))})]}),e.jsx(q,{index:d,slides:n,open:o,close:p})]}),t=()=>e.jsxs(e.Fragment,{children:[e.jsxs(r,{sx:{mb:3,display:"flex"},children:[e.jsx(v,{variant:"h4",sx:{flexGrow:1},children:s==null?void 0:s.name}),e.jsx(h,{children:e.jsx(i,{icon:"solar:share-bold"})}),e.jsx(Z,{defaultChecked:!0,color:"error",icon:e.jsx(i,{icon:"solar:heart-outline"}),checkedIcon:e.jsx(i,{icon:"solar:heart-bold"}),slotProps:{input:{id:"favorite-checkbox","aria-label":"Favorite checkbox"}}})]}),e.jsxs(r,{sx:{gap:3,display:"flex",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs(r,{sx:{gap:.5,display:"flex",alignItems:"center",typography:"body2"},children:[e.jsx(i,{icon:"eva:star-fill",sx:{color:"warning.main"}}),e.jsx(r,{component:"span",sx:{typography:"subtitle2"},children:s==null?void 0:s.ratingNumber}),e.jsx(L,{sx:{color:"text.secondary"},children:"(234 reviews)"})]}),e.jsxs(r,{sx:{gap:.5,display:"flex",alignItems:"center",typography:"body2"},children:[e.jsx(i,{icon:"mingcute:location-fill",sx:{color:"error.main"}}),s==null?void 0:s.destination]}),e.jsxs(r,{sx:{gap:.5,display:"flex",alignItems:"center",typography:"subtitle2"},children:[e.jsx(i,{icon:"solar:flag-bold",sx:{color:"info.main"}}),e.jsx(r,{component:"span",sx:{typography:"body2",color:"text.secondary"},children:"Guide by"}),s==null?void 0:s.tourGuides.map(a=>a.name).join(", ")]})]})]}),x=()=>e.jsx(r,{sx:{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"}},children:[{label:"Available",value:`${C(s==null?void 0:s.available.startDate)} - ${C(s==null?void 0:s.available.endDate)}`,icon:e.jsx(i,{icon:"solar:calendar-date-bold"})},{label:"Contact name",value:s==null?void 0:s.tourGuides.map(a=>a.phoneNumber).join(", "),icon:e.jsx(i,{icon:"solar:user-rounded-bold"})},{label:"Durations",value:s==null?void 0:s.durations,icon:e.jsx(i,{icon:"solar:clock-circle-bold"})},{label:"Contact phone",value:s==null?void 0:s.tourGuides.map(a=>a.name).join(", "),icon:e.jsx(i,{icon:"solar:phone-bold"})}].map(a=>e.jsxs(r,{sx:{gap:1.5,display:"flex"},children:[a.icon,e.jsx(k,{primary:a.label,secondary:a.value,slotProps:{primary:{sx:{typography:"body2",color:"text.secondary"}},secondary:{sx:{mt:.5,color:"text.primary",typography:"subtitle2"}}}})]},a.label))}),b=()=>e.jsxs(e.Fragment,{children:[e.jsx(V,{children:s==null?void 0:s.content}),e.jsxs(r,{children:[e.jsx(v,{variant:"h6",sx:{mb:2},children:"Services"}),e.jsx(r,{sx:{rowGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"}},children:P.map(a=>e.jsxs(r,{sx:{gap:1,display:"flex",alignItems:"center",...(s==null?void 0:s.services.includes(a.label))&&{color:"text.disabled"}},children:[e.jsx(i,{icon:"eva:checkmark-circle-2-outline",sx:{color:"primary.main",...(s==null?void 0:s.services.includes(a.label))&&{color:"text.disabled"}}}),a.label]},a.label))})]})]});return e.jsxs(e.Fragment,{children:[c(),e.jsxs(r,{sx:{mx:"auto",maxWidth:720},children:[t(),e.jsx(y,{sx:{borderStyle:"dashed",my:5}}),x(),e.jsx(y,{sx:{borderStyle:"dashed",mt:5,mb:2}}),b()]})]})}function Q({bookers:s,sx:n,...d}){const[o,l]=j.useState([]),p=j.useCallback(c=>{const t=o.includes(c)?o.filter(x=>x!==c):[...o,c];l(t)},[o]);return e.jsxs(e.Fragment,{children:[e.jsx(r,{sx:[{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"}},...Array.isArray(n)?n:[n]],...d,children:s==null?void 0:s.map(c=>e.jsx(X,{booker:c,selected:o.includes(c.id),onSelected:()=>p(c.id)},c.id))}),e.jsx(J,{count:10,sx:{mt:{xs:5,md:8},mx:"auto"}})]})}function X({booker:s,selected:n,onSelected:d}){const o=()=>e.jsxs(r,{sx:{mt:2,gap:1,display:"flex"},children:[e.jsx(h,{size:"small",color:"error",sx:[l=>({borderRadius:1,bgcolor:m(l.vars.palette.error.mainChannel,.08),"&:hover":{bgcolor:m(l.vars.palette.error.mainChannel,.16)}})],children:e.jsx(i,{width:18,icon:"solar:phone-bold"})}),e.jsx(h,{size:"small",color:"info",sx:[l=>({borderRadius:1,bgcolor:m(l.vars.palette.info.mainChannel,.08),"&:hover":{bgcolor:m(l.vars.palette.info.mainChannel,.16)}})],children:e.jsx(i,{width:18,icon:"solar:chat-round-dots-bold"})}),e.jsx(h,{size:"small",color:"primary",sx:[l=>({borderRadius:1,bgcolor:m(l.vars.palette.primary.mainChannel,.08),"&:hover":{bgcolor:m(l.vars.palette.primary.mainChannel,.16)}})],children:e.jsx(i,{width:18,icon:"solar:letter-bold"})})]});return e.jsxs(A,{sx:{p:3,gap:2,display:"flex"},children:[e.jsx(D,{alt:s.name,src:s.avatarUrl,sx:{width:48,height:48}}),e.jsxs(r,{sx:{minWidth:0,flex:"1 1 auto"},children:[e.jsx(k,{primary:s.name,secondary:e.jsxs(r,{sx:{gap:.5,display:"flex",alignItems:"center"},children:[e.jsx(i,{icon:"solar:users-group-rounded-bold",width:16}),s.guests," guests"]}),slotProps:{primary:{noWrap:!0},secondary:{sx:{mt:.5,typography:"caption",color:"text.disabled"}}}}),o()]}),e.jsx(f,{size:"small",variant:n?"text":"outlined",color:n?"success":"inherit",startIcon:n?e.jsx(i,{width:18,icon:"eva:checkmark-fill",sx:{mr:-.75}}):null,onClick:d,children:n?"Approved":"Approve"})]},s.id)}function Y({sx:s,publish:n,backHref:d,editHref:o,liveHref:l,publishOptions:p,onChangePublish:c,...t}){const x=O(),b=()=>e.jsx(R,{open:x.open,anchorEl:x.anchorEl,onClose:x.onClose,slotProps:{arrow:{placement:"top-right"}},children:e.jsx(S,{children:p.map(a=>e.jsxs(G,{selected:a.value===n,onClick:()=>{x.onClose(),c(a.value)},children:[a.value==="published"&&e.jsx(i,{icon:"eva:cloud-upload-fill"}),a.value==="draft"&&e.jsx(i,{icon:"solar:file-text-bold"}),a.label]},a.value))})});return e.jsxs(e.Fragment,{children:[e.jsxs(r,{sx:[{mb:2,gap:1.5,display:"flex"},...Array.isArray(s)?s:[s]],...t,children:[e.jsx(f,{component:g,href:d,startIcon:e.jsx(i,{icon:"eva:arrow-ios-back-fill",width:16}),children:"Back"}),e.jsx(r,{sx:{flexGrow:1}}),n==="published"&&e.jsx(u,{title:"Go Live",children:e.jsx(h,{component:g,href:l,children:e.jsx(i,{icon:"eva:external-link-fill"})})}),e.jsx(u,{title:"Edit",children:e.jsx(h,{component:g,href:o,children:e.jsx(i,{icon:"solar:pen-bold"})})}),e.jsx(f,{color:"inherit",variant:"contained",loading:!n,loadingIndicator:"Loadingâ€¦",endIcon:e.jsx(i,{icon:"eva:arrow-ios-downward-fill"}),onClick:x.onOpen,sx:{textTransform:"capitalize"},children:n})]}),b()]})}function ee({tour:s}){const[n,d]=j.useState(s==null?void 0:s.publish),o=B("content"),l=j.useCallback(t=>{d(t)},[]),p=()=>e.jsx(Y,{backHref:T.dashboard.tour.root,editHref:T.dashboard.tour.edit(`${s==null?void 0:s.id}`),liveHref:"#",publish:n||"",onChangePublish:l,publishOptions:F}),c=()=>e.jsx(M,{value:o.value,onChange:o.onChange,sx:{mb:{xs:3,md:5}},children:N.map(t=>e.jsx(_,{iconPosition:"end",value:t.value,label:t.label,icon:t.value==="bookers"?e.jsx(z,{variant:"filled",children:s==null?void 0:s.bookers.length}):""},t.value))});return e.jsxs(E,{children:[p(),c(),o.value==="content"&&e.jsx(K,{tour:s}),o.value==="bookers"&&e.jsx(Q,{bookers:s==null?void 0:s.bookers})]})}const se={title:`Tour details | Dashboard - ${W.appName}`};function Be(){const{id:s=""}=H(),n=U.find(d=>d.id===s);return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:se.title}),e.jsx(ee,{tour:n})]})}export{Be as default};
