import{j as s,G as d,B as o,H as V,g as D,T as C,D as W,F as I,I as k,N as A,bB as _,y as K,x as O,dI as Q,C as w,R as U,dJ as H,o as $,t as J,cI as X,E as Y,cH as Z,dK as ss}from"./index-BPi-lj99.js";import{u as es}from"./use-params-317g6tk1.js";import{E as ts}from"./empty-content-9ilj_6E5.js";import{u as ns}from"./use-checkout-context-vEAmdVM8.js";import{S as h}from"./Skeleton-CCIywKNc.js";import{S as v}from"./Stack-qxGgU9sa.js";import{u as is}from"./styles-BkVqaM-o.js";import{c as as,f as rs}from"./format-number-bPxp5Hz3.js";import"./code-highlight-block-CqLMdGe8.js";import{N as os}from"./number-input-BUMyzRNq.js";import"./preview-single-file-CNraPjvt.js";import{F as ls}from"./form-provider-BxIa1T6o.js";import{R as hs}from"./Rating-Bkwu4u_e.js";import{I as cs}from"./image-31DAP9Wr.js";import{u as xs,L as ds}from"./use-light-box-pc4W2oJf.js";import{e as ms,C as gs,f as js,g as us}from"./carousel-arrow-buttons-BQ6IV_Fs.js";import{u as bs}from"./use-carousel-UPmtqu_d.js";import{M as fs}from"./markdown-BKz7NLwC.js";import{C as ps}from"./cart-icon-U-s58mag.js";import"./html-to-markdown-BekkAF-z.js";function ys({...e}){return s.jsxs(d,{container:!0,spacing:8,...e,children:[s.jsx(d,{size:{xs:12,md:6,lg:7},children:s.jsx(h,{sx:{pt:"100%"}})}),s.jsx(d,{size:{xs:12,md:6,lg:5},children:s.jsxs(v,{spacing:3,children:[s.jsx(h,{sx:{height:16,width:48}}),s.jsx(h,{sx:{height:16,width:80}}),s.jsx(h,{sx:{height:16,width:.5}}),s.jsx(h,{sx:{height:16,width:.75}}),s.jsx(h,{sx:{height:120}})]})}),s.jsx(d,{size:12,children:s.jsx(o,{sx:{display:"flex",alignItems:"center"},children:Array.from({length:3},(t,a)=>s.jsxs(o,{sx:{gap:2,width:1,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},children:[s.jsx(h,{variant:"circular",sx:{width:80,height:80}}),s.jsx(h,{sx:{height:16,width:160}}),s.jsx(h,{sx:{height:16,width:80}})]},a))})})]})}function Cs({items:e,product:t,onAddToCart:a,disableActions:i,coverUrl:c,...n}){V();const{id:l,title:m,subject:g,author:b,grade:p,price:y}=t,j=100;e!=null&&e.length&&e.map(x=>x.id).includes(l);const f=!!(e!=null&&e.length)&&e.filter(x=>x.id===l).map(x=>x.quantity)[0]>=j,S=is({defaultValues:{id:l,title:m,subject:g,author:b,grade:p,price:y,quantity:1}}),{watch:T,control:Ss,setValue:z,handleSubmit:Ds}=S,r=T(),B=`Khám phá kho tàng tri thức và cảm hứng bất tận qua từng trang sách.
  Mỗi cuốn sách là một cánh cửa mở ra thế giới mới — từ kiến thức chuyên môn, kỹ năng sống đến những câu chuyện đầy cảm xúc. 
  Dù là hành trình tìm kiếm tri thức, thư giãn tinh thần hay mở rộng góc nhìn, sách luôn là người bạn đồng hành đáng tin cậy. 
  Một lựa chọn phù hợp sẽ mang đến trải nghiệm đáng giá cho mọi lứa tuổi và sở thích.`,L=()=>s.jsx(C,{variant:"body2",sx:{color:"text.secondary",textAlign:"justify"},children:B}),N=()=>s.jsxs(o,{sx:{display:"flex",typography:"body2",alignItems:"center",color:"text.disabled"},children:[s.jsx(hs,{size:"small",value:5,precision:.1,readOnly:!0,sx:{mr:1}}),`(Đánh giá ${as(5)} sao)`]}),R=()=>s.jsx(o,{sx:{gap:3,display:"flex",justifyContent:"center",[`& .${_.root}`]:{gap:1,alignItems:"center",display:"inline-flex",color:"text.secondary",typography:"subtitle2"}},children:s.jsxs(A,{children:[s.jsx(k,{icon:"solar:share-bold",width:16}),"Chia sẻ"]})}),P=()=>s.jsxs(o,{sx:{display:"flex"},children:[s.jsx(C,{variant:"subtitle2",sx:{flexGrow:1},children:"Số lượng"}),s.jsx(v,{spacing:1,children:s.jsx(os,{hideDivider:!0,value:r.quantity,min:1,onChange:(x,M)=>z("quantity",M),max:j,sx:{maxWidth:112}})})]}),E=D.useCallback(()=>{try{a==null||a({...r,subtotal:Number(r.price)*r.quantity,price:Number(r.price),name:r.title,size:r.subject,coverUrl:c||"",colors:[r.grade],available:j}),console.log(r.grade)}catch(x){console.error(x)}},[a,r]),F=()=>s.jsxs(o,{sx:{gap:2,display:"flex"},children:[s.jsx(I,{fullWidth:!0,disabled:f||i,size:"large",color:"warning",variant:"contained",onClick:E,startIcon:s.jsx(k,{icon:"solar:cart-plus-bold",width:24}),sx:{whiteSpace:"nowrap"},children:"Thêm vào giỏ"}),s.jsx(I,{fullWidth:!0,size:"large",variant:"contained",color:"primary",sx:{backgroundColor:"#1976d2",color:"#fff",textTransform:"none",fontSize:"16px",padding:"10px 20px",borderRadius:"8px","&:hover":{backgroundColor:"#1565c0"}},onClick:()=>window.location.href="tel:0942580848",startIcon:s.jsx(k,{icon:"solar:phone-bold"}),children:"Liên hệ"})]}),q=()=>s.jsxs(s.Fragment,{children:[s.jsxs(o,{sx:{typography:"h5"},children:["Tác giả: ",b]}),s.jsxs(o,{sx:{typography:"h5",color:"#ff6c6b"},children:["Giá: ",rs(y)]})]}),G=()=>s.jsx(C,{variant:"body2",fontWeight:"bold",color:"textDisabled",children:"Số điện thoại: 0942580848"});return s.jsx(ls,{methods:S,children:s.jsxs(v,{spacing:3,sx:{pt:3},...n,children:[s.jsxs(v,{spacing:2,alignItems:"flex-start",children:[s.jsx(C,{variant:"h5",children:m}),N(),q(),G(),L()]}),P(),s.jsx(W,{sx:{borderStyle:"dashed"}}),F(),R()]})})}function ks({images:e}){var c;const t=bs({thumbs:{slidesToShow:"auto"}}),a=(e==null?void 0:e.map(n=>({src:n})))||[],i=xs(a);return D.useEffect(()=>{var n;i.open&&((n=t.mainApi)==null||n.scrollTo(i.selected,!0))},[t.mainApi,i.open,i.selected]),s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs(o,{sx:{mb:2.5,position:"relative"},children:[s.jsx(ms,{...t.arrows,options:t.options,totalSlides:t.dots.dotCount,selectedIndex:t.dots.selectedIndex+1,sx:{right:16,bottom:16,position:"absolute"}}),s.jsx(gs,{carousel:t,sx:{borderRadius:2},children:a.map(n=>s.jsx(cs,{alt:n.src,src:n.src,ratio:"1/1",onClick:()=>i.onOpen(n.src),sx:{cursor:"zoom-in",minWidth:320}},n.src))})]}),s.jsx(js,{ref:t.thumbs.thumbsRef,options:(c=t.options)==null?void 0:c.thumbs,slotProps:{disableMask:!0},sx:{width:360},children:a.map((n,l)=>s.jsx(us,{index:l,src:n.src,selected:l===t.thumbs.selectedIndex,onClick:()=>t.thumbs.onClickThumb(l)},n.src))})]}),s.jsx(ds,{index:i.selected,slides:a,open:i.open,close:i.onClose,onGetCurrentIndex:n=>i.setSelected(n)})]})}function vs({description:e,sx:t}){return s.jsx(fs,{children:e,sx:[()=>({p:3,"& p, li, ol, table":{typography:"body2"},"& table":{mt:2,maxWidth:640,"& td":{px:2},"& td:first-of-type":{color:"text.secondary"},"tbody tr:nth-of-type(odd)":{bgcolor:"transparent"}}}),...Array.isArray(t)?t:[t]]})}function ws({product:e,error:t,loading:a}){const{state:i,onAddToCart:c}=ns(),n={mt:5,mb:10},l=`
  <table>
    <tbody>
      <tr>
        <td>Tác giả</td>
        <td>${e==null?void 0:e.author}</td>
      </tr>
      <tr>
        <td>Thuộc lớp</td>
        <td>${e==null?void 0:e.grade}</td>
      </tr>
      <tr>
        <td>Bộ môn</td>
        <td>${e==null?void 0:e.subject}</td>
      </tr>
    </tbody>
  </table>
  `;let m="",g="";e!=null&&e.grade.includes("Lớp ",0)?(m=e==null?void 0:e.grade,g=e==null?void 0:e.grade.replace("Lớp ","").split(", ").join("")):(m=`Lớp ${e==null?void 0:e.grade}`,g=((e==null?void 0:e.grade)||"").split(", ").join(""));let b="";e!=null&&e.subject&&(b=K(e==null?void 0:e.subject));let p="";e!=null&&e.subject&&(p=O(e.title.replace(".","")));const y=`${m}/thumbnail_stk${g}_${b}${g}_${p}.png`,j=[`${$.assetsDir}/assets/Thumbnail/${y}`],f=Q("description");return a?s.jsx(w,{sx:n,children:s.jsx(ys,{})}):t?s.jsx(w,{sx:n,children:s.jsx(ts,{filled:!0,title:"Không tìm thấy sản phẩm!",action:s.jsx(I,{component:U,href:"/",startIcon:s.jsx(k,{width:16,icon:"eva:arrow-ios-back-fill"}),sx:{mt:3},children:"Về trang chủ"}),sx:{py:10}})}):s.jsxs(w,{sx:n,children:[s.jsx(ps,{totalItems:i.totalItems}),s.jsx(H,{links:[{name:"Trang chủ",href:"/"},{name:"Danh mục",href:"/danh-muc"},{name:e==null?void 0:e.title}],sx:{mb:5}}),s.jsxs(d,{container:!0,spacing:{xs:3,md:5,lg:8},children:[s.jsx(d,{size:{xs:12,md:6,lg:7},children:s.jsx(ks,{images:j})}),s.jsx(d,{size:{xs:12,md:6,lg:5},children:e&&s.jsx(Cs,{product:e,items:i.items,onAddToCart:c,coverUrl:j[0]})})]}),s.jsx(o,{sx:{gap:5,my:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(3, 1fr)"}}}),s.jsxs(J,{children:[s.jsx(X,{value:f.value,onChange:f.onChange,sx:[u=>({px:3,boxShadow:`inset 0 -2px 0 0 ${Y(u.vars.palette.grey["500Channel"],.08)}`})],children:[{value:"description",label:"Mô tả"}].map(u=>s.jsx(Z,{value:u.value,label:u.label},u.value))}),f.value==="description"&&s.jsx(vs,{description:l})]})]})}const Is={title:`Chi tiết - ${$.appName}`};function Us(){const{name:e="",idBook:t=""}=es(),{book:a,bookLoading:i,bookError:c}=ss(t);return s.jsxs(s.Fragment,{children:[s.jsx("title",{children:Is.title}),s.jsx(ws,{product:a,loading:i,error:c})]})}export{Us as default};
