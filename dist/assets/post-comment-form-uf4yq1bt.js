import{g as u,bP as Ce,c7 as _e,ci as De,fe as Qe,j as e,fH as be,fI as Ye,a_ as Ee,aZ as ke,aM as Fe,aN as Je,f4 as Xe,aO as V,aP as ie,l as W,dc as et,bk as ae,aR as Re,aV as re,cY as tt,d6 as ot,dP as st,fJ as it,bM as nt,B,C as Ae,T as Y,A as at,cv as rt,dz as lt,dx as ct,I,E as ge,dr as pt,F as J,D as de,dZ as dt,H as mt,K as pe,dX as ut,O as ft,t as he,bI as ye,aQ as je,dY as Se,cy as ve,cz as we,V as ne}from"./index-BPi-lj99.js";import{s as Le,z as $}from"./zod-B_WTTuJ9.js";import{u as Me}from"./styles-BkVqaM-o.js";import{F as O}from"./fields-C_OA-jBI.js";import"./preview-single-file-CNraPjvt.js";import"./code-highlight-block-CqLMdGe8.js";import{s as Te}from"./schema-helper-zXJyfLbR.js";import{F as Oe}from"./form-provider-BxIa1T6o.js";import{M as xt}from"./markdown-BKz7NLwC.js";import{E as bt}from"./empty-content-9ilj_6E5.js";import{F as $e}from"./Fab-CnK4L7mS.js";import{D as gt}from"./DialogActions-D-kuG3ww.js";import{S as _}from"./Stack-qxGgU9sa.js";import{F as Pe}from"./FormControlLabel-CR_hDGs6.js";const ht={entering:{transform:"none"},entered:{transform:"none"}},yt=u.forwardRef(function(s,i){const l=Ce(),m={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{addEndListener:f,appear:y=!0,children:a,easing:g,in:x,onEnter:F,onEntered:P,onEntering:z,onExit:v,onExited:L,onExiting:b,style:C,timeout:j=m,TransitionComponent:R=_e,...D}=s,n=u.useRef(null),p=De(n,Qe(a),i),S=c=>h=>{if(c){const T=n.current;h===void 0?c(T):c(T,h)}},M=S(z),N=S((c,h)=>{Ye(c);const T=be({style:C,timeout:j,easing:g},{mode:"enter"});c.style.webkitTransition=l.transitions.create("transform",T),c.style.transition=l.transitions.create("transform",T),F&&F(c,h)}),q=S(P),G=S(b),Z=S(c=>{const h=be({style:C,timeout:j,easing:g},{mode:"exit"});c.style.webkitTransition=l.transitions.create("transform",h),c.style.transition=l.transitions.create("transform",h),v&&v(c)}),A=S(L),w=c=>{f&&f(n.current,c)};return e.jsx(R,{appear:y,in:x,nodeRef:n,onEnter:N,onEntered:q,onEntering:M,onExit:Z,onExited:A,onExiting:G,addEndListener:w,timeout:j,...D,children:(c,{ownerState:h,...T})=>u.cloneElement(a,{style:{transform:"scale(0)",visibility:c==="exited"&&!x?"hidden":void 0,...ht[c],...C,...a.props.style},ref:p,...T})})});function jt(t){return ke("MuiSpeedDial",t)}const ee=Ee("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),St=t=>{const{classes:s,open:i,direction:l}=t,m={root:["root",`direction${ae(l)}`],fab:["fab"],actions:["actions",!i&&"actionsClosed"]};return Re(m,jt,s)};function Q(t){if(t==="up"||t==="down")return"vertical";if(t==="right"||t==="left")return"horizontal"}const te=32,oe=16,vt=W("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:i}=t;return[s.root,s[`direction${ae(i.direction)}`]]}})(re(({theme:t})=>({zIndex:(t.vars||t).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none",variants:[{props:{direction:"up"},style:{flexDirection:"column-reverse",[`& .${ee.actions}`]:{flexDirection:"column-reverse",marginBottom:-32,paddingBottom:oe+te}}},{props:{direction:"down"},style:{flexDirection:"column",[`& .${ee.actions}`]:{flexDirection:"column",marginTop:-32,paddingTop:oe+te}}},{props:{direction:"left"},style:{flexDirection:"row-reverse",[`& .${ee.actions}`]:{flexDirection:"row-reverse",marginRight:-32,paddingRight:oe+te}}},{props:{direction:"right"},style:{flexDirection:"row",[`& .${ee.actions}`]:{flexDirection:"row",marginLeft:-32,paddingLeft:oe+te}}}]}))),wt=W($e,{name:"MuiSpeedDial",slot:"Fab",overridesResolver:(t,s)=>s.fab})({pointerEvents:"auto"}),Tt=W("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(t,s)=>{const{ownerState:i}=t;return[s.actions,!i.open&&s.actionsClosed]}})({display:"flex",pointerEvents:"auto",variants:[{props:({ownerState:t})=>!t.open,style:{transition:"top 0s linear 0.2s",pointerEvents:"none"}}]}),Pt=u.forwardRef(function(s,i){const l=Fe({props:s,name:"MuiSpeedDial"}),m=Ce(),f={enter:m.transitions.duration.enteringScreen,exit:m.transitions.duration.leavingScreen},{ariaLabel:y,FabProps:{ref:a,...g}={},children:x,className:F,direction:P="up",hidden:z=!1,icon:v,onBlur:L,onClose:b,onFocus:C,onKeyDown:j,onMouseEnter:R,onMouseLeave:D,onOpen:n,open:p,openIcon:S,slots:M={},slotProps:N={},TransitionComponent:q,TransitionProps:G,transitionDuration:Z=f,...A}=l,[w,c]=Je({controlled:p,default:!1,name:"SpeedDial",state:"open"}),h={...l,open:w,direction:P},T=St(h),U=Xe(),H=u.useRef(0),E=u.useRef(),k=u.useRef([]);k.current=[k.current[0]];const K=u.useCallback(o=>{k.current[0]=o},[]),Ie=De(a,K),ze=(o,r)=>d=>{k.current[o+1]=d,r&&r(d)},Ue=o=>{j&&j(o);const r=o.key.replace("Arrow","").toLowerCase(),{current:d=r}=E;if(o.key==="Escape"){c(!1),k.current[0].focus(),b&&b(o,"escapeKeyDown");return}if(Q(r)===Q(d)&&Q(r)!==void 0){o.preventDefault();const ce=r===d?1:-1,X=tt(H.current+ce,0,k.current.length-1);k.current[X].focus(),H.current=X,E.current=d}};u.useEffect(()=>{w||(H.current=0,E.current=void 0)},[w]);const me=o=>{o.type==="mouseleave"&&D&&D(o),o.type==="blur"&&L&&L(o),U.clear(),o.type==="blur"?U.start(0,()=>{c(!1),b&&b(o,"blur")}):(c(!1),b&&b(o,"mouseLeave"))},Be=o=>{g.onClick&&g.onClick(o),U.clear(),w?(c(!1),b&&b(o,"toggle")):(c(!0),n&&n(o,"toggle"))},ue=o=>{o.type==="mouseenter"&&R&&R(o),o.type==="focus"&&C&&C(o),U.clear(),w||U.start(0,()=>{c(!0),n&&n(o,{focus:"focus",mouseenter:"mouseEnter"}[o.type])})},le=y.replace(/^[^a-z]+|[^\w:.-]+/gi,""),fe=u.Children.toArray(x).filter(o=>u.isValidElement(o)),Ke=fe.map((o,r)=>{const{FabProps:{ref:d,...ce}={},tooltipPlacement:X}=o.props,Ze=X||(Q(P)==="vertical"?"left":"top");return u.cloneElement(o,{FabProps:{...ce,ref:ze(r,d)},delay:30*(w?r:fe.length-r),open:w,tooltipPlacement:Ze,id:`${le}-action-${r}`})}),Ne={transition:q,...M},He={transition:G,...N},xe={slots:Ne,slotProps:He},[Ve,We]=V("root",{elementType:vt,externalForwardedProps:{...xe,...A},ownerState:h,ref:i,className:ie(T.root,F),additionalProps:{role:"presentation"},getSlotProps:o=>({...o,onKeyDown:r=>{var d;(d=o.onKeyDown)==null||d.call(o,r),Ue(r)},onBlur:r=>{var d;(d=o.onBlur)==null||d.call(o,r),me(r)},onFocus:r=>{var d;(d=o.onFocus)==null||d.call(o,r),ue(r)},onMouseEnter:r=>{var d;(d=o.onMouseEnter)==null||d.call(o,r),ue(r)},onMouseLeave:r=>{var d;(d=o.onMouseLeave)==null||d.call(o,r),me(r)}})}),[qe,Ge]=V("transition",{elementType:yt,externalForwardedProps:xe,ownerState:h});return e.jsxs(Ve,{...We,children:[e.jsx(qe,{in:!z,timeout:Z,unmountOnExit:!0,...Ge,children:e.jsx(wt,{color:"primary","aria-label":y,"aria-haspopup":"true","aria-expanded":w,"aria-controls":`${le}-actions`,...g,onClick:Be,className:ie(T.fab,g.className),ref:Ie,ownerState:h,children:u.isValidElement(v)&&et(v,["SpeedDialIcon"])?u.cloneElement(v,{open:w}):v})}),e.jsx(Tt,{id:`${le}-actions`,role:"menu","aria-orientation":Q(P),className:ie(T.actions,!w&&T.actionsClosed),ownerState:h,children:Ke})]})});function Ct(t){return ke("MuiSpeedDialAction",t)}const se=Ee("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),Dt=t=>{const{open:s,tooltipPlacement:i,classes:l}=t,m={fab:["fab",!s&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${ae(i)}`,!s&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return Re(m,Ct,l)},Et=W($e,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(t,s)=>{const{ownerState:i}=t;return[s.fab,!i.open&&s.fabClosed]}})(re(({theme:t})=>({margin:8,color:(t.vars||t).palette.text.secondary,backgroundColor:(t.vars||t).palette.background.paper,"&:hover":{backgroundColor:t.vars?t.vars.palette.SpeedDialAction.fabHoverBg:it(t.palette.background.paper,.15)},transition:`${t.transitions.create("transform",{duration:t.transitions.duration.shorter})}, opacity 0.8s`,opacity:1,variants:[{props:({ownerState:s})=>!s.open,style:{opacity:0,transform:"scale(0)"}}]}))),kt=W("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(t,s)=>{const{ownerState:i}=t;return[s.staticTooltip,!i.open&&s.staticTooltipClosed,s[`tooltipPlacement${ae(i.tooltipPlacement)}`]]}})(re(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",[`& .${se.staticTooltipLabel}`]:{transition:t.transitions.create(["transform","opacity"],{duration:t.transitions.duration.shorter}),opacity:1},variants:[{props:({ownerState:s})=>!s.open,style:{[`& .${se.staticTooltipLabel}`]:{opacity:0,transform:"scale(0.5)"}}},{props:{tooltipPlacement:"left"},style:{[`& .${se.staticTooltipLabel}`]:{transformOrigin:"100% 50%",right:"100%",marginRight:8}}},{props:{tooltipPlacement:"right"},style:{[`& .${se.staticTooltipLabel}`]:{transformOrigin:"0% 50%",left:"100%",marginLeft:8}}}]}))),Ft=W("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel",overridesResolver:(t,s)=>s.staticTooltipLabel})(re(({theme:t})=>({position:"absolute",...t.typography.body1,backgroundColor:(t.vars||t).palette.background.paper,borderRadius:(t.vars||t).shape.borderRadius,boxShadow:(t.vars||t).shadows[1],color:(t.vars||t).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"}))),Rt=u.forwardRef(function(s,i){var H;const l=Fe({props:s,name:"MuiSpeedDialAction"}),{className:m,delay:f=0,FabProps:y={},icon:a,id:g,open:x,TooltipClasses:F,tooltipOpen:P=!1,tooltipPlacement:z="left",tooltipTitle:v,slots:L={},slotProps:b={},...C}=l,j={...l,tooltipPlacement:z},R=Dt(j),D={slots:L,slotProps:{fab:y,...b,tooltip:ot(typeof b.tooltip=="function"?b.tooltip(j):b.tooltip,{title:v,open:P,placement:z,classes:F})}},[n,p]=u.useState((H=D.slotProps.tooltip)==null?void 0:H.open),S=()=>{p(!1)},M=()=>{p(!0)},N={transitionDelay:`${f}ms`},[q,G]=V("fab",{elementType:Et,externalForwardedProps:D,ownerState:j,shouldForwardComponentProp:!0,className:ie(R.fab,m),additionalProps:{style:N,tabIndex:-1,role:"menuitem",size:"small"}}),[Z,A]=V("tooltip",{elementType:st,externalForwardedProps:D,shouldForwardComponentProp:!0,ref:i,additionalProps:{id:g},ownerState:j,getSlotProps:E=>({...E,onClose:k=>{var K;(K=E.onClose)==null||K.call(E,k),S()},onOpen:k=>{var K;(K=E.onOpen)==null||K.call(E,k),M()}})}),[w,c]=V("staticTooltip",{elementType:kt,externalForwardedProps:D,ownerState:j,ref:i,className:R.staticTooltip,additionalProps:{id:g}}),[h,T]=V("staticTooltipLabel",{elementType:Ft,externalForwardedProps:D,ownerState:j,className:R.staticTooltipLabel,additionalProps:{style:N,id:`${g}-label`}}),U=e.jsx(q,{...G,children:a});return A.open?e.jsxs(w,{...c,...C,children:[e.jsx(h,{...T,children:A.title}),u.cloneElement(U,{"aria-labelledby":`${g}-label`})]}):(!x&&n&&p(!1),e.jsx(Z,{...A,title:A.title,open:x&&n,placement:A.placement,classes:A.classes,...C,children:U}))});function At({sx:t,title:s,author:i,coverUrl:l,createdAt:m,...f}){const y=nt(a=>a.breakpoints.up("sm"));return e.jsx(B,{sx:[a=>({...a.mixins.bgGradient({images:[`linear-gradient(0deg, ${ge(a.vars.palette.grey["900Channel"],.64)}, ${ge(a.vars.palette.grey["900Channel"],.64)})`,`url(${l})`]}),height:480,overflow:"hidden"}),...Array.isArray(t)?t:[t]],...f,children:e.jsxs(Ae,{sx:{height:1,position:"relative"},children:[e.jsx(Y,{variant:"h3",component:"h1",sx:{zIndex:9,maxWidth:480,position:"absolute",pt:{xs:2,md:8},color:"common.white"},children:s}),e.jsxs(B,{sx:{left:0,width:1,bottom:0,position:"absolute"},children:[i&&m&&e.jsxs(B,{sx:{display:"flex",alignItems:"center",px:{xs:2,md:3},pb:{xs:3,md:8}},children:[e.jsx(at,{alt:i.name,src:i.avatarUrl,sx:{width:64,height:64,mr:2}}),e.jsx(rt,{sx:{color:"common.white"},primary:i.name,secondary:lt(m),slotProps:{primary:{sx:{typography:"subtitle1"}},secondary:{sx:{mt:.5,opacity:.64,color:"inherit"}}}})]}),e.jsx(Pt,{direction:y?"left":"up",ariaLabel:"Share post",icon:e.jsx(I,{icon:"solar:share-bold"}),FabProps:{size:"medium"},sx:{position:"absolute",bottom:{xs:32,md:64},right:{xs:16,md:24}},children:ct.map(a=>e.jsx(Rt,{icon:e.jsxs(e.Fragment,{children:[a.value==="twitter"&&e.jsx(I,{icon:"socials:twitter"}),a.value==="facebook"&&e.jsx(I,{icon:"socials:facebook"}),a.value==="instagram"&&e.jsx(I,{icon:"socials:instagram"}),a.value==="linkedin"&&e.jsx(I,{icon:"socials:linkedin"})]}),slotProps:{fab:{color:"default"},tooltip:{placement:"top",title:a.label}}},a.label))})]})]})})}function Lt({open:t,title:s,content:i,isValid:l,onClose:m,coverUrl:f,onSubmit:y,description:a,isSubmitting:g}){let x="";f&&(typeof f=="string"?x=f:x=URL.createObjectURL(f));const F=s||x,P=s||a||i||x;return e.jsxs(pt,{fullScreen:!0,open:t,onClose:m,children:[e.jsxs(gt,{sx:{py:2,px:3},children:[e.jsx(Y,{variant:"h6",sx:{flexGrow:1},children:"Preview"}),e.jsx(J,{variant:"outlined",color:"inherit",onClick:m,children:"Cancel"}),e.jsx(J,{type:"submit",variant:"contained",disabled:!l,loading:g,onClick:y,children:"Post"})]}),e.jsx(de,{}),P?e.jsxs(dt,{children:[(F||x)&&e.jsx(At,{title:s,coverUrl:x}),e.jsx(Ae,{sx:{mt:5,mb:10},children:e.jsxs(B,{sx:{mx:"auto",maxWidth:720},children:[e.jsx(Y,{variant:"h6",children:a}),e.jsx(xt,{children:i})]})})]}):e.jsx(bt,{filled:!0,title:"Empty content!"})]})}const Mt=$.object({title:$.string().min(1,{message:"Title is required!"}),description:$.string().min(1,{message:"Description is required!"}),content:Te.editor().min(100,{message:"Content must be at least 100 characters"}).max(500,{message:"Content must be less than 500 characters"}),coverUrl:Te.file({message:"Cover is required!"}),tags:$.string().array().min(2,{message:"Must have at least 2 items!"}),metaKeywords:$.string().array().min(1,{message:"Meta keywords is required!"}),metaTitle:$.string(),metaDescription:$.string()});function Qt({currentPost:t}){const s=mt(),i=pe(),l=pe(!0),m=pe(!0),f={title:"",description:"",content:"",coverUrl:null,tags:[],metaKeywords:[],metaTitle:"",metaDescription:""},y=Me({mode:"all",resolver:Le(Mt),defaultValues:f,values:t}),{reset:a,watch:g,setValue:x,handleSubmit:F,formState:{isSubmitting:P,isValid:z}}=y,v=g(),L=F(async n=>{try{await new Promise(p=>setTimeout(p,500)),a(),i.onFalse(),ut.success(t?"Update success!":"Create success!"),s.push(ft.dashboard.post.root),console.info("DATA",n)}catch(p){console.error(p)}}),b=u.useCallback(()=>{x("coverUrl",null)},[x]),C=(n,p)=>e.jsx(ne,{onClick:p,children:e.jsx(I,{icon:n?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill"})}),j=()=>e.jsxs(he,{children:[e.jsx(ye,{title:"Details",subheader:"Title, short description, image...",action:C(l.value,l.onToggle),sx:{mb:3}}),e.jsxs(je,{in:l.value,children:[e.jsx(de,{}),e.jsxs(_,{spacing:3,sx:{p:3},children:[e.jsx(O.Text,{name:"title",label:"Post title"}),e.jsx(O.Text,{name:"description",label:"Description",multiline:!0,rows:3}),e.jsxs(_,{spacing:1.5,children:[e.jsx(Y,{variant:"subtitle2",children:"Content"}),e.jsx(O.Editor,{name:"content",sx:{maxHeight:480}})]}),e.jsxs(_,{spacing:1.5,children:[e.jsx(Y,{variant:"subtitle2",children:"Cover"}),e.jsx(O.Upload,{name:"coverUrl",maxSize:3145728,onDelete:b})]})]})]})]}),R=()=>e.jsxs(he,{children:[e.jsx(ye,{title:"Properties",subheader:"Additional functions and attributes...",action:C(m.value,m.onToggle),sx:{mb:3}}),e.jsxs(je,{in:m.value,children:[e.jsx(de,{}),e.jsxs(_,{spacing:3,sx:{p:3},children:[e.jsx(O.Autocomplete,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,disableCloseOnSelect:!0,options:Se.map(n=>n),getOptionLabel:n=>n,renderOption:(n,p)=>u.createElement("li",{...n,key:p},p),renderTags:(n,p)=>n.map((S,M)=>u.createElement(ve,{...p({index:M}),key:S,label:S,size:"small",color:"info",variant:"soft"}))}),e.jsx(O.Text,{name:"metaTitle",label:"Meta title"}),e.jsx(O.Text,{name:"metaDescription",label:"Meta description",fullWidth:!0,multiline:!0,rows:3}),e.jsx(O.Autocomplete,{name:"metaKeywords",label:"Meta keywords",placeholder:"+ Keywords",multiple:!0,freeSolo:!0,disableCloseOnSelect:!0,options:Se.map(n=>n),getOptionLabel:n=>n,renderOption:(n,p)=>u.createElement("li",{...n,key:p},p),renderTags:(n,p)=>n.map((S,M)=>u.createElement(ve,{...p({index:M}),key:S,label:S,size:"small",color:"info",variant:"soft"}))}),e.jsx(Pe,{label:"Enable comments",control:e.jsx(we,{defaultChecked:!0,slotProps:{input:{id:"comments-switch"}}})})]})]})]}),D=()=>e.jsxs(B,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(Pe,{label:"Publish",control:e.jsx(we,{defaultChecked:!0,slotProps:{input:{id:"publish-switch"}}}),sx:{pl:3,flexGrow:1}}),e.jsxs("div",{children:[e.jsx(J,{color:"inherit",variant:"outlined",size:"large",onClick:i.onTrue,children:"Preview"}),e.jsx(J,{type:"submit",variant:"contained",size:"large",loading:P,sx:{ml:2},children:t?"Save changes":"Create post"})]})]});return e.jsxs(Oe,{methods:y,onSubmit:L,children:[e.jsxs(_,{spacing:5,sx:{mx:"auto",maxWidth:{xs:720,xl:880}},children:[j(),R(),D()]}),e.jsx(Lt,{isValid:z,onSubmit:L,title:v.title,open:i.value,content:v.content,onClose:i.onFalse,coverUrl:v.coverUrl,isSubmitting:P,description:v.description})]})}const Ot=$.object({comment:$.string().min(1,{message:"Comment is required!"})});function Yt(){const t={comment:""},s=Me({resolver:Le(Ot),defaultValues:t}),{reset:i,handleSubmit:l,formState:{isSubmitting:m}}=s,f=l(async y=>{try{await new Promise(a=>setTimeout(a,500)),i(),console.info("DATA",y)}catch(a){console.error(a)}});return e.jsx(Oe,{methods:s,onSubmit:f,children:e.jsxs(B,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[e.jsx(O.Text,{name:"comment",placeholder:"Write some of your comments...",multiline:!0,rows:4}),e.jsxs(B,{sx:{display:"flex",alignItems:"center"},children:[e.jsxs(B,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(ne,{children:e.jsx(I,{icon:"solar:gallery-add-bold"})}),e.jsx(ne,{children:e.jsx(I,{icon:"eva:attach-2-fill"})}),e.jsx(ne,{children:e.jsx(I,{icon:"eva:smiling-face-fill"})})]}),e.jsx(J,{type:"submit",variant:"contained",loading:m,children:"Post comment"})]})]})})}export{At as P,Yt as a,Qt as b};
