import{j as e,B as f,I as u,dT as B,E as $,T as ae,cq as M,O as U,A as oe,cv as R,V as ne,R as A,eE as L,dz as N,L as _,Z as y,dQ as G,ct as J,cu as C,D as K,M as E,g as b,cn as re,cC as ie,cB as ce,fc as de,e2 as pe,b5 as he,Y as me,cy as T,fh as xe,bP as ue,fm as je,dU as be,fj as ge,dX as O,eh as fe,dJ as ve,W as D,z as W,dZ as z,cI as Ce,cH as ye,fn as De,dP as w,fl as Se,x as ke}from"./index-usks_mw-.js";import{C as Z}from"./confirm-dialog-B1UOEBJl.js";import{u as Pe,g as Te,r as we,T as Ie,e as Fe,a as Ae,b as Re}from"./table-pagination-custom-BU_TZ0sY.js";import{T as Ee}from"./table-empty-rows-Ctwo0pqe.js";import{T as Be}from"./table-head-custom-rWvUIPuG.js";import{c as Le,d as q}from"./format-number-1JRP8vfz.js";import{T as Ne,a as Oe,b as We}from"./TableHead-DRTkY3AT.js";import{T as v}from"./TableCell-DewNvLwg.js";import{C as Q}from"./Checkbox-CXJQ1e9t.js";import{J as V}from"./DatePicker-bZIT4znD.js";import{F as ze,a as I,c as F}from"./filters-result-DAXTSwm_.js";import{S as Ve}from"./Stack-CgODRvvD.js";import{s as H}from"./sumBy-ofy1HSRF.js";import"./invoice-pdf-DHoy5B6C.js";import"./DialogTitle-B2IaybZq.js";import"./dialogTitleClasses-ArRuUPNv.js";import"./DialogContent-hfRIofTz.js";import"./DialogActions-tMlZhSgp.js";import"./empty-content-CMvi2U-9.js";import"./TablePagination-DILT_8ca.js";import"./LastPage-p2DRLW4r.js";import"./FormControlLabel-4BKoF0oU.js";import"./index-BZxbeKDV.js";import"./index-Chjiymov.js";import"./zod-RlOVw4MX.js";import"./styles-CfUPITlh.js";import"./code-highlight-block-BPaUgu3R.js";import"./preview-single-file-BDCIPO5I.js";import"./schema-helper-nSaw4j_a.js";import"./form-provider-BBryKxXX.js";import"./address-new-form-_g4bz3B1.js";import"./fields-C0p86-nh.js";import"./Rating-D7Aom_ED.js";import"./editor-Dgj6bP_R.js";import"./FormGroup-BcIuZYAH.js";import"./upload-D-BZQNpO.js";import"./index-D7BwrrXM.js";import"./image-CI7Up_jg.js";import"./address-list-dialog-D5ZLDsWw.js";function S({title:s,total:t,icon:d,color:n,percent:o,price:i}){return e.jsxs(f,{sx:{width:1,gap:2.5,minWidth:200,display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsxs(f,{sx:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center"},children:[e.jsx(u,{icon:d,width:32,sx:{color:n,position:"absolute"}}),e.jsx(B,{size:56,thickness:2,value:o,variant:"determinate",sx:{color:n,opacity:.48}}),e.jsx(B,{size:56,value:100,thickness:3,variant:"determinate",sx:[l=>({top:0,left:0,opacity:.48,position:"absolute",color:$(l.vars.palette.grey["500Channel"],.16)})]})]}),e.jsxs("div",{children:[e.jsx(ae,{variant:"subtitle1",children:s}),e.jsxs(f,{component:"span",sx:{my:.5,display:"block",typography:"body2",color:"text.disabled"},children:[Le(t)," invoices"]}),e.jsx(f,{component:"span",sx:{typography:"subtitle2"},children:q(i)})]})]})}function He({row:s,selected:t,editHref:d,onSelectRow:n,onDeleteRow:o,detailsHref:i}){const l=M(),j=U(),g=()=>e.jsx(G,{open:l.open,anchorEl:l.anchorEl,onClose:l.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(J,{children:[e.jsx("li",{children:e.jsxs(C,{component:A,href:i,onClick:l.onClose,children:[e.jsx(u,{icon:"solar:eye-bold"}),"View"]})}),e.jsx("li",{children:e.jsxs(C,{component:A,href:d,onClick:l.onClose,children:[e.jsx(u,{icon:"solar:pen-bold"}),"Edit"]})}),e.jsx(K,{sx:{borderStyle:"dashed"}}),e.jsxs(C,{onClick:()=>{j.onTrue(),l.onClose()},sx:{color:"error.main"},children:[e.jsx(u,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),p=()=>e.jsx(Z,{open:j.value,onClose:j.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(E,{variant:"contained",color:"error",onClick:o,children:"Delete"})});return e.jsxs(e.Fragment,{children:[e.jsxs(Ne,{hover:!0,selected:t,children:[e.jsx(v,{padding:"checkbox",children:e.jsx(Q,{checked:t,onClick:n,slotProps:{input:{id:`${s.id}-checkbox`,"aria-label":`${s.id} checkbox`}}})}),e.jsx(v,{children:e.jsxs(f,{sx:{gap:2,display:"flex",alignItems:"center"},children:[e.jsx(oe,{alt:s.invoiceTo.name,children:s.invoiceTo.name.charAt(0).toUpperCase()}),e.jsx(R,{primary:s.invoiceTo.name,secondary:e.jsx(ne,{component:A,href:i,color:"inherit",children:s.invoiceNumber}),slotProps:{primary:{noWrap:!0,sx:{typography:"body2"}},secondary:{sx:{color:"text.disabled","&:hover":{color:"text.secondary"}}}}})]})}),e.jsx(v,{children:e.jsx(R,{primary:N(s.createDate),secondary:L(s.createDate),slotProps:{primary:{noWrap:!0,sx:{typography:"body2"}},secondary:{sx:{mt:.5,typography:"caption"}}}})}),e.jsx(v,{children:e.jsx(R,{primary:N(s.dueDate),secondary:L(s.dueDate),slotProps:{primary:{noWrap:!0,sx:{typography:"body2"}},secondary:{sx:{mt:.5,typography:"caption"}}}})}),e.jsx(v,{children:q(s.totalAmount)}),e.jsx(v,{align:"center",children:s.sent}),e.jsx(v,{children:e.jsx(_,{variant:"soft",color:s.status==="paid"&&"success"||s.status==="pending"&&"warning"||s.status==="overdue"&&"error"||"default",children:s.status})}),e.jsx(v,{align:"right",sx:{px:1},children:e.jsx(y,{color:l.open?"inherit":"default",onClick:l.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})})]}),g(),p()]})}function $e({filters:s,options:t,dateError:d,onResetPage:n}){const o=M(),{state:i,setState:l}=s,j=b.useCallback(r=>{n(),l({name:r.target.value})},[n,l]),g=b.useCallback(r=>{const m=typeof r.target.value=="string"?r.target.value.split(","):r.target.value;n(),l({service:m})},[n,l]),p=b.useCallback(r=>{n(),l({startDate:r})},[n,l]),c=b.useCallback(r=>{n(),l({endDate:r})},[n,l]),h=()=>e.jsx(G,{open:o.open,anchorEl:o.anchorEl,onClose:o.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(J,{children:[e.jsxs(C,{onClick:()=>o.onClose(),children:[e.jsx(u,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(C,{onClick:()=>o.onClose(),children:[e.jsx(u,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(C,{onClick:()=>o.onClose(),children:[e.jsx(u,{icon:"solar:export-bold"}),"Export"]})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(f,{sx:{p:2.5,gap:2,display:"flex",pr:{xs:2.5,md:1},flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"}},children:[e.jsxs(re,{sx:{flexShrink:0,width:{xs:1,md:180}},children:[e.jsx(ie,{htmlFor:"filter-service-select",children:"Service"}),e.jsx(ce,{multiple:!0,value:i.service,onChange:g,input:e.jsx(de,{label:"Service"}),renderValue:r=>r.map(m=>m).join(", "),inputProps:{id:"filter-service-select"},sx:{textTransform:"capitalize"},children:t.services.map(r=>e.jsxs(C,{value:r,children:[e.jsx(Q,{disableRipple:!0,size:"small",checked:i.service.includes(r),slotProps:{input:{id:`${r}-checkbox`,"aria-label":`${r} checkbox`}}}),r]},r))})]}),e.jsx(V,{label:"Start date",value:i.endDate,onChange:p,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:180}}}),e.jsx(V,{label:"End date",value:i.endDate,onChange:c,slotProps:{textField:{fullWidth:!0,error:d,helperText:d?"End date must be later than start date":null}},sx:{maxWidth:{md:180},[`& .${pe.root}`]:{bottom:{md:-40},position:{md:"absolute"}}}}),e.jsxs(f,{sx:{gap:2,width:1,flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(he,{fullWidth:!0,value:i.name,onChange:j,placeholder:"Search customer or invoice number...",slotProps:{input:{startAdornment:e.jsx(me,{position:"start",children:e.jsx(u,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}}),e.jsx(y,{onClick:o.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})]})]}),h()]})}function Me({filters:s,totalResults:t,onResetPage:d,sx:n}){const{state:o,setState:i,resetState:l}=s,j=b.useCallback(()=>{d(),i({name:""})},[d,i]),g=b.useCallback(h=>{const r=o.service.filter(m=>m!==h);d(),i({service:r})},[d,i,o.service]),p=b.useCallback(()=>{d(),i({status:"all"})},[d,i]),c=b.useCallback(()=>{d(),i({startDate:null,endDate:null})},[d,i]);return e.jsxs(ze,{totalResults:t,onReset:()=>l(),sx:n,children:[e.jsx(I,{label:"Service:",isShow:!!o.service.length,children:o.service.map(h=>b.createElement(T,{...F,key:h,label:h,onDelete:()=>g(h)}))}),e.jsx(I,{label:"Status:",isShow:o.status!=="all",children:e.jsx(T,{...F,label:o.status,onDelete:p,sx:{textTransform:"capitalize"}})}),e.jsx(I,{label:"Date:",isShow:!!(o.startDate&&o.endDate),children:e.jsx(T,{...F,label:xe(o.startDate,o.endDate),onDelete:c})}),e.jsx(I,{label:"Keyword:",isShow:!!o.name,children:e.jsx(T,{...F,label:o.name,onDelete:j})})]})}const Ue=[{id:"invoiceNumber",label:"Customer"},{id:"createDate",label:"Create"},{id:"dueDate",label:"Due"},{id:"price",label:"Amount"},{id:"sent",label:"Sent",align:"center"},{id:"status",label:"Status"},{id:""}];function _e(){const s=ue(),t=Pe({defaultOrderBy:"createDate"}),d=U(),[n,o]=b.useState(je),i=be({name:"",service:[],status:"all",startDate:null,endDate:null}),{state:l,setState:j}=i,g=ge(l.startDate,l.endDate),p=Ge({inputData:n,comparator:Te(t.order,t.orderBy),filters:l,dateError:g}),c=we(p,t.page,t.rowsPerPage),h=!!l.name||l.service.length>0||l.status!=="all"||!!l.startDate&&!!l.endDate,r=!p.length&&h||!p.length,m=a=>n.filter(x=>x.status===a).length,k=a=>H(n.filter(x=>x.status===a),x=>x.totalAmount),P=a=>m(a)/n.length*100,X=[{value:"all",label:"All",color:"default",count:n.length},{value:"paid",label:"Paid",color:"success",count:m("paid")},{value:"pending",label:"Pending",color:"warning",count:m("pending")},{value:"overdue",label:"Overdue",color:"error",count:m("overdue")},{value:"draft",label:"Draft",color:"default",count:m("draft")}],Y=b.useCallback(a=>{const x=n.filter(le=>le.id!==a);O.success("Delete success!"),o(x),t.onUpdatePageDeleteRow(c.length)},[c.length,t,n]),ee=b.useCallback(()=>{const a=n.filter(x=>!t.selected.includes(x.id));O.success("Delete success!"),o(a),t.onUpdatePageDeleteRows(c.length,p.length)},[p.length,c.length,t,n]),te=b.useCallback((a,x)=>{t.onResetPage(),j({status:x})},[j,t]),se=()=>e.jsx(Z,{open:d.value,onClose:d.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:e.jsx(E,{variant:"contained",color:"error",onClick:()=>{ee(),d.onFalse()},children:"Delete"})});return e.jsxs(e.Fragment,{children:[e.jsxs(fe,{children:[e.jsx(ve,{heading:"List",links:[{name:"Dashboard",href:D.dashboard.root},{name:"Invoice",href:D.dashboard.invoice.root},{name:"List"}],action:e.jsx(E,{component:A,href:D.dashboard.invoice.new,variant:"contained",startIcon:e.jsx(u,{icon:"mingcute:add-line"}),children:"New invoice"}),sx:{mb:{xs:3,md:5}}}),e.jsx(W,{sx:{mb:{xs:3,md:5}},children:e.jsx(z,{sx:{minHeight:108},children:e.jsxs(Ve,{divider:e.jsx(K,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2,flexDirection:"row"},children:[e.jsx(S,{title:"Total",total:n.length,percent:100,price:H(n,a=>a.totalAmount),icon:"solar:bill-list-bold-duotone",color:s.vars.palette.info.main}),e.jsx(S,{title:"Paid",total:m("paid"),percent:P("paid"),price:k("paid"),icon:"solar:file-check-bold-duotone",color:s.vars.palette.success.main}),e.jsx(S,{title:"Pending",total:m("pending"),percent:P("pending"),price:k("pending"),icon:"solar:sort-by-time-bold-duotone",color:s.vars.palette.warning.main}),e.jsx(S,{title:"Overdue",total:m("overdue"),percent:P("overdue"),price:k("overdue"),icon:"solar:bell-bing-bold-duotone",color:s.vars.palette.error.main}),e.jsx(S,{title:"Draft",total:m("draft"),percent:P("draft"),price:k("draft"),icon:"solar:file-corrupted-bold-duotone",color:s.vars.palette.text.secondary})]})})}),e.jsxs(W,{children:[e.jsx(Ce,{value:l.status,onChange:te,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${$(s.vars.palette.grey["500Channel"],.08)}`},children:X.map(a=>e.jsx(ye,{value:a.value,label:a.label,iconPosition:"end",icon:e.jsx(_,{variant:(a.value==="all"||a.value===l.status)&&"filled"||"soft",color:a.color,children:a.count})},a.value))}),e.jsx($e,{filters:i,dateError:g,onResetPage:t.onResetPage,options:{services:De.map(a=>a.name)}}),h&&e.jsx(Me,{filters:i,onResetPage:t.onResetPage,totalResults:p.length,sx:{p:2.5,pt:0}}),e.jsxs(f,{sx:{position:"relative"},children:[e.jsx(Ie,{dense:t.dense,numSelected:t.selected.length,rowCount:p.length,onSelectAllRows:a=>{t.onSelectAllRows(a,p.map(x=>x.id))},action:e.jsxs(f,{sx:{display:"flex"},children:[e.jsx(w,{title:"Sent",children:e.jsx(y,{color:"primary",children:e.jsx(u,{icon:"custom:send-fill"})})}),e.jsx(w,{title:"Download",children:e.jsx(y,{color:"primary",children:e.jsx(u,{icon:"solar:download-bold"})})}),e.jsx(w,{title:"Print",children:e.jsx(y,{color:"primary",children:e.jsx(u,{icon:"solar:printer-minimalistic-bold"})})}),e.jsx(w,{title:"Delete",children:e.jsx(y,{color:"primary",onClick:d.onTrue,children:e.jsx(u,{icon:"solar:trash-bin-trash-bold"})})})]})}),e.jsx(z,{sx:{minHeight:444},children:e.jsxs(Oe,{size:t.dense?"small":"medium",sx:{minWidth:800},children:[e.jsx(Be,{order:t.order,orderBy:t.orderBy,headCells:Ue,rowCount:p.length,numSelected:t.selected.length,onSort:t.onSort,onSelectAllRows:a=>t.onSelectAllRows(a,p.map(x=>x.id))}),e.jsxs(We,{children:[p.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(a=>e.jsx(He,{row:a,selected:t.selected.includes(a.id),onSelectRow:()=>t.onSelectRow(a.id),onDeleteRow:()=>Y(a.id),editHref:D.dashboard.invoice.edit(a.id),detailsHref:D.dashboard.invoice.details(a.id)},a.id)),e.jsx(Ee,{height:t.dense?56:76,emptyRows:Fe(t.page,t.rowsPerPage,p.length)}),e.jsx(Ae,{notFound:r})]})]})})]}),e.jsx(Re,{page:t.page,dense:t.dense,count:p.length,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onChangeDense:t.onChangeDense,onRowsPerPageChange:t.onChangeRowsPerPage})]})]}),se()]})}function Ge({inputData:s,comparator:t,filters:d,dateError:n}){const{name:o,status:i,service:l,startDate:j,endDate:g}=d,p=s.map((c,h)=>[c,h]);return p.sort((c,h)=>{const r=t(c[0],h[0]);return r!==0?r:c[1]-h[1]}),s=p.map(c=>c[0]),o&&(s=s.filter(({invoiceNumber:c,invoiceTo:h})=>[c,h.name,h.company,h.phoneNumber].some(r=>r==null?void 0:r.toLowerCase().includes(o.toLowerCase())))),i!=="all"&&(s=s.filter(c=>c.status===i)),l.length&&(s=s.filter(c=>c.items.some(h=>l.includes(h.service)))),n||j&&g&&(s=s.filter(c=>Se(c.createDate,j,g))),s}const Je={title:`Invoice list | Dashboard - ${ke.appName}`};function Et(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:Je.title}),e.jsx(_e,{})]})}export{Et as default};
