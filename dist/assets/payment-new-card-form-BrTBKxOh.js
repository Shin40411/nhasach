import{O as D,j as o,B as C,b5 as w,Y as T,Z as b,I as j}from"./index-usks_mw-.js";import{F as k}from"./fields-C0p86-nh.js";import{C as g,b as x}from"./styles-CfUPITlh.js";import"./preview-single-file-BDCIPO5I.js";import"./code-highlight-block-BPaUgu3R.js";function M({sx:u,isRHF:y,cvvField:a,dateField:l,numberField:h,holderField:c,...V}){const p=y?k.Text:w,i=D();return o.jsxs(C,{sx:[()=>({gap:2.5,width:1,display:"flex",flexDirection:"column"}),...Array.isArray(u)?u:[u]],...V,children:[o.jsx(g,{name:(h==null?void 0:h.name)??"",control:x().control,rules:{required:"Vui lòng nhập số thẻ",validate:e=>e.replace(/\s/g,"").length===16||"Số thẻ phải có 16 chữ số"},render:({field:e,fieldState:r})=>{var n;return o.jsx(p,{...h,...e,label:"Số thẻ",placeholder:"xxxx xxxx xxxx xxxx",error:!!r.error,helperText:(n=r.error)==null?void 0:n.message,onChange:s=>{const m=s.target.value.replace(/\D/g,"").slice(0,16).replace(/(\d{4})(?=\d)/g,"$1 ");e.onChange(m)}})}}),o.jsx(g,{name:(c==null?void 0:c.name)??"",control:x().control,rules:{required:"Vui lòng nhập tên chủ thẻ",validate:e=>/^[A-Z\s']{2,}$/.test(e.trim())||"Tên không hợp lệ (chỉ A-Z, không dấu, ít nhất 2 ký tự)"},render:({field:e,fieldState:r})=>{var n;return o.jsx(p,{...c,...e,label:"Chủ thẻ",placeholder:"NGUYEN VAN A",error:!!r.error,helperText:(n=r.error)==null?void 0:n.message,slotProps:{inputLabel:{shrink:!0}},onChange:s=>{const d=s.target.value.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase();e.onChange(d)}})}}),o.jsxs(C,{sx:{gap:2,display:"flex"},children:[o.jsx(g,{name:(l==null?void 0:l.name)??"",control:x().control,rules:{required:"Vui lòng nhập ngày hết hạn",validate:e=>{const[r,n]=e.split("/");if(!r||!n||r.length!==2||n.length!==2)return"Định dạng không hợp lệ (MM/YY)";const s=parseInt(r,10);if(s<1||s>12)return"Tháng không hợp lệ";const t=new Date;return new Date(2e3+parseInt(n,10),s-1)>=new Date(t.getFullYear(),t.getMonth())||"Thẻ đã hết hạn"}},render:({field:e,fieldState:r})=>{var n;return o.jsx(p,{...l,...e,label:"Ngày hết hạn",placeholder:"MM/YY",error:!!r.error,helperText:(n=r.error)==null?void 0:n.message,onChange:s=>{let t=s.target.value.replace(/\D/g,"").slice(0,4);t.length>2&&(t=t.slice(0,2)+"/"+t.slice(2)),e.onChange(t)}})}}),o.jsx(g,{name:(a==null?void 0:a.name)??"",control:x().control,rules:{required:"Vui lòng nhập CVV",pattern:{value:/^\d{3,4}$/,message:"CVV phải gồm 3 hoặc 4 chữ số"}},render:({field:e,fieldState:r})=>{var n;return o.jsx(p,{...a,...e,label:"CVV/CVC",placeholder:"***",type:i.value?"text":"password",error:!!r.error,helperText:(n=r.error)==null?void 0:n.message,onChange:s=>{const t=s.target.value.replace(/\D/g,"").slice(0,4);e.onChange(t)},slotProps:{inputLabel:{shrink:!0},input:{endAdornment:o.jsx(T,{position:"end",children:o.jsx(b,{onClick:i.onToggle,edge:"end",children:o.jsx(j,{icon:i.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}})}})]}),o.jsxs(C,{sx:{gap:1,display:"flex",alignItems:"center",typography:"caption",color:"text.disabled"},children:[o.jsx(j,{icon:"solar:lock-password-outline"}),"Giao dịch của bạn được bảo mật bằng mã hóa SSL"]})]})}export{M as P};
