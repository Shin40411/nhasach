import{K as y,j as e,B as l,A as P,T as x,dz as w,b1 as I,F as j,I as o,cq as A,R as u,dP as v,V as g,dQ as F,ct as D,cu as E,g as p,eh as b,O as h,C as T,cy as $,eS as B,D as S,o as U}from"./index-BPi-lj99.js";import{u as L}from"./use-params-317g6tk1.js";import{b as W}from"./blog-C8Ul2V-j.js";import{P as G,a as O}from"./post-comment-form-uf4yq1bt.js";import{c as M}from"./format-number-bPxp5Hz3.js";import{b as H,c as z}from"./post-skeleton-5yLdVwkq.js";import{M as N}from"./markdown-BKz7NLwC.js";import{E as R}from"./empty-content-9ilj_6E5.js";import{P as V}from"./Pagination-p1dEkr85.js";import{S as _}from"./Stack-qxGgU9sa.js";import{F as q}from"./FormControlLabel-CR_hDGs6.js";import{C as K}from"./Checkbox-Cb0hcSDN.js";import{A as Q}from"./AvatarGroup-B6qpr1FO.js";import"./html-to-markdown-BekkAF-z.js";import"./index-Wm6Wo2AT.js";import"./zod-B_WTTuJ9.js";import"./styles-BkVqaM-o.js";import"./fields-C_OA-jBI.js";import"./Rating-Bkwu4u_e.js";import"./editor-BHaBjMrK.js";import"./code-highlight-block-CqLMdGe8.js";import"./FormGroup-CwCuTxF6.js";import"./index-BSK_tT2J.js";import"./index-Chjiymov.js";import"./upload-BlD-M9M6.js";import"./index-DpGkvVRP.js";import"./preview-single-file-CNraPjvt.js";import"./image-31DAP9Wr.js";import"./DatePicker-CUx5CUAj.js";import"./DialogActions-D-kuG3ww.js";import"./DialogContent-31eqGF97.js";import"./dialogTitleClasses-pRzgyf3x.js";import"./schema-helper-zXJyfLbR.js";import"./form-provider-BxIa1T6o.js";import"./Fab-CnK4L7mS.js";import"./Skeleton-CCIywKNc.js";import"./LastPage-ClWw7PMw.js";function C({name:r,avatarUrl:a,message:n,tagUser:t,postedAt:s,hasReply:d}){const i=y();return e.jsxs(l,{sx:{pt:3,gap:2,display:"flex",position:"relative",...d&&{pl:8}},children:[e.jsx(P,{alt:r,src:a,sx:{width:48,height:48}}),e.jsxs(l,{sx:[f=>({pb:3,display:"flex",flex:"1 1 auto",flexDirection:"column",borderBottom:`solid 1px ${f.vars.palette.divider}`})],children:[e.jsx(x,{variant:"subtitle2",sx:{mb:.5},children:r}),e.jsx(x,{variant:"caption",sx:{color:"text.disabled"},children:w(s)}),e.jsxs(x,{variant:"body2",sx:{mt:1},children:[t&&e.jsxs(l,{component:"strong",sx:{mr:.5},children:["@",t]}),n]}),i.value&&e.jsx(I,{fullWidth:!0,autoFocus:!0,placeholder:"Write comment...",sx:{mt:2}})]}),!d&&e.jsx(j,{size:"small",color:i.value?"primary":"inherit",startIcon:e.jsx(o,{icon:"solar:pen-bold",width:16}),onClick:i.onToggle,sx:{right:0,position:"absolute"},children:"Reply"})]})}function J({comments:r=[]}){return e.jsxs(e.Fragment,{children:[r.map(a=>{const n=!!a.replyComment.length;return e.jsxs(l,{children:[e.jsx(C,{name:a.name,message:a.message,postedAt:a.postedAt,avatarUrl:a.avatarUrl}),n&&a.replyComment.map(t=>{const s=a.users.find(d=>d.id===t.userId);return e.jsx(C,{name:(s==null?void 0:s.name)||"",message:t.message,postedAt:t.postedAt,avatarUrl:(s==null?void 0:s.avatarUrl)||"",tagUser:t.tagUser,hasReply:!0},t.id)})]},a.id)}),e.jsx(V,{count:8,sx:{display:"flex",justifyContent:"center",my:{xs:5,md:8}}})]})}function X({sx:r,publish:a,backHref:n,editHref:t,liveHref:s,publishOptions:d,onChangePublish:i,...f}){const m=A(),k=()=>e.jsx(F,{open:m.open,anchorEl:m.anchorEl,onClose:m.onClose,slotProps:{arrow:{placement:"top-right"}},children:e.jsx(D,{children:d.map(c=>e.jsxs(E,{selected:c.value===a,onClick:()=>{m.onClose(),i(c.value)},children:[c.value==="published"&&e.jsx(o,{icon:"eva:cloud-upload-fill"}),c.value==="draft"&&e.jsx(o,{icon:"solar:file-text-bold"}),c.label]},c.value))})});return e.jsxs(e.Fragment,{children:[e.jsxs(l,{sx:[{gap:1.5,display:"flex",mb:{xs:3,md:5}},...Array.isArray(r)?r:[r]],...f,children:[e.jsx(j,{component:u,href:n,startIcon:e.jsx(o,{icon:"eva:arrow-ios-back-fill",width:16}),children:"Back"}),e.jsx(l,{sx:{flexGrow:1}}),a==="published"&&e.jsx(v,{title:"Go Live",children:e.jsx(g,{component:u,href:s,children:e.jsx(o,{icon:"eva:external-link-fill"})})}),e.jsx(v,{title:"Edit",children:e.jsx(g,{component:u,href:t,children:e.jsx(o,{icon:"solar:pen-bold"})})}),e.jsx(j,{color:"inherit",variant:"contained",loading:!a,loadingIndicator:"Loadingâ€¦",endIcon:e.jsx(o,{icon:"eva:arrow-ios-downward-fill"}),onClick:m.onOpen,sx:{textTransform:"capitalize"},children:a})]}),k()]})}function Y({post:r,loading:a,error:n}){const[t,s]=p.useState(""),d=p.useCallback(i=>{s(i)},[]);return p.useEffect(()=>{r&&s(r==null?void 0:r.publish)},[r]),a?e.jsx(b,{maxWidth:!1,disablePadding:!0,children:e.jsx(H,{})}):n?e.jsx(b,{maxWidth:!1,children:e.jsx(R,{filled:!0,title:"Post not found!",action:e.jsx(j,{component:u,href:h.dashboard.post.root,startIcon:e.jsx(o,{width:16,icon:"eva:arrow-ios-back-fill"}),sx:{mt:3},children:"Back to list"}),sx:{py:10,height:"auto",flexGrow:"unset"}})}):e.jsxs(b,{maxWidth:!1,disablePadding:!0,children:[e.jsx(T,{maxWidth:!1,sx:{px:{sm:5}},children:e.jsx(X,{backHref:h.dashboard.post.root,editHref:h.dashboard.post.edit(`${r==null?void 0:r.title}`),liveHref:h.post.details(`${r==null?void 0:r.title}`),publish:`${t}`,onChangePublish:d,publishOptions:z})}),e.jsx(G,{title:`${r==null?void 0:r.title}`,coverUrl:`${r==null?void 0:r.coverUrl}`}),e.jsxs(l,{sx:{pb:5,mx:"auto",maxWidth:720,mt:{xs:5,md:10},px:{xs:2,sm:3}},children:[e.jsx(x,{variant:"subtitle1",children:r==null?void 0:r.description}),e.jsx(N,{children:r==null?void 0:r.content}),e.jsxs(_,{spacing:3,sx:[i=>({py:3,borderTop:`dashed 1px ${i.vars.palette.divider}`,borderBottom:`dashed 1px ${i.vars.palette.divider}`})],children:[e.jsx(l,{sx:{gap:1,display:"flex",flexWrap:"wrap"},children:r==null?void 0:r.tags.map(i=>e.jsx($,{label:i,variant:"soft"},i))}),e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(q,{label:M(r==null?void 0:r.totalFavorites),control:e.jsx(K,{defaultChecked:!0,size:"small",color:"error",icon:e.jsx(o,{icon:"solar:heart-bold"}),checkedIcon:e.jsx(o,{icon:"solar:heart-bold"}),slotProps:{input:{id:"favorite-checkbox","aria-label":"Favorite checkbox"}}}),sx:{mr:1}}),e.jsx(Q,{sx:{[`& .${B.avatar}`]:{width:32,height:32}},children:r==null?void 0:r.favoritePerson.map(i=>e.jsx(P,{alt:i.name,src:i.avatarUrl},i.name))})]})]}),e.jsxs(l,{sx:{mb:3,mt:5,display:"flex"},children:[e.jsx(x,{variant:"h4",children:"Comments"}),e.jsxs(x,{variant:"subtitle2",sx:{color:"text.disabled"},children:["(",r==null?void 0:r.comments.length,")"]})]}),e.jsx(O,{}),e.jsx(S,{sx:{mt:5,mb:2}}),e.jsx(J,{comments:(r==null?void 0:r.comments)??[]})]})]})}const Z={title:`Post details | Dashboard - ${U.appName}`};function We(){const{title:r=""}=L(),{post:a,postLoading:n,postError:t}=W(r);return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:Z.title}),e.jsx(Y,{post:a,loading:n,error:t})]})}export{We as default};
