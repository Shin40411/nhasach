import{g as u,bN as Pe,c2 as Qe,cd as De,fe as _e,j as e,fH as be,fI as Je,b2 as Ee,b1 as ke,aQ as Re,aR as Ye,f4 as Xe,aS as W,aT as ie,q as H,da as et,bk as ae,aV as Fe,aZ as re,cW as tt,d4 as ot,dN as st,fJ as it,bK as nt,B,C as Ae,T as J,A as at,cq as rt,dx as lt,dv as ct,I,E as ge,dp as pt,M as Y,D as de,dY as dt,N as mt,O as pe,dV as ut,W as ft,z as he,bI as ye,aU as je,dW as Se,ct as ve,cu as Te,Z as ne}from"./index-D6bpUwKX.js";import{s as Le,z as O}from"./zod-B5GKHG6E.js";import{u as Me}from"./styles-D8b8rnOK.js";import{F as $}from"./fields-B53gUzDf.js";import"./preview-single-file-DAd3oWJu.js";import"./code-highlight-block-YQG8K_vY.js";import{s as we}from"./schema-helper-CN5fZ2XK.js";import{F as $e}from"./form-provider-BQ6XSOiV.js";import{M as xt}from"./markdown-D0BtPAT8.js";import{E as bt}from"./empty-content-DB3Nbb7N.js";import{F as Oe}from"./Fab-CgBh_scu.js";import{D as gt}from"./DialogActions-CNc7tTfu.js";import{S as Q}from"./Stack-7h-e6yAT.js";import{F as Ce}from"./FormControlLabel-BXvztm9I.js";const ht={entering:{transform:"none"},entered:{transform:"none"}},yt=u.forwardRef(function(s,i){const l=Pe(),m={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{addEndListener:f,appear:y=!0,children:a,easing:g,in:x,onEnter:R,onEntered:C,onEntering:U,onExit:v,onExited:L,onExiting:b,style:P,timeout:j=m,TransitionComponent:F=Qe,...D}=s,n=u.useRef(null),p=De(n,_e(a),i),S=c=>h=>{if(c){const w=n.current;h===void 0?c(w):c(w,h)}},M=S(U),K=S((c,h)=>{Je(c);const w=be({style:P,timeout:j,easing:g},{mode:"enter"});c.style.webkitTransition=l.transitions.create("transform",w),c.style.transition=l.transitions.create("transform",w),R&&R(c,h)}),q=S(C),G=S(b),Z=S(c=>{const h=be({style:P,timeout:j,easing:g},{mode:"exit"});c.style.webkitTransition=l.transitions.create("transform",h),c.style.transition=l.transitions.create("transform",h),v&&v(c)}),A=S(L),T=c=>{f&&f(n.current,c)};return e.jsx(F,{appear:y,in:x,nodeRef:n,onEnter:K,onEntered:q,onEntering:M,onExit:Z,onExited:A,onExiting:G,addEndListener:T,timeout:j,...D,children:(c,{ownerState:h,...w})=>u.cloneElement(a,{style:{transform:"scale(0)",visibility:c==="exited"&&!x?"hidden":void 0,...ht[c],...P,...a.props.style},ref:p,...w})})});function jt(t){return ke("MuiSpeedDial",t)}const ee=Ee("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),St=t=>{const{classes:s,open:i,direction:l}=t,m={root:["root",`direction${ae(l)}`],fab:["fab"],actions:["actions",!i&&"actionsClosed"]};return Fe(m,jt,s)};function _(t){if(t==="up"||t==="down")return"vertical";if(t==="right"||t==="left")return"horizontal"}const te=32,oe=16,vt=H("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:i}=t;return[s.root,s[`direction${ae(i.direction)}`]]}})(re(({theme:t})=>({zIndex:(t.vars||t).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none",variants:[{props:{direction:"up"},style:{flexDirection:"column-reverse",[`& .${ee.actions}`]:{flexDirection:"column-reverse",marginBottom:-32,paddingBottom:oe+te}}},{props:{direction:"down"},style:{flexDirection:"column",[`& .${ee.actions}`]:{flexDirection:"column",marginTop:-32,paddingTop:oe+te}}},{props:{direction:"left"},style:{flexDirection:"row-reverse",[`& .${ee.actions}`]:{flexDirection:"row-reverse",marginRight:-32,paddingRight:oe+te}}},{props:{direction:"right"},style:{flexDirection:"row",[`& .${ee.actions}`]:{flexDirection:"row",marginLeft:-32,paddingLeft:oe+te}}}]}))),Tt=H(Oe,{name:"MuiSpeedDial",slot:"Fab",overridesResolver:(t,s)=>s.fab})({pointerEvents:"auto"}),wt=H("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(t,s)=>{const{ownerState:i}=t;return[s.actions,!i.open&&s.actionsClosed]}})({display:"flex",pointerEvents:"auto",variants:[{props:({ownerState:t})=>!t.open,style:{transition:"top 0s linear 0.2s",pointerEvents:"none"}}]}),Ct=u.forwardRef(function(s,i){const l=Re({props:s,name:"MuiSpeedDial"}),m=Pe(),f={enter:m.transitions.duration.enteringScreen,exit:m.transitions.duration.leavingScreen},{ariaLabel:y,FabProps:{ref:a,...g}={},children:x,className:R,direction:C="up",hidden:U=!1,icon:v,onBlur:L,onClose:b,onFocus:P,onKeyDown:j,onMouseEnter:F,onMouseLeave:D,onOpen:n,open:p,openIcon:S,slots:M={},slotProps:K={},TransitionComponent:q,TransitionProps:G,transitionDuration:Z=f,...A}=l,[T,c]=Ye({controlled:p,default:!1,name:"SpeedDial",state:"open"}),h={...l,open:T,direction:C},w=St(h),z=Xe(),V=u.useRef(0),E=u.useRef(),k=u.useRef([]);k.current=[k.current[0]];const N=u.useCallback(o=>{k.current[0]=o},[]),Ie=De(a,N),Ue=(o,r)=>d=>{k.current[o+1]=d,r&&r(d)},ze=o=>{j&&j(o);const r=o.key.replace("Arrow","").toLowerCase(),{current:d=r}=E;if(o.key==="Escape"){c(!1),k.current[0].focus(),b&&b(o,"escapeKeyDown");return}if(_(r)===_(d)&&_(r)!==void 0){o.preventDefault();const ce=r===d?1:-1,X=tt(V.current+ce,0,k.current.length-1);k.current[X].focus(),V.current=X,E.current=d}};u.useEffect(()=>{T||(V.current=0,E.current=void 0)},[T]);const me=o=>{o.type==="mouseleave"&&D&&D(o),o.type==="blur"&&L&&L(o),z.clear(),o.type==="blur"?z.start(0,()=>{c(!1),b&&b(o,"blur")}):(c(!1),b&&b(o,"mouseLeave"))},Be=o=>{g.onClick&&g.onClick(o),z.clear(),T?(c(!1),b&&b(o,"toggle")):(c(!0),n&&n(o,"toggle"))},ue=o=>{o.type==="mouseenter"&&F&&F(o),o.type==="focus"&&P&&P(o),z.clear(),T||z.start(0,()=>{c(!0),n&&n(o,{focus:"focus",mouseenter:"mouseEnter"}[o.type])})},le=y.replace(/^[^a-z]+|[^\w:.-]+/gi,""),fe=u.Children.toArray(x).filter(o=>u.isValidElement(o)),Ne=fe.map((o,r)=>{const{FabProps:{ref:d,...ce}={},tooltipPlacement:X}=o.props,Ze=X||(_(C)==="vertical"?"left":"top");return u.cloneElement(o,{FabProps:{...ce,ref:Ue(r,d)},delay:30*(T?r:fe.length-r),open:T,tooltipPlacement:Ze,id:`${le}-action-${r}`})}),Ke={transition:q,...M},Ve={transition:G,...K},xe={slots:Ke,slotProps:Ve},[We,He]=W("root",{elementType:vt,externalForwardedProps:{...xe,...A},ownerState:h,ref:i,className:ie(w.root,R),additionalProps:{role:"presentation"},getSlotProps:o=>({...o,onKeyDown:r=>{var d;(d=o.onKeyDown)==null||d.call(o,r),ze(r)},onBlur:r=>{var d;(d=o.onBlur)==null||d.call(o,r),me(r)},onFocus:r=>{var d;(d=o.onFocus)==null||d.call(o,r),ue(r)},onMouseEnter:r=>{var d;(d=o.onMouseEnter)==null||d.call(o,r),ue(r)},onMouseLeave:r=>{var d;(d=o.onMouseLeave)==null||d.call(o,r),me(r)}})}),[qe,Ge]=W("transition",{elementType:yt,externalForwardedProps:xe,ownerState:h});return e.jsxs(We,{...He,children:[e.jsx(qe,{in:!U,timeout:Z,unmountOnExit:!0,...Ge,children:e.jsx(Tt,{color:"primary","aria-label":y,"aria-haspopup":"true","aria-expanded":T,"aria-controls":`${le}-actions`,...g,onClick:Be,className:ie(w.fab,g.className),ref:Ie,ownerState:h,children:u.isValidElement(v)&&et(v,["SpeedDialIcon"])?u.cloneElement(v,{open:T}):v})}),e.jsx(wt,{id:`${le}-actions`,role:"menu","aria-orientation":_(C),className:ie(w.actions,!T&&w.actionsClosed),ownerState:h,children:Ne})]})});function Pt(t){return ke("MuiSpeedDialAction",t)}const se=Ee("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),Dt=t=>{const{open:s,tooltipPlacement:i,classes:l}=t,m={fab:["fab",!s&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${ae(i)}`,!s&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return Fe(m,Pt,l)},Et=H(Oe,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(t,s)=>{const{ownerState:i}=t;return[s.fab,!i.open&&s.fabClosed]}})(re(({theme:t})=>({margin:8,color:(t.vars||t).palette.text.secondary,backgroundColor:(t.vars||t).palette.background.paper,"&:hover":{backgroundColor:t.vars?t.vars.palette.SpeedDialAction.fabHoverBg:it(t.palette.background.paper,.15)},transition:`${t.transitions.create("transform",{duration:t.transitions.duration.shorter})}, opacity 0.8s`,opacity:1,variants:[{props:({ownerState:s})=>!s.open,style:{opacity:0,transform:"scale(0)"}}]}))),kt=H("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(t,s)=>{const{ownerState:i}=t;return[s.staticTooltip,!i.open&&s.staticTooltipClosed,s[`tooltipPlacement${ae(i.tooltipPlacement)}`]]}})(re(({theme:t})=>({position:"relative",display:"flex",alignItems:"center",[`& .${se.staticTooltipLabel}`]:{transition:t.transitions.create(["transform","opacity"],{duration:t.transitions.duration.shorter}),opacity:1},variants:[{props:({ownerState:s})=>!s.open,style:{[`& .${se.staticTooltipLabel}`]:{opacity:0,transform:"scale(0.5)"}}},{props:{tooltipPlacement:"left"},style:{[`& .${se.staticTooltipLabel}`]:{transformOrigin:"100% 50%",right:"100%",marginRight:8}}},{props:{tooltipPlacement:"right"},style:{[`& .${se.staticTooltipLabel}`]:{transformOrigin:"0% 50%",left:"100%",marginLeft:8}}}]}))),Rt=H("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel",overridesResolver:(t,s)=>s.staticTooltipLabel})(re(({theme:t})=>({position:"absolute",...t.typography.body1,backgroundColor:(t.vars||t).palette.background.paper,borderRadius:(t.vars||t).shape.borderRadius,boxShadow:(t.vars||t).shadows[1],color:(t.vars||t).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"}))),Ft=u.forwardRef(function(s,i){var V;const l=Re({props:s,name:"MuiSpeedDialAction"}),{className:m,delay:f=0,FabProps:y={},icon:a,id:g,open:x,TooltipClasses:R,tooltipOpen:C=!1,tooltipPlacement:U="left",tooltipTitle:v,slots:L={},slotProps:b={},...P}=l,j={...l,tooltipPlacement:U},F=Dt(j),D={slots:L,slotProps:{fab:y,...b,tooltip:ot(typeof b.tooltip=="function"?b.tooltip(j):b.tooltip,{title:v,open:C,placement:U,classes:R})}},[n,p]=u.useState((V=D.slotProps.tooltip)==null?void 0:V.open),S=()=>{p(!1)},M=()=>{p(!0)},K={transitionDelay:`${f}ms`},[q,G]=W("fab",{elementType:Et,externalForwardedProps:D,ownerState:j,shouldForwardComponentProp:!0,className:ie(F.fab,m),additionalProps:{style:K,tabIndex:-1,role:"menuitem",size:"small"}}),[Z,A]=W("tooltip",{elementType:st,externalForwardedProps:D,shouldForwardComponentProp:!0,ref:i,additionalProps:{id:g},ownerState:j,getSlotProps:E=>({...E,onClose:k=>{var N;(N=E.onClose)==null||N.call(E,k),S()},onOpen:k=>{var N;(N=E.onOpen)==null||N.call(E,k),M()}})}),[T,c]=W("staticTooltip",{elementType:kt,externalForwardedProps:D,ownerState:j,ref:i,className:F.staticTooltip,additionalProps:{id:g}}),[h,w]=W("staticTooltipLabel",{elementType:Rt,externalForwardedProps:D,ownerState:j,className:F.staticTooltipLabel,additionalProps:{style:K,id:`${g}-label`}}),z=e.jsx(q,{...G,children:a});return A.open?e.jsxs(T,{...c,...P,children:[e.jsx(h,{...w,children:A.title}),u.cloneElement(z,{"aria-labelledby":`${g}-label`})]}):(!x&&n&&p(!1),e.jsx(Z,{...A,title:A.title,open:x&&n,placement:A.placement,classes:A.classes,...P,children:z}))});function At({sx:t,title:s,author:i,coverUrl:l,createdAt:m,...f}){const y=nt(a=>a.breakpoints.up("sm"));return e.jsx(B,{sx:[a=>({...a.mixins.bgGradient({images:[`linear-gradient(0deg, ${ge(a.vars.palette.grey["900Channel"],.64)}, ${ge(a.vars.palette.grey["900Channel"],.64)})`,`url(${l})`]}),height:480,overflow:"hidden"}),...Array.isArray(t)?t:[t]],...f,children:e.jsxs(Ae,{sx:{height:1,position:"relative"},children:[e.jsx(J,{variant:"h3",component:"h1",sx:{zIndex:9,maxWidth:480,position:"absolute",pt:{xs:2,md:8},color:"common.white"},children:s}),e.jsxs(B,{sx:{left:0,width:1,bottom:0,position:"absolute"},children:[i&&m&&e.jsxs(B,{sx:{display:"flex",alignItems:"center",px:{xs:2,md:3},pb:{xs:3,md:8}},children:[e.jsx(at,{alt:i.name,src:i.avatarUrl,sx:{width:64,height:64,mr:2}}),e.jsx(rt,{sx:{color:"common.white"},primary:i.name,secondary:lt(m),slotProps:{primary:{sx:{typography:"subtitle1"}},secondary:{sx:{mt:.5,opacity:.64,color:"inherit"}}}})]}),e.jsx(Ct,{direction:y?"left":"up",ariaLabel:"Share post",icon:e.jsx(I,{icon:"solar:share-bold"}),FabProps:{size:"medium"},sx:{position:"absolute",bottom:{xs:32,md:64},right:{xs:16,md:24}},children:ct.map(a=>e.jsx(Ft,{icon:e.jsxs(e.Fragment,{children:[a.value==="twitter"&&e.jsx(I,{icon:"socials:twitter"}),a.value==="facebook"&&e.jsx(I,{icon:"socials:facebook"}),a.value==="instagram"&&e.jsx(I,{icon:"socials:instagram"}),a.value==="linkedin"&&e.jsx(I,{icon:"socials:linkedin"})]}),slotProps:{fab:{color:"default"},tooltip:{placement:"top",title:a.label}}},a.label))})]})]})})}function Lt({open:t,title:s,content:i,isValid:l,onClose:m,coverUrl:f,onSubmit:y,description:a,isSubmitting:g}){let x="";f&&(typeof f=="string"?x=f:x=URL.createObjectURL(f));const R=s||x,C=s||a||i||x;return e.jsxs(pt,{fullScreen:!0,open:t,onClose:m,children:[e.jsxs(gt,{sx:{py:2,px:3},children:[e.jsx(J,{variant:"h6",sx:{flexGrow:1},children:"Preview"}),e.jsx(Y,{variant:"outlined",color:"inherit",onClick:m,children:"Cancel"}),e.jsx(Y,{type:"submit",variant:"contained",disabled:!l,loading:g,onClick:y,children:"Post"})]}),e.jsx(de,{}),C?e.jsxs(dt,{children:[(R||x)&&e.jsx(At,{title:s,coverUrl:x}),e.jsx(Ae,{sx:{mt:5,mb:10},children:e.jsxs(B,{sx:{mx:"auto",maxWidth:720},children:[e.jsx(J,{variant:"h6",children:a}),e.jsx(xt,{children:i})]})})]}):e.jsx(bt,{filled:!0,title:"Empty content!"})]})}const Mt=O.object({title:O.string().min(1,{message:"Title is required!"}),description:O.string().min(1,{message:"Description is required!"}),content:we.editor().min(100,{message:"Content must be at least 100 characters"}).max(500,{message:"Content must be less than 500 characters"}),coverUrl:we.file({message:"Cover is required!"}),tags:O.string().array().min(2,{message:"Must have at least 2 items!"}),metaKeywords:O.string().array().min(1,{message:"Meta keywords is required!"}),metaTitle:O.string(),metaDescription:O.string()});function _t({currentPost:t}){const s=mt(),i=pe(),l=pe(!0),m=pe(!0),f={title:"",description:"",content:"",coverUrl:null,tags:[],metaKeywords:[],metaTitle:"",metaDescription:""},y=Me({mode:"all",resolver:Le(Mt),defaultValues:f,values:t}),{reset:a,watch:g,setValue:x,handleSubmit:R,formState:{isSubmitting:C,isValid:U}}=y,v=g(),L=R(async n=>{try{await new Promise(p=>setTimeout(p,500)),a(),i.onFalse(),ut.success(t?"Update success!":"Create success!"),s.push(ft.dashboard.post.root),console.info("DATA",n)}catch(p){console.error(p)}}),b=u.useCallback(()=>{x("coverUrl",null)},[x]),P=(n,p)=>e.jsx(ne,{onClick:p,children:e.jsx(I,{icon:n?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill"})}),j=()=>e.jsxs(he,{children:[e.jsx(ye,{title:"Details",subheader:"Title, short description, image...",action:P(l.value,l.onToggle),sx:{mb:3}}),e.jsxs(je,{in:l.value,children:[e.jsx(de,{}),e.jsxs(Q,{spacing:3,sx:{p:3},children:[e.jsx($.Text,{name:"title",label:"Post title"}),e.jsx($.Text,{name:"description",label:"Description",multiline:!0,rows:3}),e.jsxs(Q,{spacing:1.5,children:[e.jsx(J,{variant:"subtitle2",children:"Content"}),e.jsx($.Editor,{name:"content",sx:{maxHeight:480}})]}),e.jsxs(Q,{spacing:1.5,children:[e.jsx(J,{variant:"subtitle2",children:"Cover"}),e.jsx($.Upload,{name:"coverUrl",maxSize:3145728,onDelete:b})]})]})]})]}),F=()=>e.jsxs(he,{children:[e.jsx(ye,{title:"Properties",subheader:"Additional functions and attributes...",action:P(m.value,m.onToggle),sx:{mb:3}}),e.jsxs(je,{in:m.value,children:[e.jsx(de,{}),e.jsxs(Q,{spacing:3,sx:{p:3},children:[e.jsx($.Autocomplete,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,disableCloseOnSelect:!0,options:Se.map(n=>n),getOptionLabel:n=>n,renderOption:(n,p)=>u.createElement("li",{...n,key:p},p),renderTags:(n,p)=>n.map((S,M)=>u.createElement(ve,{...p({index:M}),key:S,label:S,size:"small",color:"info",variant:"soft"}))}),e.jsx($.Text,{name:"metaTitle",label:"Meta title"}),e.jsx($.Text,{name:"metaDescription",label:"Meta description",fullWidth:!0,multiline:!0,rows:3}),e.jsx($.Autocomplete,{name:"metaKeywords",label:"Meta keywords",placeholder:"+ Keywords",multiple:!0,freeSolo:!0,disableCloseOnSelect:!0,options:Se.map(n=>n),getOptionLabel:n=>n,renderOption:(n,p)=>u.createElement("li",{...n,key:p},p),renderTags:(n,p)=>n.map((S,M)=>u.createElement(ve,{...p({index:M}),key:S,label:S,size:"small",color:"info",variant:"soft"}))}),e.jsx(Ce,{label:"Enable comments",control:e.jsx(Te,{defaultChecked:!0,slotProps:{input:{id:"comments-switch"}}})})]})]})]}),D=()=>e.jsxs(B,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end"},children:[e.jsx(Ce,{label:"Publish",control:e.jsx(Te,{defaultChecked:!0,slotProps:{input:{id:"publish-switch"}}}),sx:{pl:3,flexGrow:1}}),e.jsxs("div",{children:[e.jsx(Y,{color:"inherit",variant:"outlined",size:"large",onClick:i.onTrue,children:"Preview"}),e.jsx(Y,{type:"submit",variant:"contained",size:"large",loading:C,sx:{ml:2},children:t?"Save changes":"Create post"})]})]});return e.jsxs($e,{methods:y,onSubmit:L,children:[e.jsxs(Q,{spacing:5,sx:{mx:"auto",maxWidth:{xs:720,xl:880}},children:[j(),F(),D()]}),e.jsx(Lt,{isValid:U,onSubmit:L,title:v.title,open:i.value,content:v.content,onClose:i.onFalse,coverUrl:v.coverUrl,isSubmitting:C,description:v.description})]})}const $t=O.object({comment:O.string().min(1,{message:"Comment is required!"})});function Jt(){const t={comment:""},s=Me({resolver:Le($t),defaultValues:t}),{reset:i,handleSubmit:l,formState:{isSubmitting:m}}=s,f=l(async y=>{try{await new Promise(a=>setTimeout(a,500)),i(),console.info("DATA",y)}catch(a){console.error(a)}});return e.jsx($e,{methods:s,onSubmit:f,children:e.jsxs(B,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[e.jsx($.Text,{name:"comment",placeholder:"Write some of your comments...",multiline:!0,rows:4}),e.jsxs(B,{sx:{display:"flex",alignItems:"center"},children:[e.jsxs(B,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(ne,{children:e.jsx(I,{icon:"solar:gallery-add-bold"})}),e.jsx(ne,{children:e.jsx(I,{icon:"eva:attach-2-fill"})}),e.jsx(ne,{children:e.jsx(I,{icon:"eva:smiling-face-fill"})})]}),e.jsx(Y,{type:"submit",variant:"contained",loading:m,children:"Post comment"})]})]})})}export{At as P,Jt as a,_t as b};
