import{az as B,aA as H,aB as O,aC as J,aD as K,aE as Q,aF as X,aG as Y,aH as I,aI as Z,aJ as _,H as v,K as L,L as ee,g as R,j as e,N as P,O as x,R as F,Q as k,B as w,U as N,V as q,I as U,F as E}from"./index-BPi-lj99.js";import{s as W,z as n}from"./zod-B_WTTuJ9.js";import{u as T}from"./styles-BkVqaM-o.js";import{F as g}from"./fields-C_OA-jBI.js";import"./preview-single-file-CNraPjvt.js";import"./code-highlight-block-CqLMdGe8.js";import{F as G}from"./form-provider-BxIa1T6o.js";import{g as D}from"./error-message-CLFfVbaG.js";import{F as A,S as se}from"./sign-up-terms-n-qzt160.js";import{F as V,a as M}from"./form-socials-CBe-_le8.js";import{P as re}from"./new-password-icon-RGb_81Uz.js";import{F as te}from"./form-return-link-CMgZIhB9.js";const p={},ae={},ie=async({email:r,password:a})=>{try{await X(p,r,a);const t=p.currentUser;if(!(t!=null&&t.emailVerified))throw new Error("Email not verified!")}catch(t){throw console.error("Error during sign in with password:",t),t}},$=async()=>{const r=new _;await I(p,r)},C=async()=>{const r=new Z;await I(p,r)},z=async()=>{const r=new Y;await I(p,r)},ne=async({email:r,password:a,firstName:t,lastName:d})=>{var m,o;try{const i=await H(p,r,a);await O(i.user);const h=J(K(ae,"users"),(m=i.user)==null?void 0:m.uid);await Q(h,{uid:(o=i.user)==null?void 0:o.uid,email:r,displayName:`${t} ${d}`})}catch(i){throw console.error("Error during sign up:",i),i}},oe=async({email:r})=>{await B(p,r)},le=n.object({email:n.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:n.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function Pe(){const r=v(),a=L(),{checkUserSession:t}=ee(),[d,m]=R.useState(null),o={email:"",password:""},i=T({resolver:W(le),defaultValues:o}),{handleSubmit:h,formState:{isSubmitting:u}}=i,l=h(async s=>{try{await ie({email:s.email,password:s.password}),await(t==null?void 0:t()),r.refresh()}catch(c){console.error(c);const S=D(c);m(S)}}),f=async()=>{try{await $()}catch(s){console.error(s)}},b=async()=>{try{await C()}catch(s){console.error(s)}},y=async()=>{try{await z()}catch(s){console.error(s)}},j=()=>e.jsxs(w,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[e.jsx(g.Text,{name:"email",label:"Email address",slotProps:{inputLabel:{shrink:!0}}}),e.jsxs(w,{sx:{gap:1.5,display:"flex",flexDirection:"column"},children:[e.jsx(P,{component:F,href:x.auth.firebase.resetPassword,variant:"body2",color:"inherit",sx:{alignSelf:"flex-end"},children:"Forgot password?"}),e.jsx(g.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:a.value?"text":"password",slotProps:{inputLabel:{shrink:!0},input:{endAdornment:e.jsx(N,{position:"end",children:e.jsx(q,{onClick:a.onToggle,edge:"end",children:e.jsx(U,{icon:a.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}})]}),e.jsx(E,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:u,loadingIndicator:"Sign in...",children:"Sign in"})]});return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:"Sign in to your account",description:e.jsxs(e.Fragment,{children:["Donâ€™t have an account? ",e.jsx(P,{component:F,href:x.auth.firebase.signUp,variant:"subtitle2",children:"Get started"})]}),sx:{textAlign:{xs:"center",md:"left"}}}),!!d&&e.jsx(k,{severity:"error",sx:{mb:3},children:d}),e.jsx(G,{methods:i,onSubmit:l,children:j()}),e.jsx(V,{}),e.jsx(M,{signInWithGoogle:f,singInWithGithub:b,signInWithTwitter:y})]})}const ce=n.object({firstName:n.string().min(1,{message:"First name is required!"}),lastName:n.string().min(1,{message:"Last name is required!"}),email:n.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:n.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function Fe(){const r=v(),a=L(),[t,d]=R.useState(null),m={firstName:"",lastName:"",email:"",password:""},o=T({resolver:W(ce),defaultValues:m}),{handleSubmit:i,formState:{isSubmitting:h}}=o,u=s=>{const c=new URLSearchParams({email:s}).toString();return`${x.auth.firebase.verify}?${c}`},l=i(async s=>{try{await ne({email:s.email,password:s.password,firstName:s.firstName,lastName:s.lastName});const c=u(s.email);r.push(c)}catch(c){console.error(c);const S=D(c);d(S)}}),f=async()=>{try{await $()}catch(s){console.error(s)}},b=async()=>{try{await C()}catch(s){console.error(s)}},y=async()=>{try{await z()}catch(s){console.error(s)}},j=()=>e.jsxs(w,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[e.jsxs(w,{sx:{display:"flex",gap:{xs:3,sm:2},flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(g.Text,{name:"firstName",label:"First name",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(g.Text,{name:"lastName",label:"Last name",slotProps:{inputLabel:{shrink:!0}}})]}),e.jsx(g.Text,{name:"email",label:"Email address",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(g.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:a.value?"text":"password",slotProps:{inputLabel:{shrink:!0},input:{endAdornment:e.jsx(N,{position:"end",children:e.jsx(q,{onClick:a.onToggle,edge:"end",children:e.jsx(U,{icon:a.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}}),e.jsx(E,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:h,loadingIndicator:"Create account...",children:"Create account"})]});return e.jsxs(e.Fragment,{children:[e.jsx(A,{title:"Get started absolutely free",description:e.jsxs(e.Fragment,{children:["Already have an account? ",e.jsx(P,{component:F,href:x.auth.firebase.signIn,variant:"subtitle2",children:"Get started"})]}),sx:{textAlign:{xs:"center",md:"left"}}}),!!t&&e.jsx(k,{severity:"error",sx:{mb:3},children:t}),e.jsx(G,{methods:o,onSubmit:l,children:j()}),e.jsx(se,{}),e.jsx(V,{}),e.jsx(M,{signInWithGoogle:f,singInWithGithub:b,signInWithTwitter:y})]})}const de=n.object({email:n.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function Ie(){const r=v(),a={email:""},t=T({resolver:W(de),defaultValues:a}),{handleSubmit:d,formState:{isSubmitting:m}}=t,o=u=>{const l=new URLSearchParams({email:u}).toString();return`${x.auth.firebase.verify}?${l}`},i=d(async u=>{try{await oe({email:u.email});const l=o(u.email);r.push(l)}catch(l){console.error(l)}}),h=()=>e.jsxs(w,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[e.jsx(g.Text,{autoFocus:!0,name:"email",label:"Email address",placeholder:"example@gmail.com",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(E,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:m,loadingIndicator:"Send request...",children:"Send request"})]});return e.jsxs(e.Fragment,{children:[e.jsx(A,{icon:e.jsx(re,{}),title:"Forgot your password?",description:"Please enter the email address associated with your account and we'll email you a link to reset your password."}),e.jsx(G,{methods:t,onSubmit:i,children:h()}),e.jsx(te,{href:x.auth.firebase.signIn})]})}export{Pe as F,Fe as a,Ie as b};
