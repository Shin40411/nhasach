import{q as y,E as v,j as o,b9 as O,bp as W,bq as j,br as A,bs as $,bt as B,bu as z,bv as C,g as d,bw as F,bx as G,H as M,F as U,x as V,by as q,bz as Y,N as P,bA as w,bB as Q,bC as X,bD as K,bE as J,bF as Z,V as L,R as D,T as tt,b5 as et,Y as at,I as ot,bG as nt,bH as st,z as rt,bI as it,bJ as lt,C as pt}from"./index-D6bpUwKX.js";y("div")(({theme:t})=>({width:"100%",display:"flex",flexWrap:"wrap",position:"relative",alignItems:"center",rowGap:t.spacing(3),columnGap:t.spacing(2),justifyContent:"center",padding:t.spacing(6,3),borderRadius:t.shape.borderRadius*1.5,backgroundColor:v(t.vars.palette.grey["500Channel"],.04),boxShadow:`0 0 0 1px ${v(t.vars.palette.grey["500Channel"],.16)}`}));y("span")(({theme:t})=>({top:0,left:0,position:"absolute",marginLeft:t.spacing(2.5),padding:t.spacing(.25,1),color:t.vars.palette.text.primary,borderRadius:t.shape.borderRadius*2,backgroundColor:t.vars.palette.common.white,transform:"translateY(-50%)",fontSize:t.typography.caption.fontSize,fontWeight:t.typography.fontWeightSemiBold,border:`solid 1px ${v(t.vars.palette.grey["500Channel"],.24)}`,...t.applyStyles("dark",{backgroundColor:t.vars.palette.background.neutral})}));function ct({children:t,isActive:n,sx:e,...r}){const a=i=>({top:"50%",width:"0px",content:'""',height:"0px",opacity:.24,position:"absolute",borderStyle:"solid",transform:"translate(-50%, -50%)",left:"var(--arrow-offset-left, -8px)",borderWidth:"var(--arrow-size, 5px) 0 var(--arrow-size, 5px) var(--arrow-size, 5px)",borderColor:`transparent transparent transparent ${i.vars.palette.text.primary}`,zIndex:9,...i.direction==="rtl"&&{transform:"translate(-50%, -50%) scaleX(-1)"}});return o.jsx(O,{disableGutters:!0,disableRipple:!0,disableTouchRipple:!0,sx:[i=>({...i.typography.body2,p:0,position:"relative",color:"text.secondary",fontSize:i.typography.pxToRem(13),"&:hover":{color:"text.primary",bgcolor:"transparent"},[`&.${W.focusVisible}`]:{bgcolor:"transparent"},...n&&{color:"text.primary",fontWeight:"fontWeightSemiBold","&::before":a(i)}}),...Array.isArray(e)?e:[e]],...r,children:t})}const k={primaryNav:j("component__layout__primary__nav"),secondaryNav:j("component__layout__secondary__nav")},dt=y("div")(({theme:t})=>({maxHeight:800,display:"none",position:"sticky",alignSelf:"start",flexDirection:"column",padding:t.spacing(0,"var(--nav-gutters)"),top:"calc(var(--layout-header-desktop-height) + 24px)"})),ut=y("nav")({minHeight:0,display:"flex",flexDirection:"column"}),T=y("ul")({display:"flex",flexDirection:"column"}),S=y("li")({display:"flex",flexDirection:"column",alignItems:"flex-start"});function gt({sx:t,navData:n,className:e,...r}){return o.jsx(dt,{className:A([k.primaryNav,e]),sx:t,...r,children:o.jsx(ut,{children:o.jsx(T,{sx:[a=>({...a.mixins.hideScrollY,"--arrow-size":"7px","--arrow-offset-left":"-14px",gap:"var(--primary-nav-list-gap)"})],children:n==null?void 0:n.map(a=>o.jsx(xt,{subheader:a.title,items:a.items},a.title))})})})}function xt({subheader:t,items:n}){const e=$(),r={top:0,left:3,bottom:0,my:"auto",width:"1px",content:'""',bgcolor:"divider",position:"absolute",height:"calc(100% - 12px)"},a=n.map(s=>{var p;return{...s,ClassOfBook:(p=s.class)!=null&&p.startsWith("Lớp")?s.class:`Lớp ${s.class||"Không rõ"}`}}),i=Array.from(new Map(a.map(s=>[s.class,s])).values());return o.jsxs(S,{children:[o.jsx(B,{component:"h6",sx:{px:0,pb:.5,mt:0,mx:0,mb:.5,width:1,color:"text.primary",typography:"overline",bgcolor:"background.default"},children:t}),o.jsx(T,{sx:{pl:"21px",position:"relative",gap:"var(--primary-nav-item-gap)","&::before":r},children:i.map(s=>o.jsx(S,{children:o.jsx(z,{to:s.href,style:{textDecoration:"none"},children:o.jsxs(ct,{isActive:C(s.href,e),autoFocus:C(s.href,e),children:[s.ClassOfBook," ",s.packageType==="MUI X"&&o.jsx(o.Fragment,{children:"(MUI X)"})]})})},s.name))})]})}function ht(t,n){const[e,r]=d.useState(0),a=d.useCallback(()=>{const s=window.innerHeight*n,p=window.scrollY+s,u=document.querySelectorAll(`.${t}`);let h=null;u.forEach((m,c)=>{const x=m.offsetTop,b=x+m.clientHeight;p>=x&&p<b&&(h=c)}),r(h)},[n,t]),i=F(a,1e3);return d.useEffect(()=>(window.addEventListener("scroll",i,{passive:!0}),()=>{window.removeEventListener("scroll",i)}),[i]),e}function yt(t){const n=d.useCallback(e=>{const r=document.querySelector(e);if(r){const a=r.offsetTop-t;window.scrollTo({top:a,behavior:"smooth"})}},[t]);return d.useEffect(()=>{const e=window.location.hash;e&&n(e)},[n]),n}const mt=({category:t,name:n,iconPrefix:e,packageType:r,class:a,idBook:i})=>({name:n,href:Y(r,a),hrefChildren:`/${i}/${q(n)}`,icon:`${V.assetsDir}/assets/Thumbnail/${e}`,packageType:r,class:a}),bt=G.reduce((t,n)=>{const{subject:e,title:r,grade:a,id:i}=n;t[e]||(t[e]=[]);let s="",p="";a.includes("Lớp ",0)?(s=a,p=a.replace("Lớp ","").split(", ").join("")):(s=`Lớp ${a}`,p=a.split(", ").join(""));let u="";e&&(u=M(e));let h="";r&&(h=U(r.replace(".","")));const m=`${s}/thumbnail_stk${p}_${u}${p}_${h}.png`;return t[e].push(mt({category:"sgk",name:r,iconPrefix:m,packageType:e,class:a,idBook:i})),t},{}),ft=Object.entries(bt).map(([t,n])=>({title:t,items:n})),I=[...ft];function vt({navData:t=[],sx:n}){const e=P(),r=$(),a=t==null?void 0:t.map(l=>l.items).flat(),i=a==null?void 0:a.find(l=>C(l.href,r)),[s,p]=d.useState(!1),[u,h]=d.useState(""),[m,c]=d.useState(i||null);d.useEffect(()=>{p(u.trim().length>0)},[u]);const x=d.useCallback(l=>{c(l),l&&e.push(l==null?void 0:l.href)},[e]),b={width:"100%",[`& .${w.listbox}`]:{[`& .${w.option}`]:{p:0,[`& .${Q.root}`]:{px:1,py:.5,width:1}}}},_={[`& .${X.input}`]:{typography:"body2",fontWeight:"fontWeightMedium"}};return o.jsx(K,{open:s,sx:n,autoHighlight:!0,disableClearable:!0,autoComplete:!1,popupIcon:null,options:a,value:m,onChange:(l,g)=>x(g),onInputChange:(l,g)=>h(g),getOptionLabel:l=>l.name,noOptionsText:o.jsx(nt,{query:u}),isOptionEqualToValue:(l,g)=>l.name===g.name,slotProps:{paper:{sx:b}},renderInput:l=>o.jsx(et,{...l,hiddenLabel:!0,size:"small",variant:"filled",placeholder:"Tìm kiếm...",slotProps:{input:{...l.InputProps,startAdornment:o.jsx(at,{position:"start",children:o.jsx(ot,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}},sx:_}),renderOption:(l,g,{inputValue:N})=>{const R=J(g.name,N),E=Z(g.name,R);return d.createElement("li",{...l,key:g.name},o.jsx(L,{component:D,href:g.href,color:"inherit",underline:"none",children:E.map((f,H)=>o.jsx(tt,{component:"span",color:f.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:f.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:f.text},H))},g.name))}})}const Ct=120,kt=t=>({"--nav-gutters":"16px","--nav-width":"220px","--primary-nav-list-gap":"24px","--primary-nav-item-gap":"6px","--secondary-nav-item-gap":"10px","--section-gap":"24px","--section-padding":"24px","--layout-gutters":"16px","--layout-gap":"24px",[t.breakpoints.up("md")]:{"--layout-gutters":"20px"},[t.breakpoints.up("xl")]:{"--layout-gutters":"80px"}});function $t({sx:t,children:n,heroProps:e,sectionData:r,containerProps:a,queryClassName:i="scroll__to__view",offsetValue:s=.3,...p}){ht(i,s);const u=yt(Ct);d.useCallback(c=>{const x=document.querySelectorAll(`.${i}`);if(x[c]){const b=x[c].id;u(`#${b}`)}},[i,u]);const h=()=>o.jsx(gt,{navData:I}),m=()=>o.jsxs(wt,{maxWidth:"md",...a,children:[o.jsx(vt,{navData:I,sx:{mb:4}}),n??o.jsx(St,{children:r==null?void 0:r.map(c=>{const x=`${st(c.name)}`;return o.jsxs(rt,{id:x,className:i,children:[o.jsx(it,{title:c.name,subheader:c.description,slotProps:{title:{component:L,href:`#${x}`,color:"inherit",sx:{display:"inline-flex","&:hover":{opacity:.8}}}}}),o.jsx(lt,{children:c.component})]},c.name)})})]});return o.jsxs(o.Fragment,{children:[e==null?void 0:e.topNode,e==null?void 0:e.bottomNode,o.jsxs(jt,{sx:[kt,...Array.isArray(t)?t:[t]],...p,children:[h(),m()]})]})}const jt=y("div")(({theme:t})=>({display:"grid",gap:"var(--layout-gap)",padding:t.spacing(8,"var(--layout-gutters)",15,"var(--layout-gutters)"),[t.breakpoints.up("md")]:{gridTemplateColumns:"var(--nav-width) auto",[`& .${k.primaryNav}`]:{display:"flex"}},[t.breakpoints.up(1440)]:{gridTemplateColumns:"var(--nav-width) auto var(--nav-width)",[`& .${k.secondaryNav}`]:{display:"flex"}}})),wt=y(pt)(({theme:t})=>({padding:0,minWidth:0,[t.breakpoints.up("sm")]:{padding:0}})),St=y("div")(({theme:t})=>({display:"flex",flexDirection:"column",gap:"var(--section-gap)",padding:"var(--section-padding)",borderRadius:t.shape.borderRadius*2,backgroundColor:t.vars.palette.background.neutral}));export{$t as C,I as a};
