import{W as m,N as y,O as L,Q as A,g as N,j as e,V as T,R as I,X as q,B as g,Y as b,Z as f,I as j,M as P}from"./index-D6bpUwKX.js";import{s as S,z as n}from"./zod-B5GKHG6E.js";import{u as v}from"./styles-D8b8rnOK.js";import{F as c}from"./fields-B53gUzDf.js";import"./preview-single-file-DAd3oWJu.js";import"./code-highlight-block-YQG8K_vY.js";import{F}from"./form-provider-BQ6XSOiV.js";import{g as M}from"./error-message-CLFfVbaG.js";import{F as k,S as C}from"./sign-up-terms-SWb_KueS.js";import{P as V,N as R}from"./new-password-icon-BjWfmaME.js";import{F as D}from"./form-return-link-COkiWPzP.js";const E={},W=async({email:a,password:r})=>{const{data:s,error:t}=await E.auth.signInWithPassword({email:a,password:r});if(t)throw console.error(t),t;return{data:s,error:t}},$=async({email:a,password:r,firstName:s,lastName:t})=>{var l,d;const{data:i,error:o}=await E.auth.signUp({email:a,password:r,options:{emailRedirectTo:`${window.location.origin}${m.dashboard.root}`,data:{display_name:`${s} ${t}`}}});if(o)throw console.error(o),o;if(!((d=(l=i==null?void 0:i.user)==null?void 0:l.identities)!=null&&d.length))throw new Error("This user already exists");return{data:i,error:o}},z=async({email:a})=>{const{data:r,error:s}=await E.auth.resetPasswordForEmail(a,{redirectTo:`${window.location.origin}${m.auth.supabase.updatePassword}`});if(s)throw console.error(s),s;return{data:r,error:s}},B=async({password:a})=>{const{data:r,error:s}=await E.auth.updateUser({password:a});if(s)throw console.error(s),s;return{data:r,error:s}},G=n.object({email:n.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:n.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function oe(){const a=y(),r=L(),{checkUserSession:s}=A(),[t,i]=N.useState(null),o={email:"",password:""},l=v({resolver:S(G),defaultValues:o}),{handleSubmit:d,formState:{isSubmitting:h}}=l,w=d(async p=>{try{await W({email:p.email,password:p.password}),await(s==null?void 0:s()),a.refresh()}catch(x){console.error(x);const U=M(x);i(U)}}),u=()=>e.jsxs(g,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[e.jsx(c.Text,{name:"email",label:"Email address",slotProps:{inputLabel:{shrink:!0}}}),e.jsxs(g,{sx:{gap:1.5,display:"flex",flexDirection:"column"},children:[e.jsx(T,{component:I,href:m.auth.supabase.resetPassword,variant:"body2",color:"inherit",sx:{alignSelf:"flex-end"},children:"Forgot password?"}),e.jsx(c.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:r.value?"text":"password",slotProps:{inputLabel:{shrink:!0},input:{endAdornment:e.jsx(b,{position:"end",children:e.jsx(f,{onClick:r.onToggle,edge:"end",children:e.jsx(j,{icon:r.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}})]}),e.jsx(P,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:h,loadingIndicator:"Sign in...",children:"Sign in"})]});return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Sign in to your account",description:e.jsxs(e.Fragment,{children:["Donâ€™t have an account? ",e.jsx(T,{component:I,href:m.auth.supabase.signUp,variant:"subtitle2",children:"Get started"})]}),sx:{textAlign:{xs:"center",md:"left"}}}),!!t&&e.jsx(q,{severity:"error",sx:{mb:3},children:t}),e.jsx(F,{methods:l,onSubmit:w,children:u()})]})}const H=n.object({firstName:n.string().min(1,{message:"First name is required!"}),lastName:n.string().min(1,{message:"Last name is required!"}),email:n.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:n.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function ne(){const a=y(),r=L(),[s,t]=N.useState(null),i={firstName:"",lastName:"",email:"",password:""},o=v({resolver:S(H),defaultValues:i}),{handleSubmit:l,formState:{isSubmitting:d}}=o,h=l(async u=>{try{await $({email:u.email,password:u.password,firstName:u.firstName,lastName:u.lastName}),a.push(m.auth.supabase.verify)}catch(p){console.error(p);const x=M(p);t(x)}}),w=()=>e.jsxs(g,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[e.jsxs(g,{sx:{display:"flex",gap:{xs:3,sm:2},flexDirection:{xs:"column",sm:"row"}},children:[e.jsx(c.Text,{name:"firstName",label:"First name",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(c.Text,{name:"lastName",label:"Last name",slotProps:{inputLabel:{shrink:!0}}})]}),e.jsx(c.Text,{name:"email",label:"Email address",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(c.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:r.value?"text":"password",slotProps:{inputLabel:{shrink:!0},input:{endAdornment:e.jsx(b,{position:"end",children:e.jsx(f,{onClick:r.onToggle,edge:"end",children:e.jsx(j,{icon:r.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}}),e.jsx(P,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:d,loadingIndicator:"Create account...",children:"Create account"})]});return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Get started absolutely free",description:e.jsxs(e.Fragment,{children:["Already have an account? ",e.jsx(T,{component:I,href:m.auth.supabase.signIn,variant:"subtitle2",children:"Get started"})]}),sx:{textAlign:{xs:"center",md:"left"}}}),!!s&&e.jsx(q,{severity:"error",sx:{mb:3},children:s}),e.jsx(F,{methods:o,onSubmit:h,children:w()}),e.jsx(C,{})]})}const O=n.object({email:n.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function ie(){const a=y(),r={email:""},s=v({resolver:S(O),defaultValues:r}),{handleSubmit:t,formState:{isSubmitting:i}}=s,o=t(async d=>{try{await z({email:d.email}),a.push(m.auth.supabase.verify)}catch(h){console.error(h)}}),l=()=>e.jsxs(g,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[e.jsx(c.Text,{autoFocus:!0,name:"email",label:"Email address",placeholder:"example@gmail.com",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(P,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:i,loadingIndicator:"Send request...",children:"Send request"})]});return e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(V,{}),title:"Forgot your password?",description:"Please enter the email address associated with your account and we'll email you a link to reset your password."}),e.jsx(F,{methods:s,onSubmit:o,children:l()}),e.jsx(D,{href:m.auth.supabase.signIn})]})}const Q=n.object({password:n.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"}),confirmPassword:n.string().min(1,{message:"Confirm password is required!"})}).refine(a=>a.password===a.confirmPassword,{message:"Passwords do not match!",path:["confirmPassword"]});function le(){const a=y(),r=L(),[s,t]=N.useState(null),i={password:"",confirmPassword:""},o=v({resolver:S(Q),defaultValues:i}),{handleSubmit:l,formState:{isSubmitting:d}}=o,h=l(async u=>{try{await B({password:u.password}),a.push(m.dashboard.root)}catch(p){console.error(p);const x=M(p);t(x)}}),w=()=>e.jsxs(g,{sx:{gap:3,display:"flex",flexDirection:"column"},children:[e.jsx(c.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:r.value?"text":"password",slotProps:{inputLabel:{shrink:!0},input:{endAdornment:e.jsx(b,{position:"end",children:e.jsx(f,{onClick:r.onToggle,edge:"end",children:e.jsx(j,{icon:r.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}}),e.jsx(c.Text,{name:"confirmPassword",label:"Confirm password",type:r.value?"text":"password",slotProps:{inputLabel:{shrink:!0},input:{endAdornment:e.jsx(b,{position:"end",children:e.jsx(f,{onClick:r.onToggle,edge:"end",children:e.jsx(j,{icon:r.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}}),e.jsx(P,{fullWidth:!0,type:"submit",size:"large",variant:"contained",loading:d,loadingIndicator:"Update password...",children:"Update password"})]});return e.jsxs(e.Fragment,{children:[e.jsx(k,{icon:e.jsx(R,{}),title:"Update password",description:"Successful updates enable access using the new password."}),!!s&&e.jsx(q,{severity:"error",sx:{mb:3},children:s}),e.jsx(F,{methods:o,onSubmit:h,children:w()})]})}export{oe as S,ne as a,le as b,ie as c};
