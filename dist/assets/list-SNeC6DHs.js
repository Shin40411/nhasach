import{cq as w,j as e,M as P,B as d,I as p,dQ as A,ct as k,cu as g,N,g as m,dR as $,dS as G,bA as S,bB as H,bD as V,bE as Q,bF as U,V as L,R as j,A as F,T as O,b5 as q,dT as _,Y as J,bG as Y,z as Z,L as T,dz as D,Z as K,W as u,dU as X,eh as ee,dJ as se,cI as te,cH as oe,x as ne}from"./index-usks_mw-.js";import{P as re,a as ie}from"./post-skeleton-H2gsdDVg.js";import{u as le,a as ae}from"./blog-DSTkvr5E.js";import{c as y}from"./format-number-1JRP8vfz.js";import{I as ce}from"./image-CI7Up_jg.js";import{S as v}from"./Stack-CgODRvvD.js";import{P as de,p as he}from"./Pagination-D5pfcmeh.js";import{o as C}from"./orderBy-BP_idRMj.js";import"./post-comment-form-ZeFM-nGy.js";import"./html-to-markdown-DWCueCQM.js";import"./empty-content-CMvi2U-9.js";import"./Skeleton-T7cltK9a.js";import"./index-BgJJ5cvl.js";import"./LastPage-p2DRLW4r.js";import"./zod-RlOVw4MX.js";import"./styles-CfUPITlh.js";import"./fields-C0p86-nh.js";import"./Rating-D7Aom_ED.js";import"./editor-Dgj6bP_R.js";import"./code-highlight-block-BPaUgu3R.js";import"./FormGroup-BcIuZYAH.js";import"./FormControlLabel-4BKoF0oU.js";import"./index-BZxbeKDV.js";import"./index-Chjiymov.js";import"./Checkbox-CXJQ1e9t.js";import"./upload-D-BZQNpO.js";import"./index-D7BwrrXM.js";import"./preview-single-file-BDCIPO5I.js";import"./DatePicker-bZIT4znD.js";import"./DialogActions-tMlZhSgp.js";import"./DialogContent-hfRIofTz.js";import"./dialogTitleClasses-ArRuUPNv.js";import"./schema-helper-nSaw4j_a.js";import"./form-provider-BBryKxXX.js";import"./markdown-Du_CypTG.js";import"./Fab-DI8NvkXl.js";function pe({sort:s,sortOptions:t,onSort:a}){const o=w(),i=()=>e.jsx(A,{open:o.open,anchorEl:o.anchorEl,onClose:o.onClose,children:e.jsx(k,{children:t.map(n=>e.jsx(g,{selected:s===n.value,onClick:()=>{o.onClose(),a(n.value)},children:n.label},n.value))})});return e.jsxs(e.Fragment,{children:[e.jsxs(P,{disableRipple:!0,color:"inherit",onClick:o.onOpen,endIcon:e.jsx(p,{icon:o.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold",textTransform:"capitalize"},children:["Sort by:",e.jsx(d,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:s})]}),i()]})}function xe({redirectPath:s,sx:t}){const a=N(),[o,i]=m.useState(""),[n,f]=m.useState(null),h=$(o),{searchResults:l,searchLoading:x}=le(h),z=m.useCallback(r=>{f(r),r&&a.push(s(r.title))},[s,a]),B=G({matchFrom:"any",stringify:r=>`${r.title} ${r.description}`}),E={width:320,[`& .${S.listbox}`]:{[`& .${S.option}`]:{p:0,[`& .${H.root}`]:{p:.75,gap:1.5,width:1,display:"flex",alignItems:"center"}}}};return e.jsx(V,{autoHighlight:!0,popupIcon:null,loading:x,options:l,value:n,filterOptions:B,onChange:(r,c)=>z(c),onInputChange:(r,c)=>i(c),getOptionLabel:r=>r.title,noOptionsText:e.jsx(Y,{query:h}),isOptionEqualToValue:(r,c)=>r.id===c.id,slotProps:{paper:{sx:E}},sx:[{width:{xs:1,sm:260}},...Array.isArray(t)?t:[t]],renderInput:r=>e.jsx(q,{...r,placeholder:"Search...",slotProps:{input:{...r.InputProps,startAdornment:e.jsx(J,{position:"start",children:e.jsx(p,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[x?e.jsx(_,{size:18,color:"inherit",sx:{mr:-3}}):null,r.InputProps.endAdornment]})}}}),renderOption:(r,c,{inputValue:I})=>{const R=Q(c.title,I),W=U(c.title,R);return m.createElement("li",{...r,key:c.id},e.jsxs(L,{component:j,href:s(c.title),color:"inherit",underline:"none",children:[e.jsx(F,{alt:c.title,src:c.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,borderRadius:1}},c.id),e.jsx("div",{children:W.map((b,M)=>e.jsx(O,{component:"span",color:b.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:b.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:b.text},M))},I)]}))}})}function me({sx:s,post:t,editHref:a,detailsHref:o,...i}){const n=w(),f=()=>e.jsx(A,{open:n.open,anchorEl:n.anchorEl,onClose:n.onClose,slotProps:{arrow:{placement:"bottom-center"}},children:e.jsxs(k,{children:[e.jsx("li",{children:e.jsxs(g,{component:j,href:o,onClick:()=>n.onClose(),children:[e.jsx(p,{icon:"solar:eye-bold"}),"View"]})}),e.jsx("li",{children:e.jsxs(g,{component:j,href:a,onClick:()=>n.onClose(),children:[e.jsx(p,{icon:"solar:pen-bold"}),"Edit"]})}),e.jsxs(g,{onClick:()=>n.onClose(),sx:{color:"error.main"},children:[e.jsx(p,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(Z,{sx:[{display:"flex"},...Array.isArray(s)?s:[s]],...i,children:[e.jsxs(v,{spacing:1,sx:[h=>({flexGrow:1,p:h.spacing(3,3,2,3)})],children:[e.jsxs(d,{sx:{mb:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(T,{variant:"soft",color:t.publish==="published"&&"info"||"default",children:t.publish}),e.jsx(d,{component:"span",sx:{typography:"caption",color:"text.disabled"},children:D(t.createdAt)})]}),e.jsxs(v,{spacing:1,sx:{flexGrow:1},children:[e.jsx(L,{component:j,href:o,color:"inherit",variant:"subtitle2",sx:[h=>({...h.mixins.maxLine({line:2})})],children:t.title}),e.jsx(O,{variant:"body2",sx:[h=>({...h.mixins.maxLine({line:2}),color:"text.secondary"})],children:t.description})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(K,{color:n.open?"inherit":"default",onClick:n.onOpen,children:e.jsx(p,{icon:"eva:more-horizontal-fill"})}),e.jsxs(d,{sx:{gap:1.5,flexGrow:1,display:"flex",flexWrap:"wrap",typography:"caption",color:"text.disabled",justifyContent:"flex-end"},children:[e.jsxs(d,{sx:{gap:.5,display:"flex",alignItems:"center"},children:[e.jsx(p,{icon:"solar:chat-round-dots-bold",width:16}),y(t.totalComments)]}),e.jsxs(d,{sx:{gap:.5,display:"flex",alignItems:"center"},children:[e.jsx(p,{icon:"solar:eye-bold",width:16}),y(t.totalViews)]}),e.jsxs(d,{sx:{gap:.5,display:"flex",alignItems:"center"},children:[e.jsx(p,{icon:"solar:share-bold",width:16}),y(t.totalShares)]})]})]})]}),e.jsxs(d,{sx:{p:1,width:180,height:240,flexShrink:0,position:"relative",display:{xs:"none",sm:"block"}},children:[e.jsx(F,{alt:t.author.name,src:t.author.avatarUrl,sx:{top:16,right:16,zIndex:9,position:"absolute"}}),e.jsx(ce,{alt:t.title,src:t.coverUrl,sx:{height:1,borderRadius:1.5}})]})]}),f()]})}function ue({posts:s,loading:t}){const a=()=>e.jsx(re,{variant:"horizontal"}),o=()=>s.map(i=>e.jsx(me,{post:i,detailsHref:u.dashboard.post.details(i.title),editHref:u.dashboard.post.edit(i.title)},i.id));return e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"}},children:t?a():o()}),s.length>8&&e.jsx(de,{count:8,sx:{mt:{xs:5,md:8},[`& .${he.ul}`]:{justifyContent:"center"}}})]})}function fe(){const{posts:s,postsLoading:t}=ae(),[a,o]=m.useState("latest"),{state:i,setState:n}=X({publish:"all"}),f=je({inputData:s,filters:i,sortBy:a}),h=m.useCallback((l,x)=>{n({publish:x})},[n]);return e.jsxs(ee,{children:[e.jsx(se,{heading:"List",links:[{name:"Dashboard",href:u.dashboard.root},{name:"Blog",href:u.dashboard.post.root},{name:"List"}],action:e.jsx(P,{component:j,href:u.dashboard.post.new,variant:"contained",startIcon:e.jsx(p,{icon:"mingcute:add-line"}),children:"New post"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(d,{sx:{gap:3,display:"flex",mb:{xs:3,md:5},justifyContent:"space-between",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-end",sm:"center"}},children:[e.jsx(xe,{redirectPath:l=>u.dashboard.post.details(l)}),e.jsx(pe,{sort:a,onSort:l=>o(l),sortOptions:ie})]}),e.jsx(te,{value:i.publish,onChange:h,sx:{mb:{xs:3,md:5}},children:["all","published","draft"].map(l=>e.jsx(oe,{iconPosition:"end",value:l,label:l,icon:e.jsxs(T,{variant:(l==="all"||l===i.publish)&&"filled"||"soft",color:l==="published"&&"info"||"default",children:[l==="all"&&s.length,l==="published"&&s.filter(x=>x.publish==="published").length,l==="draft"&&s.filter(x=>x.publish==="draft").length]}),sx:{textTransform:"capitalize"}},l))}),e.jsx(ue,{posts:f,loading:t})]})}function je({inputData:s,filters:t,sortBy:a}){const{publish:o}=t;return a==="latest"&&(s=C(s,["createdAt"],["desc"])),a==="oldest"&&(s=C(s,["createdAt"],["asc"])),a==="popular"&&(s=C(s,["totalViews"],["desc"])),o!=="all"&&(s=s.filter(i=>i.publish===o)),s}const ge={title:`Post list | Dashboard - ${ne.appName}`};function ss(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:ge.title}),e.jsx(fe,{})]})}export{ss as default};
