import{j as e,z as W,bn as z,B as f,L as v,I as O,dN as w,V as T,R as A,W as E,cl as B,M as G,dO as U,co as M,cp as Q,N as V,g,dP as q,dQ as H,bA as F,bB as Y,bD as J,bE as K,bF as X,A as Z,T as L,b5 as D,dR as ee,Y as te,bG as re,ct as C,E as se,O as oe,dS as ne,C as ie,x as ae}from"./index-D6bpUwKX.js";import{u as le,a as ce}from"./product-BCpLEPLX.js";import{P as de,a as pe,b as me,c as he,d as xe,e as ue}from"./product-review-new-form-BzuNbX9e.js";import{E as ge}from"./empty-content-DB3Nbb7N.js";import{C as fe}from"./cart-icon-C1yc9FaP.js";import{c as k}from"./format-number-Cj8l_lI8.js";import{I as je}from"./image-FIum-Rwa.js";import{C as be}from"./color-preview-DQyBWqPc.js";import{u as N}from"./use-checkout-context-Bx7evZHb.js";import{F as ye}from"./Fab-CgBh_scu.js";import{S as $}from"./Stack-7h-e6yAT.js";import{P as Ce}from"./product-skeleton-D9VbzDx9.js";import{P as Re,p as Se}from"./Pagination-BdKAEoFn.js";import{F as Pe,a as R,c as S}from"./filters-result-mlfDo3YB.js";import{o as P}from"./orderBy-BP_idRMj.js";import"./styles-D8b8rnOK.js";import"./code-highlight-block-YQG8K_vY.js";import"./preview-single-file-DAd3oWJu.js";import"./carousel-arrow-buttons-CT0W27Pw.js";import"./html-to-markdown-DfHH5kA-.js";import"./index-UwgYw27M.js";import"./zod-B5GKHG6E.js";import"./fields-B53gUzDf.js";import"./Rating-BR8dol5T.js";import"./editor-DYEwp_Gv.js";import"./FormGroup-yYGkv0rT.js";import"./FormControlLabel-BXvztm9I.js";import"./index-DWKsHr_b.js";import"./index-Chjiymov.js";import"./Checkbox-D-eTL2vR.js";import"./upload-Ch5UFSCV.js";import"./index-DGt-RZrN.js";import"./DatePicker-BUn93AuB.js";import"./DialogActions-CNc7tTfu.js";import"./DialogContent-Byx-1axF.js";import"./dialogTitleClasses-Bbkpp0St.js";import"./schema-helper-CN5fZ2XK.js";import"./form-provider-BQ6XSOiV.js";import"./number-input-DQ22OHLr.js";import"./DialogTitle-6_KxcEEQ.js";import"./Skeleton-BPvFbs9h.js";import"./LastPage-Cv1LM9EA.js";function Ie({product:t,detailsHref:d}){const{onAddToCart:a}=N(),{id:r,name:s,coverUrl:h,price:l,colors:n,available:x,sizes:u,priceSale:c,newLabel:i,saleLabel:p}=t,o=async()=>{const b={id:r,name:s,coverUrl:h,available:x,price:l,colors:[n[0]],size:u[0],quantity:1};try{a(b)}catch(y){console.error(y)}},m=()=>(i.enabled||p.enabled)&&e.jsxs(f,{sx:{gap:1,top:16,zIndex:9,right:16,display:"flex",position:"absolute",alignItems:"center"},children:[i.enabled&&e.jsx(v,{variant:"filled",color:"info",children:i.content}),p.enabled&&e.jsx(v,{variant:"filled",color:"error",children:p.content})]}),j=()=>e.jsxs(f,{sx:{position:"relative",p:1},children:[!!x&&e.jsx(ye,{size:"medium",color:"warning",onClick:o,sx:[b=>({right:16,zIndex:9,bottom:16,opacity:0,position:"absolute",transform:"scale(0)",transition:b.transitions.create(["opacity","transform"],{easing:b.transitions.easing.easeInOut,duration:b.transitions.duration.shorter})})],children:e.jsx(O,{icon:"solar:cart-plus-bold",width:24})}),e.jsx(w,{title:!x&&"Out of stock",placement:"bottom-end",children:e.jsx(je,{alt:s,src:h,ratio:"1/1",sx:{borderRadius:1.5,...!x&&{opacity:.48,filter:"grayscale(1)"}}})})]}),I=()=>e.jsxs($,{spacing:2.5,sx:{p:3,pt:2},children:[e.jsx(T,{component:A,href:d,color:"inherit",variant:"subtitle2",noWrap:!0,children:s}),e.jsxs(f,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(w,{title:"Color",children:e.jsx(be,{colors:n})}),e.jsxs(f,{sx:{gap:.5,display:"flex",typography:"subtitle1"},children:[c&&e.jsx(f,{component:"span",sx:{color:"text.disabled",textDecoration:"line-through"},children:k(c)}),e.jsx(f,{component:"span",children:k(l)})]})]})]});return e.jsxs(W,{sx:{"&:hover":{[`& .${z.root}`]:{opacity:1,transform:"scale(1)"}}},children:[m(),j(),I()]})}function Oe({products:t,loading:d,sx:a,...r}){const s=()=>e.jsx(Ce,{}),h=()=>t.map(l=>e.jsx(Ie,{product:l,detailsHref:E.product.details(l.id)},l.id));return e.jsxs(e.Fragment,{children:[e.jsx(f,{sx:[()=>({gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"}}),...Array.isArray(a)?a:[a]],...r,children:d?s():h()}),t.length>8&&e.jsx(Re,{count:8,sx:{mt:{xs:5,md:8},[`& .${Se.ul}`]:{justifyContent:"center"}}})]})}function ve({sort:t,onSort:d,sortOptions:a}){var l;const r=B(),s=(l=a.find(n=>n.value===t))==null?void 0:l.label,h=()=>e.jsx(U,{open:r.open,anchorEl:r.anchorEl,onClose:r.onClose,children:e.jsx(M,{children:a.map(n=>e.jsx(Q,{selected:n.value===t,onClick:()=>{r.onClose(),d(n.value)},children:n.label},n.value))})});return e.jsxs(e.Fragment,{children:[e.jsxs(G,{disableRipple:!0,color:"inherit",onClick:r.onOpen,endIcon:e.jsx(O,{icon:r.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold"},children:["Sort by:",e.jsx(f,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:s})]}),h()]})}function we({redirectPath:t,sx:d}){const a=V(),[r,s]=g.useState(""),[h,l]=g.useState(null),n=q(r),{searchResults:x,searchLoading:u}=le(n),c=g.useCallback(o=>{l(o),o&&a.push(t(o.id))},[t,a]),i=H({matchFrom:"any",stringify:o=>`${o.name} ${o.sku}`}),p={width:320,[`& .${F.listbox}`]:{[`& .${F.option}`]:{p:0,[`& .${Y.root}`]:{p:.75,gap:1.5,width:1,display:"flex",alignItems:"center"}}}};return e.jsx(J,{autoHighlight:!0,popupIcon:null,loading:u,options:x,value:h,filterOptions:i,onChange:(o,m)=>c(m),onInputChange:(o,m)=>s(m),getOptionLabel:o=>o.name,noOptionsText:e.jsx(re,{query:n}),isOptionEqualToValue:(o,m)=>o.id===m.id,slotProps:{paper:{sx:p}},sx:[{width:{xs:1,sm:260}},...Array.isArray(d)?d:[d]],renderInput:o=>e.jsx(D,{...o,placeholder:"Search...",slotProps:{input:{...o.InputProps,startAdornment:e.jsx(te,{position:"start",children:e.jsx(O,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[u?e.jsx(ee,{size:18,color:"inherit",sx:{mr:-3}}):null,o.InputProps.endAdornment]})}}}),renderOption:(o,m,{inputValue:j})=>{const I=K(m.name,j),b=X(m.name,I);return g.createElement("li",{...o,key:m.id},e.jsxs(T,{component:A,href:t(m.id),color:"inherit",underline:"none",children:[e.jsx(Z,{alt:m.name,src:m.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,borderRadius:1}},m.id),e.jsx("div",{children:b.map((y,_)=>e.jsx(L,{component:"span",color:y.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:y.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:y.text},_))},j)]}))}})}function Fe({filters:t,totalResults:d,sx:a}){const{state:r,setState:s,resetState:h}=t,l=g.useCallback(i=>{const p=r.gender.filter(o=>o!==i);s({gender:p})},[s,r.gender]),n=g.useCallback(()=>{s({category:"all"})},[s]),x=g.useCallback(i=>{const p=r.colors.filter(o=>o!==i);s({colors:p})},[s,r.colors]),u=g.useCallback(()=>{s({priceRange:[0,200]})},[s]),c=g.useCallback(()=>{s({rating:""})},[s]);return e.jsxs(Pe,{totalResults:d,onReset:()=>h(),sx:a,children:[e.jsx(R,{label:"Gender:",isShow:!!r.gender.length,children:r.gender.map(i=>g.createElement(C,{...S,key:i,label:i,onDelete:()=>l(i)}))}),e.jsx(R,{label:"Category:",isShow:r.category!=="all",children:e.jsx(C,{...S,label:r.category,onDelete:n})}),e.jsx(R,{label:"Colors:",isShow:!!r.colors.length,children:r.colors.map(i=>g.createElement(C,{...S,key:i,label:e.jsx(f,{sx:[p=>({ml:-.5,width:18,height:18,bgcolor:i,borderRadius:"50%",border:`solid 1px ${se(p.vars.palette.common.whiteChannel,.24)}`})]}),onDelete:()=>x(i)}))}),e.jsx(R,{label:"Price:",isShow:r.priceRange[0]!==0||r.priceRange[1]!==200,children:e.jsx(C,{...S,label:`$${r.priceRange[0]} - ${r.priceRange[1]}`,onDelete:u})}),e.jsx(R,{label:"Rating:",isShow:!!r.rating,children:e.jsx(C,{...S,label:r.rating,onDelete:c})})]})}function ke({products:t,loading:d}){const{state:a}=N(),r=oe(),[s,h]=g.useState("featured"),l=ne({gender:[],colors:[],rating:"",category:"all",priceRange:[0,200]}),{state:n}=l,x=Te({inputData:t,filters:n,sortBy:s}),u=n.gender.length>0||n.colors.length>0||n.rating!==""||n.category!=="all"||n.priceRange[0]!==0||n.priceRange[1]!==200,c=!x.length&&u,i=!d&&!t.length,p=()=>e.jsxs(f,{sx:{gap:3,display:"flex",justifyContent:"space-between",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-end",sm:"center"}},children:[e.jsx(we,{redirectPath:j=>E.product.details(j)}),e.jsxs(f,{sx:{gap:1,flexShrink:0,display:"flex"},children:[e.jsx(de,{filters:l,canReset:u,open:r.value,onOpen:r.onTrue,onClose:r.onFalse,options:{colors:xe,ratings:he,genders:me,categories:["all",...pe]}}),e.jsx(ve,{sort:s,onSort:j=>h(j),sortOptions:ue})]})]}),o=()=>e.jsx(Fe,{filters:l,totalResults:x.length}),m=()=>e.jsx(ge,{filled:!0,sx:{py:10}});return e.jsxs(ie,{sx:{mb:10},children:[e.jsx(fe,{totalItems:a.totalItems}),e.jsx(L,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Shop"}),e.jsxs($,{spacing:2.5,sx:{mb:{xs:3,md:5}},children:[p(),u&&o()]}),c||i?m():e.jsx(Oe,{products:x,loading:d})]})}function Te({inputData:t,filters:d,sortBy:a}){const{gender:r,category:s,colors:h,priceRange:l,rating:n}=d,x=l[0],u=l[1];return a==="featured"&&(t=P(t,["totalSold"],["desc"])),a==="newest"&&(t=P(t,["createdAt"],["desc"])),a==="priceDesc"&&(t=P(t,["price"],["desc"])),a==="priceAsc"&&(t=P(t,["price"],["asc"])),r.length&&(t=t.filter(c=>c.gender.some(i=>r.includes(i)))),s!=="all"&&(t=t.filter(c=>c.category===s)),h.length&&(t=t.filter(c=>c.colors.some(i=>h.includes(i)))),(x!==0||u!==200)&&(t=t.filter(c=>c.price>=x&&c.price<=u)),n&&(t=t.filter(c=>{const i=p=>p==="up4Star"?4:p==="up3Star"?3:p==="up2Star"?2:1;return c.totalRatings>i(n)})),t}const Ae={title:`Trang sản phẩm - ${ae.appName}`};function Ct(){const{products:t,productsLoading:d}=ce();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:Ae.title}),e.jsx(ke,{products:t,loading:d})]})}export{Ct as default};
