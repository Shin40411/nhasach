import{g as m,j as e,dr as T,B as l,M as d}from"./index-usks_mw-.js";import{s as N,z as r}from"./zod-RlOVw4MX.js";import{u as S}from"./styles-CfUPITlh.js";import{F as t,i as C}from"./fields-C0p86-nh.js";import"./preview-single-file-BDCIPO5I.js";import"./code-highlight-block-BPaUgu3R.js";import{s as c}from"./schema-helper-nSaw4j_a.js";import{F as D}from"./form-provider-BBryKxXX.js";import{D as A}from"./DialogTitle-B2IaybZq.js";import{D as v}from"./DialogContent-hfRIofTz.js";import{S as w}from"./Stack-CgODRvvD.js";import{D as F}from"./DialogActions-tMlZhSgp.js";const G=r.object({name:r.string().min(1,{message:"Họ và tên là trường bắt buộc!"}),address:r.string().min(1,{message:"Địa chỉ là trường bắt buộc!"}),phoneNumber:c.phoneNumber({isValid:C}),country:c.nullableInput(r.string()),city:r.string(),state:r.string(),zipCode:r.string(),primary:r.boolean(),addressType:r.string()});function P({open:u,onClose:n,onCreate:p}){const h={name:"",city:"",state:"",address:"",zipCode:"",country:"",primary:!0,phoneNumber:"",addressType:"Nhà"},o=S({mode:"all",resolver:N(G),defaultValues:h}),{handleSubmit:x,formState:{isSubmitting:g}}=o,[b,y]=m.useState(!1);m.useEffect(()=>{y(JSON.parse(localStorage.getItem("addresses")||"[]").some(i=>i.primary===!0))},[]);const f=x(async s=>{try{const a={name:s.name,phoneNumber:s.phoneNumber,fullAddress:`${s.address}, ${s.city}, ${s.state}, ${s.country}, ${s.zipCode}`,addressType:s.addressType,primary:s.primary},j=[...JSON.parse(localStorage.getItem("addresses")||"[]"),a];localStorage.setItem("addresses",JSON.stringify(j)),p(a),n()}catch(a){console.error(a)}});return e.jsx(T,{fullWidth:!0,maxWidth:"sm",open:u,onClose:n,children:e.jsxs(D,{methods:o,onSubmit:f,children:[e.jsx(A,{children:"Thêm địa chỉ mới"}),e.jsx(v,{dividers:!0,children:e.jsxs(w,{spacing:3,children:[e.jsx(t.RadioGroup,{row:!0,name:"addressType",options:[{label:"Nhà",value:"Nhà"},{label:"Cơ quan",value:"Cơ quan"}]}),e.jsxs(l,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[e.jsx(t.Text,{name:"name",label:"Họ và tên"}),e.jsx(t.Phone,{name:"phoneNumber",label:"Số điện thoại",country:"VN"})]}),e.jsx(t.Text,{name:"address",label:"Địa chỉ"}),e.jsxs(l,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"}},children:[e.jsx(t.Text,{name:"city",label:"Thành phố/Thị xã"}),e.jsx(t.Text,{name:"state",label:"Tỉnh/Quận"}),e.jsx(t.Text,{name:"zipCode",label:"Mã bưu điện"})]}),e.jsx(t.CountrySelect,{name:"country",hidden:!0,label:"Country",placeholder:"Choose a country"}),!b&&e.jsx(t.Checkbox,{name:"primary",label:"Dùng địa chỉ này làm mặc định"})]})}),e.jsxs(F,{children:[e.jsx(d,{color:"inherit",variant:"outlined",onClick:n,children:"Huỷ bỏ"}),e.jsx(d,{type:"submit",variant:"contained",loading:g,children:"Giao tới địa chỉ này"})]})]})})}export{P as A};
