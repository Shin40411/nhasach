import{j as e,B as f,I as u,dR as B,E as $,T as ae,cl as M,O as _,A as oe,cq as R,V as re,R as A,eE as L,dx as N,L as U,Z as y,dO as G,co as K,cp as C,D as Y,M as E,g as b,ci as ne,cx as ie,cw as ce,fc as de,e2 as pe,b5 as he,Y as xe,ct as T,fh as me,bN as ue,fm as je,dS as be,fj as ge,dV as O,eh as fe,dH as ve,W as D,z as W,dY as z,cD as Ce,cC as ye,fn as De,dN as P,fl as Se,x as ke}from"./index-D6bpUwKX.js";import{C as q}from"./confirm-dialog-B7H0ptp_.js";import{u as we,g as Te,r as Pe,T as Fe,e as Ie,a as Ae,b as Re}from"./table-pagination-custom-Brcw_a1V.js";import{T as Ee}from"./table-empty-rows-Cruyv86H.js";import{T as Be}from"./table-head-custom-sEcjNvfC.js";import{b as Le,c as J}from"./format-number-Cj8l_lI8.js";import{T as Ne,a as Oe,b as We}from"./TableHead-BR3Xtr2P.js";import{T as v}from"./TableCell-ceTMykc4.js";import{C as Z}from"./Checkbox-D-eTL2vR.js";import{J as V}from"./DatePicker-BUn93AuB.js";import{F as ze,a as F,c as I}from"./filters-result-mlfDo3YB.js";import{S as Ve}from"./Stack-7h-e6yAT.js";import{s as H}from"./sumBy-ofy1HSRF.js";import"./invoice-pdf-BQFKXpF7.js";import"./DialogTitle-6_KxcEEQ.js";import"./dialogTitleClasses-Bbkpp0St.js";import"./DialogContent-Byx-1axF.js";import"./DialogActions-CNc7tTfu.js";import"./empty-content-DB3Nbb7N.js";import"./TablePagination-DGXdPpes.js";import"./LastPage-Cv1LM9EA.js";import"./FormControlLabel-BXvztm9I.js";import"./index-DWKsHr_b.js";import"./index-Chjiymov.js";import"./zod-B5GKHG6E.js";import"./styles-D8b8rnOK.js";import"./code-highlight-block-YQG8K_vY.js";import"./preview-single-file-DAd3oWJu.js";import"./schema-helper-CN5fZ2XK.js";import"./form-provider-BQ6XSOiV.js";import"./address-new-form-DmH_4sLH.js";import"./fields-B53gUzDf.js";import"./Rating-BR8dol5T.js";import"./editor-DYEwp_Gv.js";import"./FormGroup-yYGkv0rT.js";import"./upload-Ch5UFSCV.js";import"./index-DGt-RZrN.js";import"./image-FIum-Rwa.js";import"./address-list-dialog-hGEpCB8j.js";function S({title:s,total:t,icon:d,color:r,percent:o,price:i}){return e.jsxs(f,{sx:{width:1,gap:2.5,minWidth:200,display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsxs(f,{sx:{display:"flex",position:"relative",alignItems:"center",justifyContent:"center"},children:[e.jsx(u,{icon:d,width:32,sx:{color:r,position:"absolute"}}),e.jsx(B,{size:56,thickness:2,value:o,variant:"determinate",sx:{color:r,opacity:.48}}),e.jsx(B,{size:56,value:100,thickness:3,variant:"determinate",sx:[l=>({top:0,left:0,opacity:.48,position:"absolute",color:$(l.vars.palette.grey["500Channel"],.16)})]})]}),e.jsxs("div",{children:[e.jsx(ae,{variant:"subtitle1",children:s}),e.jsxs(f,{component:"span",sx:{my:.5,display:"block",typography:"body2",color:"text.disabled"},children:[Le(t)," invoices"]}),e.jsx(f,{component:"span",sx:{typography:"subtitle2"},children:J(i)})]})]})}function He({row:s,selected:t,editHref:d,onSelectRow:r,onDeleteRow:o,detailsHref:i}){const l=M(),j=_(),g=()=>e.jsx(G,{open:l.open,anchorEl:l.anchorEl,onClose:l.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(K,{children:[e.jsx("li",{children:e.jsxs(C,{component:A,href:i,onClick:l.onClose,children:[e.jsx(u,{icon:"solar:eye-bold"}),"View"]})}),e.jsx("li",{children:e.jsxs(C,{component:A,href:d,onClick:l.onClose,children:[e.jsx(u,{icon:"solar:pen-bold"}),"Edit"]})}),e.jsx(Y,{sx:{borderStyle:"dashed"}}),e.jsxs(C,{onClick:()=>{j.onTrue(),l.onClose()},sx:{color:"error.main"},children:[e.jsx(u,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),p=()=>e.jsx(q,{open:j.value,onClose:j.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(E,{variant:"contained",color:"error",onClick:o,children:"Delete"})});return e.jsxs(e.Fragment,{children:[e.jsxs(Ne,{hover:!0,selected:t,children:[e.jsx(v,{padding:"checkbox",children:e.jsx(Z,{checked:t,onClick:r,slotProps:{input:{id:`${s.id}-checkbox`,"aria-label":`${s.id} checkbox`}}})}),e.jsx(v,{children:e.jsxs(f,{sx:{gap:2,display:"flex",alignItems:"center"},children:[e.jsx(oe,{alt:s.invoiceTo.name,children:s.invoiceTo.name.charAt(0).toUpperCase()}),e.jsx(R,{primary:s.invoiceTo.name,secondary:e.jsx(re,{component:A,href:i,color:"inherit",children:s.invoiceNumber}),slotProps:{primary:{noWrap:!0,sx:{typography:"body2"}},secondary:{sx:{color:"text.disabled","&:hover":{color:"text.secondary"}}}}})]})}),e.jsx(v,{children:e.jsx(R,{primary:N(s.createDate),secondary:L(s.createDate),slotProps:{primary:{noWrap:!0,sx:{typography:"body2"}},secondary:{sx:{mt:.5,typography:"caption"}}}})}),e.jsx(v,{children:e.jsx(R,{primary:N(s.dueDate),secondary:L(s.dueDate),slotProps:{primary:{noWrap:!0,sx:{typography:"body2"}},secondary:{sx:{mt:.5,typography:"caption"}}}})}),e.jsx(v,{children:J(s.totalAmount)}),e.jsx(v,{align:"center",children:s.sent}),e.jsx(v,{children:e.jsx(U,{variant:"soft",color:s.status==="paid"&&"success"||s.status==="pending"&&"warning"||s.status==="overdue"&&"error"||"default",children:s.status})}),e.jsx(v,{align:"right",sx:{px:1},children:e.jsx(y,{color:l.open?"inherit":"default",onClick:l.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})})]}),g(),p()]})}function $e({filters:s,options:t,dateError:d,onResetPage:r}){const o=M(),{state:i,setState:l}=s,j=b.useCallback(n=>{r(),l({name:n.target.value})},[r,l]),g=b.useCallback(n=>{const x=typeof n.target.value=="string"?n.target.value.split(","):n.target.value;r(),l({service:x})},[r,l]),p=b.useCallback(n=>{r(),l({startDate:n})},[r,l]),c=b.useCallback(n=>{r(),l({endDate:n})},[r,l]),h=()=>e.jsx(G,{open:o.open,anchorEl:o.anchorEl,onClose:o.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(K,{children:[e.jsxs(C,{onClick:()=>o.onClose(),children:[e.jsx(u,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(C,{onClick:()=>o.onClose(),children:[e.jsx(u,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(C,{onClick:()=>o.onClose(),children:[e.jsx(u,{icon:"solar:export-bold"}),"Export"]})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(f,{sx:{p:2.5,gap:2,display:"flex",pr:{xs:2.5,md:1},flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"}},children:[e.jsxs(ne,{sx:{flexShrink:0,width:{xs:1,md:180}},children:[e.jsx(ie,{htmlFor:"filter-service-select",children:"Service"}),e.jsx(ce,{multiple:!0,value:i.service,onChange:g,input:e.jsx(de,{label:"Service"}),renderValue:n=>n.map(x=>x).join(", "),inputProps:{id:"filter-service-select"},sx:{textTransform:"capitalize"},children:t.services.map(n=>e.jsxs(C,{value:n,children:[e.jsx(Z,{disableRipple:!0,size:"small",checked:i.service.includes(n),slotProps:{input:{id:`${n}-checkbox`,"aria-label":`${n} checkbox`}}}),n]},n))})]}),e.jsx(V,{label:"Start date",value:i.endDate,onChange:p,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:180}}}),e.jsx(V,{label:"End date",value:i.endDate,onChange:c,slotProps:{textField:{fullWidth:!0,error:d,helperText:d?"End date must be later than start date":null}},sx:{maxWidth:{md:180},[`& .${pe.root}`]:{bottom:{md:-40},position:{md:"absolute"}}}}),e.jsxs(f,{sx:{gap:2,width:1,flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(he,{fullWidth:!0,value:i.name,onChange:j,placeholder:"Search customer or invoice number...",slotProps:{input:{startAdornment:e.jsx(xe,{position:"start",children:e.jsx(u,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}}),e.jsx(y,{onClick:o.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})]})]}),h()]})}function Me({filters:s,totalResults:t,onResetPage:d,sx:r}){const{state:o,setState:i,resetState:l}=s,j=b.useCallback(()=>{d(),i({name:""})},[d,i]),g=b.useCallback(h=>{const n=o.service.filter(x=>x!==h);d(),i({service:n})},[d,i,o.service]),p=b.useCallback(()=>{d(),i({status:"all"})},[d,i]),c=b.useCallback(()=>{d(),i({startDate:null,endDate:null})},[d,i]);return e.jsxs(ze,{totalResults:t,onReset:()=>l(),sx:r,children:[e.jsx(F,{label:"Service:",isShow:!!o.service.length,children:o.service.map(h=>b.createElement(T,{...I,key:h,label:h,onDelete:()=>g(h)}))}),e.jsx(F,{label:"Status:",isShow:o.status!=="all",children:e.jsx(T,{...I,label:o.status,onDelete:p,sx:{textTransform:"capitalize"}})}),e.jsx(F,{label:"Date:",isShow:!!(o.startDate&&o.endDate),children:e.jsx(T,{...I,label:me(o.startDate,o.endDate),onDelete:c})}),e.jsx(F,{label:"Keyword:",isShow:!!o.name,children:e.jsx(T,{...I,label:o.name,onDelete:j})})]})}const _e=[{id:"invoiceNumber",label:"Customer"},{id:"createDate",label:"Create"},{id:"dueDate",label:"Due"},{id:"price",label:"Amount"},{id:"sent",label:"Sent",align:"center"},{id:"status",label:"Status"},{id:""}];function Ue(){const s=ue(),t=we({defaultOrderBy:"createDate"}),d=_(),[r,o]=b.useState(je),i=be({name:"",service:[],status:"all",startDate:null,endDate:null}),{state:l,setState:j}=i,g=ge(l.startDate,l.endDate),p=Ge({inputData:r,comparator:Te(t.order,t.orderBy),filters:l,dateError:g}),c=Pe(p,t.page,t.rowsPerPage),h=!!l.name||l.service.length>0||l.status!=="all"||!!l.startDate&&!!l.endDate,n=!p.length&&h||!p.length,x=a=>r.filter(m=>m.status===a).length,k=a=>H(r.filter(m=>m.status===a),m=>m.totalAmount),w=a=>x(a)/r.length*100,Q=[{value:"all",label:"All",color:"default",count:r.length},{value:"paid",label:"Paid",color:"success",count:x("paid")},{value:"pending",label:"Pending",color:"warning",count:x("pending")},{value:"overdue",label:"Overdue",color:"error",count:x("overdue")},{value:"draft",label:"Draft",color:"default",count:x("draft")}],X=b.useCallback(a=>{const m=r.filter(le=>le.id!==a);O.success("Delete success!"),o(m),t.onUpdatePageDeleteRow(c.length)},[c.length,t,r]),ee=b.useCallback(()=>{const a=r.filter(m=>!t.selected.includes(m.id));O.success("Delete success!"),o(a),t.onUpdatePageDeleteRows(c.length,p.length)},[p.length,c.length,t,r]),te=b.useCallback((a,m)=>{t.onResetPage(),j({status:m})},[j,t]),se=()=>e.jsx(q,{open:d.value,onClose:d.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:e.jsx(E,{variant:"contained",color:"error",onClick:()=>{ee(),d.onFalse()},children:"Delete"})});return e.jsxs(e.Fragment,{children:[e.jsxs(fe,{children:[e.jsx(ve,{heading:"List",links:[{name:"Dashboard",href:D.dashboard.root},{name:"Invoice",href:D.dashboard.invoice.root},{name:"List"}],action:e.jsx(E,{component:A,href:D.dashboard.invoice.new,variant:"contained",startIcon:e.jsx(u,{icon:"mingcute:add-line"}),children:"New invoice"}),sx:{mb:{xs:3,md:5}}}),e.jsx(W,{sx:{mb:{xs:3,md:5}},children:e.jsx(z,{sx:{minHeight:108},children:e.jsxs(Ve,{divider:e.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2,flexDirection:"row"},children:[e.jsx(S,{title:"Total",total:r.length,percent:100,price:H(r,a=>a.totalAmount),icon:"solar:bill-list-bold-duotone",color:s.vars.palette.info.main}),e.jsx(S,{title:"Paid",total:x("paid"),percent:w("paid"),price:k("paid"),icon:"solar:file-check-bold-duotone",color:s.vars.palette.success.main}),e.jsx(S,{title:"Pending",total:x("pending"),percent:w("pending"),price:k("pending"),icon:"solar:sort-by-time-bold-duotone",color:s.vars.palette.warning.main}),e.jsx(S,{title:"Overdue",total:x("overdue"),percent:w("overdue"),price:k("overdue"),icon:"solar:bell-bing-bold-duotone",color:s.vars.palette.error.main}),e.jsx(S,{title:"Draft",total:x("draft"),percent:w("draft"),price:k("draft"),icon:"solar:file-corrupted-bold-duotone",color:s.vars.palette.text.secondary})]})})}),e.jsxs(W,{children:[e.jsx(Ce,{value:l.status,onChange:te,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${$(s.vars.palette.grey["500Channel"],.08)}`},children:Q.map(a=>e.jsx(ye,{value:a.value,label:a.label,iconPosition:"end",icon:e.jsx(U,{variant:(a.value==="all"||a.value===l.status)&&"filled"||"soft",color:a.color,children:a.count})},a.value))}),e.jsx($e,{filters:i,dateError:g,onResetPage:t.onResetPage,options:{services:De.map(a=>a.name)}}),h&&e.jsx(Me,{filters:i,onResetPage:t.onResetPage,totalResults:p.length,sx:{p:2.5,pt:0}}),e.jsxs(f,{sx:{position:"relative"},children:[e.jsx(Fe,{dense:t.dense,numSelected:t.selected.length,rowCount:p.length,onSelectAllRows:a=>{t.onSelectAllRows(a,p.map(m=>m.id))},action:e.jsxs(f,{sx:{display:"flex"},children:[e.jsx(P,{title:"Sent",children:e.jsx(y,{color:"primary",children:e.jsx(u,{icon:"custom:send-fill"})})}),e.jsx(P,{title:"Download",children:e.jsx(y,{color:"primary",children:e.jsx(u,{icon:"solar:download-bold"})})}),e.jsx(P,{title:"Print",children:e.jsx(y,{color:"primary",children:e.jsx(u,{icon:"solar:printer-minimalistic-bold"})})}),e.jsx(P,{title:"Delete",children:e.jsx(y,{color:"primary",onClick:d.onTrue,children:e.jsx(u,{icon:"solar:trash-bin-trash-bold"})})})]})}),e.jsx(z,{sx:{minHeight:444},children:e.jsxs(Oe,{size:t.dense?"small":"medium",sx:{minWidth:800},children:[e.jsx(Be,{order:t.order,orderBy:t.orderBy,headCells:_e,rowCount:p.length,numSelected:t.selected.length,onSort:t.onSort,onSelectAllRows:a=>t.onSelectAllRows(a,p.map(m=>m.id))}),e.jsxs(We,{children:[p.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(a=>e.jsx(He,{row:a,selected:t.selected.includes(a.id),onSelectRow:()=>t.onSelectRow(a.id),onDeleteRow:()=>X(a.id),editHref:D.dashboard.invoice.edit(a.id),detailsHref:D.dashboard.invoice.details(a.id)},a.id)),e.jsx(Ee,{height:t.dense?56:76,emptyRows:Ie(t.page,t.rowsPerPage,p.length)}),e.jsx(Ae,{notFound:n})]})]})})]}),e.jsx(Re,{page:t.page,dense:t.dense,count:p.length,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onChangeDense:t.onChangeDense,onRowsPerPageChange:t.onChangeRowsPerPage})]})]}),se()]})}function Ge({inputData:s,comparator:t,filters:d,dateError:r}){const{name:o,status:i,service:l,startDate:j,endDate:g}=d,p=s.map((c,h)=>[c,h]);return p.sort((c,h)=>{const n=t(c[0],h[0]);return n!==0?n:c[1]-h[1]}),s=p.map(c=>c[0]),o&&(s=s.filter(({invoiceNumber:c,invoiceTo:h})=>[c,h.name,h.company,h.phoneNumber].some(n=>n==null?void 0:n.toLowerCase().includes(o.toLowerCase())))),i!=="all"&&(s=s.filter(c=>c.status===i)),l.length&&(s=s.filter(c=>c.items.some(h=>l.includes(h.service)))),r||j&&g&&(s=s.filter(c=>Se(c.createDate,j,g))),s}const Ke={title:`Invoice list | Dashboard - ${ke.appName}`};function Et(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:Ke.title}),e.jsx(Ue,{})]})}export{Et as default};
