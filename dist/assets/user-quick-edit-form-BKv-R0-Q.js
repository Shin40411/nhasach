import{H as F,dX as S,O as N,j as e,G as f,t as C,b6 as D,B as x,T as l,cz as E,F as p,dr as z,Q as P,fy as k,cu as U}from"./index-BPi-lj99.js";import{s as T,z as s}from"./zod-B_WTTuJ9.js";import{u as q,C as V}from"./styles-BkVqaM-o.js";import{F as a,i as w}from"./fields-C_OA-jBI.js";import{a as R}from"./format-number-bPxp5Hz3.js";import"./preview-single-file-CNraPjvt.js";import"./code-highlight-block-CqLMdGe8.js";import{s as m}from"./schema-helper-zXJyfLbR.js";import{F as A}from"./form-provider-BxIa1T6o.js";import{F as G}from"./FormControlLabel-CR_hDGs6.js";import{S as v}from"./Stack-qxGgU9sa.js";import{D as I}from"./DialogTitle-B2Gb2OYZ.js";import{D as W}from"./DialogContent-31eqGF97.js";import{D as B}from"./DialogActions-D-kuG3ww.js";const Q=s.object({avatarUrl:m.file({message:"Avatar is required!"}),name:s.string().min(1,{message:"Name is required!"}),email:s.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),phoneNumber:m.phoneNumber({isValid:w}),country:m.nullableInput(s.string().min(1,{message:"Country is required!"}),{message:"Country is required!"}),address:s.string().min(1,{message:"Address is required!"}),company:s.string().min(1,{message:"Company is required!"}),state:s.string().min(1,{message:"State is required!"}),city:s.string().min(1,{message:"City is required!"}),role:s.string().min(1,{message:"Role is required!"}),zipCode:s.string().min(1,{message:"Zip code is required!"}),status:s.string(),isVerified:s.boolean()});function ie({currentUser:t}){const h=F(),n={status:"",avatarUrl:null,isVerified:!0,name:"",email:"",phoneNumber:"",country:"",state:"",city:"",address:"",zipCode:"",company:"",role:""},d=q({mode:"onSubmit",resolver:T(Q),defaultValues:n,values:t}),{reset:c,watch:b,control:g,handleSubmit:j,formState:{isSubmitting:y}}=d,i=b(),u=j(async r=>{try{await new Promise(o=>setTimeout(o,500)),c(),S.success(t?"Update success!":"Create success!"),h.push(N.dashboard.user.list),console.info("DATA",r)}catch(o){console.error(o)}});return e.jsx(A,{methods:d,onSubmit:u,children:e.jsxs(f,{container:!0,spacing:3,children:[e.jsx(f,{size:{xs:12,md:4},children:e.jsxs(C,{sx:{pt:10,pb:5,px:3},children:[t&&e.jsx(D,{color:i.status==="active"&&"success"||i.status==="banned"&&"error"||"warning",sx:{position:"absolute",top:24,right:24},children:i.status}),e.jsx(x,{sx:{mb:5},children:e.jsx(a.UploadAvatar,{name:"avatarUrl",maxSize:3145728,helperText:e.jsxs(l,{variant:"caption",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"text.disabled"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",e.jsx("br",{})," max size of ",R(3145728)]})})}),t&&e.jsx(G,{labelPlacement:"start",control:e.jsx(V,{name:"status",control:g,render:({field:r})=>e.jsx(E,{...r,checked:r.value!=="active",onChange:o=>r.onChange(o.target.checked?"banned":"active")})}),label:e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),e.jsx(l,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}}),e.jsx(a.Switch,{name:"isVerified",labelPlacement:"start",label:e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"subtitle2",sx:{mb:.5},children:"Email verified"}),e.jsx(l,{variant:"body2",sx:{color:"text.secondary"},children:"Disabling this will automatically send the user a verification email"})]}),sx:{mx:0,width:1,justifyContent:"space-between"}}),t&&e.jsx(v,{sx:{mt:3,alignItems:"center",justifyContent:"center"},children:e.jsx(p,{variant:"soft",color:"error",children:"Delete user"})})]})}),e.jsx(f,{size:{xs:12,md:8},children:e.jsxs(C,{sx:{p:3},children:[e.jsxs(x,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[e.jsx(a.Text,{name:"name",label:"Full name"}),e.jsx(a.Text,{name:"email",label:"Email address"}),e.jsx(a.Phone,{name:"phoneNumber",label:"Phone number",country:t?void 0:"DE"}),e.jsx(a.CountrySelect,{fullWidth:!0,name:"country",label:"Country",placeholder:"Choose a country"}),e.jsx(a.Text,{name:"state",label:"State/region"}),e.jsx(a.Text,{name:"city",label:"City"}),e.jsx(a.Text,{name:"address",label:"Address"}),e.jsx(a.Text,{name:"zipCode",label:"Zip/code"}),e.jsx(a.Text,{name:"company",label:"Company"}),e.jsx(a.Text,{name:"role",label:"Role"})]}),e.jsx(v,{sx:{mt:3,alignItems:"flex-end"},children:e.jsx(p,{type:"submit",variant:"contained",loading:y,children:t?"Save changes":"Create user"})})]})})]})})}const Z=s.object({name:s.string().min(1,{message:"Name is required!"}),email:s.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),phoneNumber:m.phoneNumber({isValid:w}),country:m.nullableInput(s.string().min(1,{message:"Country is required!"}),{message:"Country is required!"}),state:s.string().min(1,{message:"State is required!"}),city:s.string().min(1,{message:"City is required!"}),address:s.string().min(1,{message:"Address is required!"}),zipCode:s.string().min(1,{message:"Zip code is required!"}),company:s.string().min(1,{message:"Company is required!"}),role:s.string().min(1,{message:"Role is required!"}),status:s.string()});function re({currentUser:t,open:h,onClose:n}){const d={name:"",email:"",phoneNumber:"",address:"",country:"",state:"",city:"",zipCode:"",status:"",company:"",role:""},c=q({mode:"all",resolver:T(Z),defaultValues:d,values:t}),{reset:b,handleSubmit:g,formState:{isSubmitting:j}}=c,y=g(async i=>{const u=new Promise(r=>setTimeout(r,1e3));try{b(),n(),S.promise(u,{loading:"Loading...",success:"Update success!",error:"Update error!"}),await u,console.info("DATA",i)}catch(r){console.error(r)}});return e.jsxs(z,{fullWidth:!0,maxWidth:!1,open:h,onClose:n,slotProps:{paper:{sx:{maxWidth:720}}},children:[e.jsx(I,{children:"Quick update"}),e.jsxs(A,{methods:c,onSubmit:y,children:[e.jsxs(W,{children:[e.jsx(P,{variant:"outlined",severity:"info",sx:{mb:3},children:"Account is waiting for confirmation"}),e.jsxs(x,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[e.jsx(a.Select,{name:"status",label:"Status",children:k.map(i=>e.jsx(U,{value:i.value,children:i.label},i.value))}),e.jsx(x,{sx:{display:{xs:"none",sm:"block"}}}),e.jsx(a.Text,{name:"name",label:"Full name"}),e.jsx(a.Text,{name:"email",label:"Email address"}),e.jsx(a.Phone,{name:"phoneNumber",label:"Phone number"}),e.jsx(a.CountrySelect,{fullWidth:!0,name:"country",label:"Country",placeholder:"Choose a country"}),e.jsx(a.Text,{name:"state",label:"State/region"}),e.jsx(a.Text,{name:"city",label:"City"}),e.jsx(a.Text,{name:"address",label:"Address"}),e.jsx(a.Text,{name:"zipCode",label:"Zip/code"}),e.jsx(a.Text,{name:"company",label:"Company"}),e.jsx(a.Text,{name:"role",label:"Role"})]})]}),e.jsxs(B,{children:[e.jsx(p,{variant:"outlined",onClick:n,children:"Cancel"}),e.jsx(p,{type:"submit",variant:"contained",loading:j,children:"Update"})]})]})]})}export{re as U,ie as a};
