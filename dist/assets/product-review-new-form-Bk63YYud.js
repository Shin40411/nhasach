import{H as ee,K as E,g as x,dX as se,O as ae,j as e,t as G,bI as M,aQ as $,D as F,T as h,B as c,dY as le,cy as te,U as z,cz as H,F as O,V as W,I as w,bK as V,b4 as re,dZ as ne,dP as ie,d_ as oe,bC as ce,dr as de}from"./index-BPi-lj99.js";import{s as Q,z as a}from"./zod-B_WTTuJ9.js";import{u as X}from"./styles-BkVqaM-o.js";import{F as t,R as ue}from"./fields-C_OA-jBI.js";import"./preview-single-file-CNraPjvt.js";import"./code-highlight-block-CqLMdGe8.js";import{s as k}from"./schema-helper-zXJyfLbR.js";import{F as Z}from"./form-provider-BxIa1T6o.js";import{S as j}from"./Stack-qxGgU9sa.js";import{F as D}from"./FormControlLabel-CR_hDGs6.js";import{a as me}from"./color-preview-CBiDyu2D.js";import{N as xe}from"./number-input-BUMyzRNq.js";import{C as pe}from"./Checkbox-Cb0hcSDN.js";import{R as be}from"./Rating-Bkwu4u_e.js";import{D as he}from"./DialogTitle-B2Gb2OYZ.js";import{D as ge}from"./DialogContent-31eqGF97.js";import{D as je}from"./DialogActions-D-kuG3ww.js";const ve=[{label:"Men",value:"Men"},{label:"Women",value:"Women"},{label:"Kids",value:"Kids"}],Me=["Shose","Apparel","Accessories"],$e=["up4Star","up3Star","up2Star","up1Star"],ze=["#FF4842","#1890FF","#FFC0CB","#00AB55","#FFC107","#7F00FF","#000000","#FFFFFF"],fe=[{value:"#FF4842",label:"Red"},{value:"#1890FF",label:"Blue"},{value:"#FFC0CB",label:"Pink"},{value:"#00AB55",label:"Green"},{value:"#FFC107",label:"Yellow"},{value:"#7F00FF",label:"Violet"},{value:"#000000",label:"Black"},{value:"#FFFFFF",label:"White"}],Ce=[{value:"7",label:"7"},{value:"8",label:"8"},{value:"8.5",label:"8.5"},{value:"9",label:"9"},{value:"9.5",label:"9.5"},{value:"10",label:"10"},{value:"10.5",label:"10.5"},{value:"11",label:"11"},{value:"11.5",label:"11.5"},{value:"12",label:"12"},{value:"13",label:"13"}],We=[{value:"in stock",label:"In stock"},{value:"low stock",label:"Low stock"},{value:"out of stock",label:"Out of stock"}],He=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],Ve=[{value:"featured",label:"Featured"},{value:"newest",label:"Newest"},{value:"priceDesc",label:"Price: High - Low"},{value:"priceAsc",label:"Price: Low - High"}],K=[{group:"Clothing",classify:["Shirts","T-shirts","Jeans","Leather","Accessories"]},{group:"Tailored",classify:["Suits","Blazers","Trousers","Waistcoats","Apparel"]},{group:"Accessories",classify:["Shoes","Backpacks and bags","Bracelets","Face masks"]}],Te=a.object({name:a.string().min(1,{message:"Name is required!"}),description:k.editor({message:"Description is required!"}).min(100,{message:"Description must be at least 100 characters"}).max(500,{message:"Description must be less than 500 characters"}),images:k.files({message:"Images is required!"}),code:a.string().min(1,{message:"Product code is required!"}),sku:a.string().min(1,{message:"Product sku is required!"}),quantity:k.nullableInput(a.number({coerce:!0}).min(1,{message:"Quantity is required!"}),{message:"Quantity is required!"}),colors:a.string().array().min(1,{message:"Choose at least one option!"}),sizes:a.string().array().min(1,{message:"Choose at least one option!"}),tags:a.string().array().min(2,{message:"Must have at least 2 items!"}),gender:a.array(a.string()).min(1,{message:"Choose at least one option!"}),price:k.nullableInput(a.number({coerce:!0}).min(1,{message:"Price is required!"}),{message:"Price is required!"}),category:a.string(),subDescription:a.string(),taxes:a.number({coerce:!0}).nullable(),priceSale:a.number({coerce:!0}).nullable(),saleLabel:a.object({enabled:a.boolean(),content:a.string()}),newLabel:a.object({enabled:a.boolean(),content:a.string()})});function Ke({currentProduct:d}){const p=ee(),o=E(!0),i=E(!0),u=E(!0),[b,n]=x.useState(!1),l={name:"",description:"",subDescription:"",images:[],code:"",sku:"",price:null,taxes:null,priceSale:null,quantity:null,tags:[],gender:[],category:K[0].classify[1],colors:[],sizes:[],newLabel:{enabled:!1,content:""},saleLabel:{enabled:!1,content:""}},T=X({resolver:Q(Te),defaultValues:l,values:d}),{reset:y,watch:v,setValue:P,handleSubmit:I,formState:{isSubmitting:A}}=T,f=v(),L=I(async r=>{const m={...r,taxes:b?l.taxes:r.taxes};try{await new Promise(g=>setTimeout(g,500)),y(),se.success(d?"Update success!":"Create success!"),p.push(ae.dashboard.product.root),console.info("DATA",m)}catch(g){console.error(g)}}),_=x.useCallback(r=>{var g;const m=f.images&&((g=f.images)==null?void 0:g.filter(q=>q!==r));P("images",m)},[P,f.images]),N=x.useCallback(()=>{P("images",[],{shouldValidate:!0})},[P]),B=x.useCallback(r=>{n(r.target.checked)},[]),S=(r,m)=>e.jsx(W,{onClick:m,children:e.jsx(w,{icon:r?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill"})}),s=()=>e.jsxs(G,{children:[e.jsx(M,{title:"Details",subheader:"Title, short description, image...",action:S(o.value,o.onToggle),sx:{mb:3}}),e.jsxs($,{in:o.value,children:[e.jsx(F,{}),e.jsxs(j,{spacing:3,sx:{p:3},children:[e.jsx(t.Text,{name:"name",label:"Product name"}),e.jsx(t.Text,{name:"subDescription",label:"Sub description",multiline:!0,rows:4}),e.jsxs(j,{spacing:1.5,children:[e.jsx(h,{variant:"subtitle2",children:"Content"}),e.jsx(t.Editor,{name:"description",sx:{maxHeight:480}})]}),e.jsxs(j,{spacing:1.5,children:[e.jsx(h,{variant:"subtitle2",children:"Images"}),e.jsx(t.Upload,{multiple:!0,thumbnail:!0,name:"images",maxSize:3145728,onRemove:_,onRemoveAll:N,onUpload:()=>console.info("ON UPLOAD")})]})]})]})]}),C=()=>e.jsxs(G,{children:[e.jsx(M,{title:"Properties",subheader:"Additional functions and attributes...",action:S(i.value,i.onToggle),sx:{mb:3}}),e.jsxs($,{in:i.value,children:[e.jsx(F,{}),e.jsxs(j,{spacing:3,sx:{p:3},children:[e.jsxs(c,{sx:{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"}},children:[e.jsx(t.Text,{name:"code",label:"Product code"}),e.jsx(t.Text,{name:"sku",label:"Product SKU"}),e.jsx(t.Text,{name:"quantity",label:"Quantity",placeholder:"0",type:"number",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(t.Select,{name:"category",label:"Category",slotProps:{select:{native:!0},inputLabel:{shrink:!0}},children:K.map(r=>e.jsx("optgroup",{label:r.group,children:r.classify.map(m=>e.jsx("option",{value:m,children:m},m))},r.group))}),e.jsx(t.MultiSelect,{checkbox:!0,name:"colors",label:"Colors",options:fe}),e.jsx(t.MultiSelect,{checkbox:!0,name:"sizes",label:"Sizes",options:Ce})]}),e.jsx(t.Autocomplete,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,disableCloseOnSelect:!0,options:le.map(r=>r),getOptionLabel:r=>r,renderOption:(r,m)=>x.createElement("li",{...r,key:m},m),renderTags:(r,m)=>r.map((g,q)=>x.createElement(te,{...m({index:q}),key:g,label:g,size:"small",color:"info",variant:"soft"}))}),e.jsxs(j,{spacing:1,children:[e.jsx(h,{variant:"subtitle2",children:"Gender"}),e.jsx(t.MultiCheckbox,{row:!0,name:"gender",options:ve,sx:{gap:2}})]}),e.jsx(F,{sx:{borderStyle:"dashed"}}),e.jsxs(c,{sx:{gap:3,display:"flex",alignItems:"center"},children:[e.jsx(t.Switch,{name:"saleLabel.enabled",label:null,sx:{m:0}}),e.jsx(t.Text,{name:"saleLabel.content",label:"Sale label",fullWidth:!0,disabled:!f.saleLabel.enabled})]}),e.jsxs(c,{sx:{gap:3,display:"flex",alignItems:"center"},children:[e.jsx(t.Switch,{name:"newLabel.enabled",label:null,sx:{m:0}}),e.jsx(t.Text,{name:"newLabel.content",label:"New label",fullWidth:!0,disabled:!f.newLabel.enabled})]})]})]})]}),U=()=>e.jsxs(G,{children:[e.jsx(M,{title:"Pricing",subheader:"Price related inputs",action:S(u.value,u.onToggle),sx:{mb:3}}),e.jsxs($,{in:u.value,children:[e.jsx(F,{}),e.jsxs(j,{spacing:3,sx:{p:3},children:[e.jsx(t.Text,{name:"price",label:"Regular price",placeholder:"0.00",type:"number",slotProps:{inputLabel:{shrink:!0},input:{startAdornment:e.jsx(z,{position:"start",sx:{mr:.75},children:e.jsx(c,{component:"span",sx:{color:"text.disabled"},children:"$"})})}}}),e.jsx(t.Text,{name:"priceSale",label:"Sale price",placeholder:"0.00",type:"number",slotProps:{inputLabel:{shrink:!0},input:{startAdornment:e.jsx(z,{position:"start",sx:{mr:.75},children:e.jsx(c,{component:"span",sx:{color:"text.disabled"},children:"$"})})}}}),e.jsx(D,{control:e.jsx(H,{id:"toggle-taxes",checked:b,onChange:B}),label:"Price includes taxes"}),!b&&e.jsx(t.Text,{name:"taxes",label:"Tax (%)",placeholder:"0.00",type:"number",slotProps:{inputLabel:{shrink:!0},input:{startAdornment:e.jsx(z,{position:"start",sx:{mr:.75},children:e.jsx(c,{component:"span",sx:{color:"text.disabled"},children:"%"})})}}})]})]})]}),J=()=>e.jsxs(c,{sx:{gap:3,display:"flex",flexWrap:"wrap",alignItems:"center"},children:[e.jsx(D,{label:"Publish",control:e.jsx(H,{defaultChecked:!0,slotProps:{input:{id:"publish-switch"}}}),sx:{pl:3,flexGrow:1}}),e.jsx(O,{type:"submit",variant:"contained",size:"large",loading:A,children:d?"Save changes":"Create product"})]});return e.jsx(Z,{methods:T,onSubmit:L,children:e.jsxs(j,{spacing:{xs:3,md:5},sx:{mx:"auto",maxWidth:{xs:720,xl:880}},children:[s(),C(),U(),J()]})})}const R=200,Pe=Array.from({length:21},(d,p)=>{const o=p*10,i=p===0?`$${o}`:`${o}`;return{value:o,label:p%4?"":i}});function Ye({open:d,onOpen:p,onClose:o,canReset:i,filters:u,options:b}){const{state:n,setState:l,resetState:T}=u,y=x.useCallback(s=>{const C=n.gender.includes(s)?n.gender.filter(U=>U!==s):[...n.gender,s];l({gender:C})},[l,n.gender]),v=x.useCallback(s=>{l({category:s})},[l]),P=x.useCallback(s=>{l({colors:s})},[l]),I=x.useCallback((s,C)=>{l({priceRange:C})},[l]),A=x.useCallback(s=>{l({rating:s})},[l]),f=()=>e.jsxs(e.Fragment,{children:[e.jsxs(c,{sx:{py:2,pr:1,pl:2.5,display:"flex",alignItems:"center"},children:[e.jsx(h,{variant:"h6",sx:{flexGrow:1},children:"Filters"}),e.jsx(ie,{title:"Reset",children:e.jsx(W,{onClick:()=>T(),children:e.jsx(V,{color:"error",variant:"dot",invisible:!i,children:e.jsx(w,{icon:"solar:restart-bold"})})})}),e.jsx(W,{onClick:o,children:e.jsx(w,{icon:"mingcute:close-line"})})]}),e.jsx(F,{sx:{borderStyle:"dashed"}})]}),L=()=>e.jsxs(c,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(h,{variant:"subtitle2",sx:{mb:1},children:"Gender"}),b.genders.map(s=>e.jsx(D,{label:s.label,control:e.jsx(pe,{checked:n.gender.includes(s.label),onClick:()=>y(s.label),slotProps:{input:{id:`${s.value}-checkbox`}}})},s.value))]}),_=()=>e.jsxs(c,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(h,{variant:"subtitle2",sx:{mb:1},children:"Category"}),b.categories.map(s=>e.jsx(D,{label:s,control:e.jsx(ue,{checked:s===n.category,onClick:()=>v(s),slotProps:{input:{id:`${s}-radio`}}}),sx:{...s==="all"&&{textTransform:"capitalize"}}},s))]}),N=()=>e.jsxs(c,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(h,{variant:"subtitle2",sx:{mb:1},children:"Color"}),e.jsx(me,{options:b.colors,value:n.colors,onChange:s=>P(s),limit:6})]}),B=()=>e.jsxs(c,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(h,{variant:"subtitle2",children:"Price"}),e.jsxs(c,{sx:{my:2,gap:5,display:"flex"},children:[e.jsx(Y,{type:"min",value:n.priceRange,onChange:l}),e.jsx(Y,{type:"max",value:n.priceRange,onChange:l})]}),e.jsx(oe,{value:n.priceRange,onChange:I,step:10,min:0,max:R,marks:Pe,getAriaValueText:s=>`$${s}`,valueLabelFormat:s=>`$${s}`,sx:{alignSelf:"center",width:"calc(100% - 24px)"}})]}),S=()=>e.jsxs(c,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(h,{variant:"subtitle2",sx:{mb:2},children:"Rating"}),b.ratings.map((s,C)=>e.jsxs(c,{onClick:()=>A(s),sx:{mb:1,gap:1,ml:-1,p:.5,display:"flex",borderRadius:1,cursor:"pointer",typography:"body2",alignItems:"center","&:hover":{opacity:.48},...n.rating===s&&{bgcolor:"action.selected"}},children:[e.jsx(be,{readOnly:!0,value:4-C})," & Up"]},s))]});return e.jsxs(e.Fragment,{children:[e.jsx(O,{disableRipple:!0,color:"inherit",endIcon:e.jsx(V,{color:"error",variant:"dot",invisible:!i,children:e.jsx(w,{icon:"ic:round-filter-list"})}),onClick:p,children:"Filters"}),e.jsxs(re,{anchor:"right",open:d,onClose:o,slotProps:{backdrop:{invisible:!0},paper:{sx:{width:320}}},children:[f(),e.jsx(ne,{sx:{px:2.5,py:3},children:e.jsxs(j,{spacing:3,children:[L(),_(),N(),B(),S()]})})]})]})}function Y({type:d,value:p,onChange:o}){const i=p[0],u=p[1],b=x.useCallback(()=>{const n=Math.max(0,Math.min(i,R)),l=Math.max(0,Math.min(u,R));(n!==i||l!==u)&&o({priceRange:[n,l]})},[i,u,o]);return e.jsxs(c,{sx:{width:1,display:"flex",alignItems:"center"},children:[e.jsx(h,{variant:"caption",sx:{flexGrow:1,color:"text.disabled",textTransform:"capitalize",fontWeight:"fontWeightSemiBold"},children:`${d} ($)`}),e.jsx(xe,{hideButtons:!0,max:R,value:d==="min"?i:u,onChange:(n,l)=>o({priceRange:d==="min"?[l,u]:[i,l]}),onBlur:b,sx:{maxWidth:64},slotProps:{input:{sx:{[`& .${ce.input}`]:{pr:1,textAlign:"right"}}}}})]})}const ye=a.object({rating:a.number().min(1,"Rating must be greater than or equal to 1!"),name:a.string().min(1,{message:"Name is required!"}),review:a.string().min(1,{message:"Review is required!"}),email:a.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function Qe({onClose:d,...p}){const o={rating:0,review:"",name:"",email:""},i=X({mode:"all",resolver:Q(ye),defaultValues:o}),{reset:u,handleSubmit:b,formState:{isSubmitting:n}}=i,l=b(async y=>{try{await new Promise(v=>setTimeout(v,500)),u(),d(),console.info("DATA",y)}catch(v){console.error(v)}}),T=x.useCallback(()=>{d(),u()},[d,u]);return e.jsx(de,{onClose:d,...p,children:e.jsxs(Z,{methods:i,onSubmit:l,children:[e.jsx(he,{children:" Add Review "}),e.jsxs(ge,{children:[e.jsxs("div",{children:[e.jsx(h,{variant:"body2",sx:{mb:1},children:"Your review about this product:"}),e.jsx(t.Rating,{name:"rating"})]}),e.jsx(t.Text,{name:"review",label:"Review *",multiline:!0,rows:3,sx:{mt:3}}),e.jsx(t.Text,{name:"name",label:"Name *",sx:{mt:3}}),e.jsx(t.Text,{name:"email",label:"Email *",sx:{mt:3}})]}),e.jsxs(je,{children:[e.jsx(O,{color:"inherit",variant:"outlined",onClick:T,children:"Cancel"}),e.jsx(O,{type:"submit",variant:"contained",loading:n,children:"Post"})]})]})})}export{Ye as P,Me as a,ve as b,$e as c,ze as d,Ve as e,Qe as f,He as g,We as h,Ke as i};
