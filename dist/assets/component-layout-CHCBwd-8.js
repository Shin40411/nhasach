import{q as b,E as v,j as o,b9 as O,bp as W,bq as j,br as A,bs as $,bt as B,bu as z,bv as C,g,bw as F,bx as G,H as M,F as U,x as V,by as q,bz as Y,N as P,bA as w,bB as Q,bC as X,bD as K,bE as J,bF as Z,V as L,R as D,T as tt,b5 as et,Y as at,I as ot,bG as nt,bH as st,z as rt,bI as it,bJ as lt,C as pt}from"./index-usks_mw-.js";b("div")(({theme:t})=>({width:"100%",display:"flex",flexWrap:"wrap",position:"relative",alignItems:"center",rowGap:t.spacing(3),columnGap:t.spacing(2),justifyContent:"center",padding:t.spacing(6,3),borderRadius:t.shape.borderRadius*1.5,backgroundColor:v(t.vars.palette.grey["500Channel"],.04),boxShadow:`0 0 0 1px ${v(t.vars.palette.grey["500Channel"],.16)}`}));b("span")(({theme:t})=>({top:0,left:0,position:"absolute",marginLeft:t.spacing(2.5),padding:t.spacing(.25,1),color:t.vars.palette.text.primary,borderRadius:t.shape.borderRadius*2,backgroundColor:t.vars.palette.common.white,transform:"translateY(-50%)",fontSize:t.typography.caption.fontSize,fontWeight:t.typography.fontWeightSemiBold,border:`solid 1px ${v(t.vars.palette.grey["500Channel"],.24)}`,...t.applyStyles("dark",{backgroundColor:t.vars.palette.background.neutral})}));function ct({children:t,isActive:n,sx:e,...i}){const a=s=>({top:"50%",width:"0px",content:'""',height:"0px",opacity:.24,position:"absolute",borderStyle:"solid",transform:"translate(-50%, -50%)",left:"var(--arrow-offset-left, -8px)",borderWidth:"var(--arrow-size, 5px) 0 var(--arrow-size, 5px) var(--arrow-size, 5px)",borderColor:`transparent transparent transparent ${s.vars.palette.text.primary}`,zIndex:9,...s.direction==="rtl"&&{transform:"translate(-50%, -50%) scaleX(-1)"}});return o.jsx(O,{disableGutters:!0,disableRipple:!0,disableTouchRipple:!0,sx:[s=>({...s.typography.body2,p:0,position:"relative",color:"text.secondary",fontSize:s.typography.pxToRem(13),"&:hover":{color:"text.primary",bgcolor:"transparent"},[`&.${W.focusVisible}`]:{bgcolor:"transparent"},...n&&{color:"text.primary",fontWeight:"fontWeightSemiBold","&::before":a(s)}}),...Array.isArray(e)?e:[e]],...i,children:t})}const k={primaryNav:j("component__layout__primary__nav"),secondaryNav:j("component__layout__secondary__nav")},dt=b("div")(({theme:t})=>({maxHeight:800,display:"none",position:"sticky",alignSelf:"start",flexDirection:"column",padding:t.spacing(0,"var(--nav-gutters)"),top:"calc(var(--layout-header-desktop-height) + 24px)"})),ut=b("nav")({minHeight:0,display:"flex",flexDirection:"column"}),T=b("ul")({display:"flex",flexDirection:"column"}),S=b("li")({display:"flex",flexDirection:"column",alignItems:"flex-start"});function gt({sx:t,navData:n,className:e,...i}){return o.jsx(dt,{className:A([k.primaryNav,e]),sx:t,...i,children:o.jsx(ut,{children:o.jsx(T,{sx:[a=>({...a.mixins.hideScrollY,"--arrow-size":"7px","--arrow-offset-left":"-14px",gap:"var(--primary-nav-list-gap)"})],children:n==null?void 0:n.map(a=>o.jsx(xt,{subheader:a.title,items:a.items},a.title))})})})}function xt({subheader:t,items:n}){const e=$(),i={top:0,left:3,bottom:0,my:"auto",width:"1px",content:'""',bgcolor:"divider",position:"absolute",height:"calc(100% - 12px)"},a=n.map(r=>{var c;return{...r,ClassOfBook:(c=r.class)!=null&&c.startsWith("Lớp")?r.class:`Lớp ${r.class||"Không rõ"}`}}),s=Array.from(new Map(a.map(r=>[r.class,r])).values());return o.jsxs(S,{children:[o.jsx(B,{component:"h6",sx:{px:0,pb:.5,mt:0,mx:0,mb:.5,width:1,color:"text.primary",typography:"overline",bgcolor:"background.default"},children:t}),o.jsx(T,{sx:{pl:"21px",position:"relative",gap:"var(--primary-nav-item-gap)","&::before":i},children:s.map(r=>o.jsx(S,{children:o.jsx(z,{to:r.href,style:{textDecoration:"none"},children:o.jsxs(ct,{isActive:C(r.href,e),autoFocus:C(r.href,e),children:[r.ClassOfBook," ",r.packageType==="MUI X"&&o.jsx(o.Fragment,{children:"(MUI X)"})]})})},r.name))})]})}function ht(t,n){const[e,i]=g.useState(0),a=g.useCallback(()=>{const r=window.innerHeight*n,c=window.scrollY+r,d=document.querySelectorAll(`.${t}`);let x=null;d.forEach((y,p)=>{const u=y.offsetTop,m=u+y.clientHeight;c>=u&&c<m&&(x=p)}),i(x)},[n,t]),s=F(a,1e3);return g.useEffect(()=>(window.addEventListener("scroll",s,{passive:!0}),()=>{window.removeEventListener("scroll",s)}),[s]),e}function yt(t){const n=g.useCallback(e=>{const i=document.querySelector(e);if(i){const a=i.offsetTop-t;window.scrollTo({top:a,behavior:"smooth"})}},[t]);return g.useEffect(()=>{const e=window.location.hash;e&&n(e)},[n]),n}const bt=({category:t,name:n,iconPrefix:e,packageType:i,class:a,idBook:s,priceBook:r,author:c})=>({name:n,href:Y(i,a),hrefChildren:`/${s}/${q(n)}`,icon:`${V.assetsDir}/assets/Thumbnail/${e}`,packageType:i,class:a,priceBook:r,idBook:s,author:c}),mt=G.reduce((t,n)=>{const{subject:e,title:i,grade:a,id:s,price:r,author:c}=n;t[e]||(t[e]=[]);let d="",x="";a.includes("Lớp ",0)?(d=a,x=a.replace("Lớp ","").split(", ").join("")):(d=`Lớp ${a}`,x=a.split(", ").join(""));let y="";e&&(y=M(e));let p="";i&&(p=U(i.replace(".","")));const u=`${d}/thumbnail_stk${x}_${y}${x}_${p}.png`;return t[e].push(bt({category:"sgk",name:i,iconPrefix:u,packageType:e,class:a,idBook:s,priceBook:r})),t},{}),ft=Object.entries(mt).map(([t,n])=>({title:t,items:n})),I=[...ft];function vt({navData:t=[],sx:n}){const e=P(),i=$(),a=t==null?void 0:t.map(l=>l.items).flat(),s=a==null?void 0:a.find(l=>C(l.href,i)),[r,c]=g.useState(!1),[d,x]=g.useState(""),[y,p]=g.useState(s||null);g.useEffect(()=>{c(d.trim().length>0)},[d]);const u=g.useCallback(l=>{p(l),l&&e.push(l==null?void 0:l.href)},[e]),m={width:"100%",[`& .${w.listbox}`]:{[`& .${w.option}`]:{p:0,[`& .${Q.root}`]:{px:1,py:.5,width:1}}}},_={[`& .${X.input}`]:{typography:"body2",fontWeight:"fontWeightMedium"}};return o.jsx(K,{open:r,sx:n,autoHighlight:!0,disableClearable:!0,autoComplete:!1,popupIcon:null,options:a,value:y,onChange:(l,h)=>u(h),onInputChange:(l,h)=>x(h),getOptionLabel:l=>l.name,noOptionsText:o.jsx(nt,{query:d}),isOptionEqualToValue:(l,h)=>l.name===h.name,slotProps:{paper:{sx:m}},renderInput:l=>o.jsx(et,{...l,hiddenLabel:!0,size:"small",variant:"filled",placeholder:"Tìm kiếm...",slotProps:{input:{...l.InputProps,startAdornment:o.jsx(at,{position:"start",children:o.jsx(ot,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}},sx:_}),renderOption:(l,h,{inputValue:N})=>{const R=J(h.name,N),E=Z(h.name,R);return g.createElement("li",{...l,key:h.name},o.jsx(L,{component:D,href:h.href,color:"inherit",underline:"none",children:E.map((f,H)=>o.jsx(tt,{component:"span",color:f.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:f.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:f.text},H))},h.name))}})}const Ct=120,kt=t=>({"--nav-gutters":"16px","--nav-width":"220px","--primary-nav-list-gap":"24px","--primary-nav-item-gap":"6px","--secondary-nav-item-gap":"10px","--section-gap":"24px","--section-padding":"24px","--layout-gutters":"16px","--layout-gap":"24px",[t.breakpoints.up("md")]:{"--layout-gutters":"20px"},[t.breakpoints.up("xl")]:{"--layout-gutters":"80px"}});function $t({sx:t,children:n,heroProps:e,sectionData:i,containerProps:a,queryClassName:s="scroll__to__view",offsetValue:r=.3,...c}){ht(s,r);const d=yt(Ct);g.useCallback(p=>{const u=document.querySelectorAll(`.${s}`);if(u[p]){const m=u[p].id;d(`#${m}`)}},[s,d]);const x=()=>o.jsx(gt,{navData:I}),y=()=>o.jsxs(wt,{maxWidth:"lg",...a,children:[o.jsx(vt,{navData:I,sx:{mb:4}}),n??o.jsx(St,{children:i==null?void 0:i.map(p=>{const u=`${st(p.name)}`;return o.jsxs(rt,{id:u,className:s,children:[o.jsx(it,{title:p.name,subheader:p.description,slotProps:{title:{component:L,href:`#${u}`,color:"inherit",sx:{display:"inline-flex","&:hover":{opacity:.8}}}}}),o.jsx(lt,{children:p.component})]},p.name)})})]});return o.jsxs(o.Fragment,{children:[e==null?void 0:e.topNode,e==null?void 0:e.bottomNode,o.jsxs(jt,{sx:[kt,...Array.isArray(t)?t:[t]],...c,children:[x(),y()]})]})}const jt=b("div")(({theme:t})=>({display:"grid",gap:"var(--layout-gap)",padding:t.spacing(8,"var(--layout-gutters)",15,"var(--layout-gutters)"),[t.breakpoints.up("md")]:{gridTemplateColumns:"var(--nav-width) auto",[`& .${k.primaryNav}`]:{display:"flex"}},[t.breakpoints.up(1440)]:{gridTemplateColumns:"var(--nav-width) auto var(--nav-width)",[`& .${k.secondaryNav}`]:{display:"flex"}}})),wt=b(pt)(({theme:t})=>({padding:0,minWidth:0,[t.breakpoints.up("sm")]:{padding:0}})),St=b("div")(({theme:t})=>({display:"flex",flexDirection:"column",gap:"var(--section-gap)",padding:"var(--section-padding)",borderRadius:t.shape.borderRadius*2,backgroundColor:t.vars.palette.background.neutral}));export{$t as C,I as a};
