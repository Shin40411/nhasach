import{cq as I,K as R,j as e,B as f,A as _,N as z,R as F,b6 as A,dP as E,V as w,I as u,dQ as U,ct as B,cu as b,F as y,g as p,cn as V,cC as H,cB as Q,fc as $,b1 as K,U as q,cy as k,fB as G,dU as W,dX as D,eh as J,dJ as X,O as C,t as Z,cI as Y,fy as ee,E as se,cH as le,fC as te,dZ as oe,o as ne}from"./index-BPi-lj99.js";import{U as re}from"./user-quick-edit-form-BKv-R0-Q.js";import{C as L}from"./confirm-dialog-DFJzv7fL.js";import{u as ae,g as ie,r as ce,T as de,e as he,a as me,b as ue}from"./table-pagination-custom-Q4IswwrP.js";import{T as pe}from"./table-empty-rows-D838YnHc.js";import{T as xe}from"./table-head-custom-ipFp6YIf.js";import{T as je,a as ge,b as be}from"./TableHead-BK-FFbhv.js";import{T as g}from"./TableCell-DZiVaiNL.js";import{C as N}from"./Checkbox-Cb0hcSDN.js";import{S as fe}from"./Stack-qxGgU9sa.js";import{F as Ce,a as P,c as T}from"./filters-result-uhHU2u14.js";import"./zod-B_WTTuJ9.js";import"./styles-BkVqaM-o.js";import"./fields-C_OA-jBI.js";import"./Rating-Bkwu4u_e.js";import"./editor-BHaBjMrK.js";import"./code-highlight-block-CqLMdGe8.js";import"./FormGroup-CwCuTxF6.js";import"./FormControlLabel-CR_hDGs6.js";import"./index-BSK_tT2J.js";import"./index-Chjiymov.js";import"./upload-BlD-M9M6.js";import"./index-DpGkvVRP.js";import"./preview-single-file-CNraPjvt.js";import"./format-number-bPxp5Hz3.js";import"./image-31DAP9Wr.js";import"./DatePicker-CUx5CUAj.js";import"./DialogActions-D-kuG3ww.js";import"./DialogContent-31eqGF97.js";import"./dialogTitleClasses-pRzgyf3x.js";import"./schema-helper-zXJyfLbR.js";import"./form-provider-BxIa1T6o.js";import"./DialogTitle-B2Gb2OYZ.js";import"./empty-content-9ilj_6E5.js";import"./TablePagination-tZn8MUMt.js";import"./LastPage-ClWw7PMw.js";function we({row:s,selected:r,editHref:i,onSelectRow:c,onDeleteRow:a}){const t=I(),h=R(),l=R(),d=()=>e.jsx(re,{currentUser:s,open:l.value,onClose:l.onFalse}),n=()=>e.jsx(U,{open:t.open,anchorEl:t.anchorEl,onClose:t.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(B,{children:[e.jsx("li",{children:e.jsxs(b,{component:F,href:i,onClick:()=>t.onClose(),children:[e.jsx(u,{icon:"solar:pen-bold"}),"Edit"]})}),e.jsxs(b,{onClick:()=>{h.onTrue(),t.onClose()},sx:{color:"error.main"},children:[e.jsx(u,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),x=()=>e.jsx(L,{open:h.value,onClose:h.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(y,{variant:"contained",color:"error",onClick:a,children:"Delete"})});return e.jsxs(e.Fragment,{children:[e.jsxs(je,{hover:!0,selected:r,"aria-checked":r,tabIndex:-1,children:[e.jsx(g,{padding:"checkbox",children:e.jsx(N,{checked:r,onClick:c,slotProps:{input:{id:`${s.id}-checkbox`,"aria-label":`${s.id} checkbox`}}})}),e.jsx(g,{children:e.jsxs(f,{sx:{gap:2,display:"flex",alignItems:"center"},children:[e.jsx(_,{alt:s.name,src:s.avatarUrl}),e.jsxs(fe,{sx:{typography:"body2",flex:"1 1 auto",alignItems:"flex-start"},children:[e.jsx(z,{component:F,href:i,color:"inherit",sx:{cursor:"pointer"},children:s.name}),e.jsx(f,{component:"span",sx:{color:"text.disabled"},children:s.email})]})]})}),e.jsx(g,{sx:{whiteSpace:"nowrap"},children:s.phoneNumber}),e.jsx(g,{sx:{whiteSpace:"nowrap"},children:s.company}),e.jsx(g,{sx:{whiteSpace:"nowrap"},children:s.role}),e.jsx(g,{children:e.jsx(A,{variant:"soft",color:s.status==="active"&&"success"||s.status==="pending"&&"warning"||s.status==="banned"&&"error"||"default",children:s.status})}),e.jsx(g,{children:e.jsxs(f,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(E,{title:"Quick Edit",placement:"top",arrow:!0,children:e.jsx(w,{color:l.value?"inherit":"default",onClick:l.onTrue,children:e.jsx(u,{icon:"solar:pen-bold"})})}),e.jsx(w,{color:t.open?"inherit":"default",onClick:t.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})]})})]}),d(),n(),x()]})}function ve({filters:s,options:r,onResetPage:i}){const c=I(),{state:a,setState:t}=s,h=p.useCallback(n=>{i(),t({name:n.target.value})},[i,t]),l=p.useCallback(n=>{const x=typeof n.target.value=="string"?n.target.value.split(","):n.target.value;i(),t({role:x})},[i,t]),d=()=>e.jsx(U,{open:c.open,anchorEl:c.anchorEl,onClose:c.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(B,{children:[e.jsxs(b,{onClick:()=>c.onClose(),children:[e.jsx(u,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(b,{onClick:()=>c.onClose(),children:[e.jsx(u,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(b,{onClick:()=>c.onClose(),children:[e.jsx(u,{icon:"solar:export-bold"}),"Export"]})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(f,{sx:{p:2.5,gap:2,display:"flex",pr:{xs:2.5,md:1},flexDirection:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"}},children:[e.jsxs(V,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(H,{htmlFor:"filter-role-select",children:"Role"}),e.jsx(Q,{multiple:!0,value:a.role,onChange:l,input:e.jsx($,{label:"Role"}),renderValue:n=>n.map(x=>x).join(", "),inputProps:{id:"filter-role-select"},MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:r.roles.map(n=>e.jsxs(b,{value:n,children:[e.jsx(N,{disableRipple:!0,size:"small",checked:a.role.includes(n)}),n]},n))})]}),e.jsxs(f,{sx:{gap:2,width:1,flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(K,{fullWidth:!0,value:a.name,onChange:h,placeholder:"Search...",slotProps:{input:{startAdornment:e.jsx(q,{position:"start",children:e.jsx(u,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}}),e.jsx(w,{onClick:c.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})]})]}),d()]})}function Se({filters:s,onResetPage:r,totalResults:i,sx:c}){const{state:a,setState:t,resetState:h}=s,l=p.useCallback(()=>{r(),t({name:""})},[r,t]),d=p.useCallback(()=>{r(),t({status:"all"})},[r,t]),n=p.useCallback(j=>{const v=a.role.filter(S=>S!==j);r(),t({role:v})},[r,t,a.role]),x=p.useCallback(()=>{r(),h()},[r,h]);return e.jsxs(Ce,{totalResults:i,onReset:x,sx:c,children:[e.jsx(P,{label:"Status:",isShow:a.status!=="all",children:e.jsx(k,{...T,label:a.status,onDelete:d,sx:{textTransform:"capitalize"}})}),e.jsx(P,{label:"Role:",isShow:!!a.role.length,children:a.role.map(j=>p.createElement(k,{...T,key:j,label:j,onDelete:()=>n(j)}))}),e.jsx(P,{label:"Keyword:",isShow:!!a.name,children:e.jsx(k,{...T,label:a.name,onDelete:l})})]})}const ke=[{value:"all",label:"All"},...ee],Pe=[{id:"name",label:"Name"},{id:"phoneNumber",label:"Phone number",width:180},{id:"company",label:"Company",width:220},{id:"role",label:"Role",width:180},{id:"status",label:"Status",width:100},{id:"",width:88}];function Te(){const s=ae(),r=R(),[i,c]=p.useState(G),a=W({name:"",role:[],status:"all"}),{state:t,setState:h}=a,l=Re({inputData:i,comparator:ie(s.order,s.orderBy),filters:t}),d=ce(l,s.page,s.rowsPerPage),n=!!t.name||t.role.length>0||t.status!=="all",x=!l.length&&n||!l.length,j=p.useCallback(o=>{const m=i.filter(M=>M.id!==o);D.success("Delete success!"),c(m),s.onUpdatePageDeleteRow(d.length)},[d.length,s,i]),v=p.useCallback(()=>{const o=i.filter(m=>!s.selected.includes(m.id));D.success("Delete success!"),c(o),s.onUpdatePageDeleteRows(d.length,l.length)},[l.length,d.length,s,i]),S=p.useCallback((o,m)=>{s.onResetPage(),h({status:m})},[h,s]),O=()=>e.jsx(L,{open:r.value,onClose:r.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",s.selected.length," "]})," items?"]}),action:e.jsx(y,{variant:"contained",color:"error",onClick:()=>{v(),r.onFalse()},children:"Delete"})});return e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx(X,{heading:"List",links:[{name:"Dashboard",href:C.dashboard.root},{name:"User",href:C.dashboard.user.root},{name:"List"}],action:e.jsx(y,{component:F,href:C.dashboard.user.new,variant:"contained",startIcon:e.jsx(u,{icon:"mingcute:add-line"}),children:"New user"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(Z,{children:[e.jsx(Y,{value:t.status,onChange:S,sx:[o=>({px:2.5,boxShadow:`inset 0 -2px 0 0 ${se(o.vars.palette.grey["500Channel"],.08)}`})],children:ke.map(o=>e.jsx(le,{iconPosition:"end",value:o.value,label:o.label,icon:e.jsx(A,{variant:(o.value==="all"||o.value===t.status)&&"filled"||"soft",color:o.value==="active"&&"success"||o.value==="pending"&&"warning"||o.value==="banned"&&"error"||"default",children:["active","pending","banned","rejected"].includes(o.value)?i.filter(m=>m.status===o.value).length:i.length})},o.value))}),e.jsx(ve,{filters:a,onResetPage:s.onResetPage,options:{roles:te}}),n&&e.jsx(Se,{filters:a,totalResults:l.length,onResetPage:s.onResetPage,sx:{p:2.5,pt:0}}),e.jsxs(f,{sx:{position:"relative"},children:[e.jsx(de,{dense:s.dense,numSelected:s.selected.length,rowCount:l.length,onSelectAllRows:o=>s.onSelectAllRows(o,l.map(m=>m.id)),action:e.jsx(E,{title:"Delete",children:e.jsx(w,{color:"primary",onClick:r.onTrue,children:e.jsx(u,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(oe,{children:e.jsxs(ge,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(xe,{order:s.order,orderBy:s.orderBy,headCells:Pe,rowCount:l.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:o=>s.onSelectAllRows(o,l.map(m=>m.id))}),e.jsxs(be,{children:[l.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(o=>e.jsx(we,{row:o,selected:s.selected.includes(o.id),onSelectRow:()=>s.onSelectRow(o.id),onDeleteRow:()=>j(o.id),editHref:C.dashboard.user.edit(o.id)},o.id)),e.jsx(pe,{height:s.dense?56:76,emptyRows:he(s.page,s.rowsPerPage,l.length)}),e.jsx(me,{notFound:x})]})]})})]}),e.jsx(ue,{page:s.page,dense:s.dense,count:l.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onChangeDense:s.onChangeDense,onRowsPerPageChange:s.onChangeRowsPerPage})]})]}),O()]})}function Re({inputData:s,comparator:r,filters:i}){const{name:c,status:a,role:t}=i,h=s.map((l,d)=>[l,d]);return h.sort((l,d)=>{const n=r(l[0],d[0]);return n!==0?n:l[1]-d[1]}),s=h.map(l=>l[0]),c&&(s=s.filter(l=>l.name.toLowerCase().includes(c.toLowerCase()))),a!=="all"&&(s=s.filter(l=>l.status===a)),t.length&&(s=s.filter(l=>t.includes(l.role))),s}const Fe={title:`User list | Dashboard - ${ne.appName}`};function hs(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:Fe.title}),e.jsx(Te,{})]})}export{hs as default};
