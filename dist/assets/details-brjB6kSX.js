import{O as y,j as e,B as l,A as P,T as c,dx as w,b5 as I,M as j,I as o,cl as A,R as u,dN as v,Z as g,dO as F,co as D,cp as E,g as p,eh as b,W as h,C as T,ct as $,eS as B,D as S,x as U}from"./index-D6bpUwKX.js";import{u as W}from"./use-params-3mYV1zXJ.js";import{b as L}from"./blog-BmXRPvT1.js";import{P as O,a as G}from"./post-comment-form-BjoPe7yZ.js";import{b as M}from"./format-number-Cj8l_lI8.js";import{b as H,c as N}from"./post-skeleton-DmVGJ8WS.js";import{M as z}from"./markdown-D0BtPAT8.js";import{E as R}from"./empty-content-DB3Nbb7N.js";import{P as _}from"./Pagination-BdKAEoFn.js";import{S as V}from"./Stack-7h-e6yAT.js";import{F as Z}from"./FormControlLabel-BXvztm9I.js";import{C as q}from"./Checkbox-D-eTL2vR.js";import{A as J}from"./AvatarGroup-DcMTXqOX.js";import"./html-to-markdown-DfHH5kA-.js";import"./index-UwgYw27M.js";import"./zod-B5GKHG6E.js";import"./styles-D8b8rnOK.js";import"./fields-B53gUzDf.js";import"./Rating-BR8dol5T.js";import"./editor-DYEwp_Gv.js";import"./code-highlight-block-YQG8K_vY.js";import"./FormGroup-yYGkv0rT.js";import"./index-DWKsHr_b.js";import"./index-Chjiymov.js";import"./upload-Ch5UFSCV.js";import"./index-DGt-RZrN.js";import"./preview-single-file-DAd3oWJu.js";import"./image-FIum-Rwa.js";import"./DatePicker-BUn93AuB.js";import"./DialogActions-CNc7tTfu.js";import"./DialogContent-Byx-1axF.js";import"./dialogTitleClasses-Bbkpp0St.js";import"./schema-helper-CN5fZ2XK.js";import"./form-provider-BQ6XSOiV.js";import"./Fab-CgBh_scu.js";import"./Skeleton-BPvFbs9h.js";import"./LastPage-Cv1LM9EA.js";function C({name:r,avatarUrl:a,message:n,tagUser:t,postedAt:s,hasReply:d}){const i=y();return e.jsxs(l,{sx:{pt:3,gap:2,display:"flex",position:"relative",...d&&{pl:8}},children:[e.jsx(P,{alt:r,src:a,sx:{width:48,height:48}}),e.jsxs(l,{sx:[f=>({pb:3,display:"flex",flex:"1 1 auto",flexDirection:"column",borderBottom:`solid 1px ${f.vars.palette.divider}`})],children:[e.jsx(c,{variant:"subtitle2",sx:{mb:.5},children:r}),e.jsx(c,{variant:"caption",sx:{color:"text.disabled"},children:w(s)}),e.jsxs(c,{variant:"body2",sx:{mt:1},children:[t&&e.jsxs(l,{component:"strong",sx:{mr:.5},children:["@",t]}),n]}),i.value&&e.jsx(I,{fullWidth:!0,autoFocus:!0,placeholder:"Write comment...",sx:{mt:2}})]}),!d&&e.jsx(j,{size:"small",color:i.value?"primary":"inherit",startIcon:e.jsx(o,{icon:"solar:pen-bold",width:16}),onClick:i.onToggle,sx:{right:0,position:"absolute"},children:"Reply"})]})}function K({comments:r=[]}){return e.jsxs(e.Fragment,{children:[r.map(a=>{const n=!!a.replyComment.length;return e.jsxs(l,{children:[e.jsx(C,{name:a.name,message:a.message,postedAt:a.postedAt,avatarUrl:a.avatarUrl}),n&&a.replyComment.map(t=>{const s=a.users.find(d=>d.id===t.userId);return e.jsx(C,{name:(s==null?void 0:s.name)||"",message:t.message,postedAt:t.postedAt,avatarUrl:(s==null?void 0:s.avatarUrl)||"",tagUser:t.tagUser,hasReply:!0},t.id)})]},a.id)}),e.jsx(_,{count:8,sx:{display:"flex",justifyContent:"center",my:{xs:5,md:8}}})]})}function Q({sx:r,publish:a,backHref:n,editHref:t,liveHref:s,publishOptions:d,onChangePublish:i,...f}){const m=A(),k=()=>e.jsx(F,{open:m.open,anchorEl:m.anchorEl,onClose:m.onClose,slotProps:{arrow:{placement:"top-right"}},children:e.jsx(D,{children:d.map(x=>e.jsxs(E,{selected:x.value===a,onClick:()=>{m.onClose(),i(x.value)},children:[x.value==="published"&&e.jsx(o,{icon:"eva:cloud-upload-fill"}),x.value==="draft"&&e.jsx(o,{icon:"solar:file-text-bold"}),x.label]},x.value))})});return e.jsxs(e.Fragment,{children:[e.jsxs(l,{sx:[{gap:1.5,display:"flex",mb:{xs:3,md:5}},...Array.isArray(r)?r:[r]],...f,children:[e.jsx(j,{component:u,href:n,startIcon:e.jsx(o,{icon:"eva:arrow-ios-back-fill",width:16}),children:"Back"}),e.jsx(l,{sx:{flexGrow:1}}),a==="published"&&e.jsx(v,{title:"Go Live",children:e.jsx(g,{component:u,href:s,children:e.jsx(o,{icon:"eva:external-link-fill"})})}),e.jsx(v,{title:"Edit",children:e.jsx(g,{component:u,href:t,children:e.jsx(o,{icon:"solar:pen-bold"})})}),e.jsx(j,{color:"inherit",variant:"contained",loading:!a,loadingIndicator:"Loadingâ€¦",endIcon:e.jsx(o,{icon:"eva:arrow-ios-downward-fill"}),onClick:m.onOpen,sx:{textTransform:"capitalize"},children:a})]}),k()]})}function X({post:r,loading:a,error:n}){const[t,s]=p.useState(""),d=p.useCallback(i=>{s(i)},[]);return p.useEffect(()=>{r&&s(r==null?void 0:r.publish)},[r]),a?e.jsx(b,{maxWidth:!1,disablePadding:!0,children:e.jsx(H,{})}):n?e.jsx(b,{maxWidth:!1,children:e.jsx(R,{filled:!0,title:"Post not found!",action:e.jsx(j,{component:u,href:h.dashboard.post.root,startIcon:e.jsx(o,{width:16,icon:"eva:arrow-ios-back-fill"}),sx:{mt:3},children:"Back to list"}),sx:{py:10,height:"auto",flexGrow:"unset"}})}):e.jsxs(b,{maxWidth:!1,disablePadding:!0,children:[e.jsx(T,{maxWidth:!1,sx:{px:{sm:5}},children:e.jsx(Q,{backHref:h.dashboard.post.root,editHref:h.dashboard.post.edit(`${r==null?void 0:r.title}`),liveHref:h.post.details(`${r==null?void 0:r.title}`),publish:`${t}`,onChangePublish:d,publishOptions:N})}),e.jsx(O,{title:`${r==null?void 0:r.title}`,coverUrl:`${r==null?void 0:r.coverUrl}`}),e.jsxs(l,{sx:{pb:5,mx:"auto",maxWidth:720,mt:{xs:5,md:10},px:{xs:2,sm:3}},children:[e.jsx(c,{variant:"subtitle1",children:r==null?void 0:r.description}),e.jsx(z,{children:r==null?void 0:r.content}),e.jsxs(V,{spacing:3,sx:[i=>({py:3,borderTop:`dashed 1px ${i.vars.palette.divider}`,borderBottom:`dashed 1px ${i.vars.palette.divider}`})],children:[e.jsx(l,{sx:{gap:1,display:"flex",flexWrap:"wrap"},children:r==null?void 0:r.tags.map(i=>e.jsx($,{label:i,variant:"soft"},i))}),e.jsxs(l,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Z,{label:M(r==null?void 0:r.totalFavorites),control:e.jsx(q,{defaultChecked:!0,size:"small",color:"error",icon:e.jsx(o,{icon:"solar:heart-bold"}),checkedIcon:e.jsx(o,{icon:"solar:heart-bold"}),slotProps:{input:{id:"favorite-checkbox","aria-label":"Favorite checkbox"}}}),sx:{mr:1}}),e.jsx(J,{sx:{[`& .${B.avatar}`]:{width:32,height:32}},children:r==null?void 0:r.favoritePerson.map(i=>e.jsx(P,{alt:i.name,src:i.avatarUrl},i.name))})]})]}),e.jsxs(l,{sx:{mb:3,mt:5,display:"flex"},children:[e.jsx(c,{variant:"h4",children:"Comments"}),e.jsxs(c,{variant:"subtitle2",sx:{color:"text.disabled"},children:["(",r==null?void 0:r.comments.length,")"]})]}),e.jsx(G,{}),e.jsx(S,{sx:{mt:5,mb:2}}),e.jsx(K,{comments:(r==null?void 0:r.comments)??[]})]})]})}const Y={title:`Post details | Dashboard - ${U.appName}`};function Le(){const{title:r=""}=W(),{post:a,postLoading:n,postError:t}=L(r);return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:Y.title}),e.jsx(X,{post:a,loading:n,error:t})]})}export{Le as default};
